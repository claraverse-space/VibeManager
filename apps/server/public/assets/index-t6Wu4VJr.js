var sd=i=>{throw TypeError(i)};var Nl=(i,c,p)=>c.has(i)||sd("Cannot "+p);var $=(i,c,p)=>(Nl(i,c,"read from private field"),p?p.call(i):c.get(i)),xe=(i,c,p)=>c.has(i)?sd("Cannot add the same private member more than once"):c instanceof WeakSet?c.add(i):c.set(i,p),me=(i,c,p,R)=>(Nl(i,c,"write to private field"),R?R.call(i,p):c.set(i,p),p),Re=(i,c,p)=>(Nl(i,c,"access private method"),p);var No=(i,c,p,R)=>({set _(A){me(i,c,A,p)},get _(){return $(i,c,R)}});(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))R(A);new MutationObserver(A=>{for(const j of A)if(j.type==="childList")for(const I of j.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&R(I)}).observe(document,{childList:!0,subtree:!0});function p(A){const j={};return A.integrity&&(j.integrity=A.integrity),A.referrerPolicy&&(j.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?j.credentials="include":A.crossOrigin==="anonymous"?j.credentials="omit":j.credentials="same-origin",j}function R(A){if(A.ep)return;A.ep=!0;const j=p(A);fetch(A.href,j)}})();function Kd(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ol={exports:{}},ln={},jl={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var id;function gm(){if(id)return De;id=1;var i=Symbol.for("react.element"),c=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),I=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),h=Symbol.iterator;function g(P){return P===null||typeof P!="object"?null:(P=h&&P[h]||P["@@iterator"],typeof P=="function"?P:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,m={};function o(P,B,te){this.props=P,this.context=B,this.refs=m,this.updater=te||x}o.prototype.isReactComponent={},o.prototype.setState=function(P,B){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,B,"setState")},o.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function a(){}a.prototype=o.prototype;function n(P,B,te){this.props=P,this.context=B,this.refs=m,this.updater=te||x}var u=n.prototype=new a;u.constructor=n,E(u,o.prototype),u.isPureReactComponent=!0;var _=Array.isArray,k=Object.prototype.hasOwnProperty,b={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function C(P,B,te){var Y,ue={},de=null,K=null;if(B!=null)for(Y in B.ref!==void 0&&(K=B.ref),B.key!==void 0&&(de=""+B.key),B)k.call(B,Y)&&!L.hasOwnProperty(Y)&&(ue[Y]=B[Y]);var N=arguments.length-2;if(N===1)ue.children=te;else if(1<N){for(var se=Array(N),ee=0;ee<N;ee++)se[ee]=arguments[ee+2];ue.children=se}if(P&&P.defaultProps)for(Y in N=P.defaultProps,N)ue[Y]===void 0&&(ue[Y]=N[Y]);return{$$typeof:i,type:P,key:de,ref:K,props:ue,_owner:b.current}}function T(P,B){return{$$typeof:i,type:P.type,key:B,ref:P.ref,props:P.props,_owner:P._owner}}function H(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function U(P){var B={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(te){return B[te]})}var W=/\/+/g;function F(P,B){return typeof P=="object"&&P!==null&&P.key!=null?U(""+P.key):B.toString(36)}function G(P,B,te,Y,ue){var de=typeof P;(de==="undefined"||de==="boolean")&&(P=null);var K=!1;if(P===null)K=!0;else switch(de){case"string":case"number":K=!0;break;case"object":switch(P.$$typeof){case i:case c:K=!0}}if(K)return K=P,ue=ue(K),P=Y===""?"."+F(K,0):Y,_(ue)?(te="",P!=null&&(te=P.replace(W,"$&/")+"/"),G(ue,B,te,"",function(ee){return ee})):ue!=null&&(H(ue)&&(ue=T(ue,te+(!ue.key||K&&K.key===ue.key?"":(""+ue.key).replace(W,"$&/")+"/")+P)),B.push(ue)),1;if(K=0,Y=Y===""?".":Y+":",_(P))for(var N=0;N<P.length;N++){de=P[N];var se=Y+F(de,N);K+=G(de,B,te,se,ue)}else if(se=g(P),typeof se=="function")for(P=se.call(P),N=0;!(de=P.next()).done;)de=de.value,se=Y+F(de,N++),K+=G(de,B,te,se,ue);else if(de==="object")throw B=String(P),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return K}function re(P,B,te){if(P==null)return P;var Y=[],ue=0;return G(P,Y,"","",function(de){return B.call(te,de,ue++)}),Y}function ne(P){if(P._status===-1){var B=P._result;B=B(),B.then(function(te){(P._status===0||P._status===-1)&&(P._status=1,P._result=te)},function(te){(P._status===0||P._status===-1)&&(P._status=2,P._result=te)}),P._status===-1&&(P._status=0,P._result=B)}if(P._status===1)return P._result.default;throw P._result}var le={current:null},X={transition:null},D={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:X,ReactCurrentOwner:b};function O(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:re,forEach:function(P,B,te){re(P,function(){B.apply(this,arguments)},te)},count:function(P){var B=0;return re(P,function(){B++}),B},toArray:function(P){return re(P,function(B){return B})||[]},only:function(P){if(!H(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},De.Component=o,De.Fragment=p,De.Profiler=A,De.PureComponent=n,De.StrictMode=R,De.Suspense=d,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,De.act=O,De.cloneElement=function(P,B,te){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var Y=E({},P.props),ue=P.key,de=P.ref,K=P._owner;if(B!=null){if(B.ref!==void 0&&(de=B.ref,K=b.current),B.key!==void 0&&(ue=""+B.key),P.type&&P.type.defaultProps)var N=P.type.defaultProps;for(se in B)k.call(B,se)&&!L.hasOwnProperty(se)&&(Y[se]=B[se]===void 0&&N!==void 0?N[se]:B[se])}var se=arguments.length-2;if(se===1)Y.children=te;else if(1<se){N=Array(se);for(var ee=0;ee<se;ee++)N[ee]=arguments[ee+2];Y.children=N}return{$$typeof:i,type:P.type,key:ue,ref:de,props:Y,_owner:K}},De.createContext=function(P){return P={$$typeof:I,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:j,_context:P},P.Consumer=P},De.createElement=C,De.createFactory=function(P){var B=C.bind(null,P);return B.type=P,B},De.createRef=function(){return{current:null}},De.forwardRef=function(P){return{$$typeof:l,render:P}},De.isValidElement=H,De.lazy=function(P){return{$$typeof:S,_payload:{_status:-1,_result:P},_init:ne}},De.memo=function(P,B){return{$$typeof:v,type:P,compare:B===void 0?null:B}},De.startTransition=function(P){var B=X.transition;X.transition={};try{P()}finally{X.transition=B}},De.unstable_act=O,De.useCallback=function(P,B){return le.current.useCallback(P,B)},De.useContext=function(P){return le.current.useContext(P)},De.useDebugValue=function(){},De.useDeferredValue=function(P){return le.current.useDeferredValue(P)},De.useEffect=function(P,B){return le.current.useEffect(P,B)},De.useId=function(){return le.current.useId()},De.useImperativeHandle=function(P,B,te){return le.current.useImperativeHandle(P,B,te)},De.useInsertionEffect=function(P,B){return le.current.useInsertionEffect(P,B)},De.useLayoutEffect=function(P,B){return le.current.useLayoutEffect(P,B)},De.useMemo=function(P,B){return le.current.useMemo(P,B)},De.useReducer=function(P,B,te){return le.current.useReducer(P,B,te)},De.useRef=function(P){return le.current.useRef(P)},De.useState=function(P){return le.current.useState(P)},De.useSyncExternalStore=function(P,B,te){return le.current.useSyncExternalStore(P,B,te)},De.useTransition=function(){return le.current.useTransition()},De.version="18.3.1",De}var nd;function lc(){return nd||(nd=1,jl.exports=gm()),jl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od;function ym(){if(od)return ln;od=1;var i=lc(),c=Symbol.for("react.element"),p=Symbol.for("react.fragment"),R=Object.prototype.hasOwnProperty,A=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j={key:!0,ref:!0,__self:!0,__source:!0};function I(l,d,v){var S,h={},g=null,x=null;v!==void 0&&(g=""+v),d.key!==void 0&&(g=""+d.key),d.ref!==void 0&&(x=d.ref);for(S in d)R.call(d,S)&&!j.hasOwnProperty(S)&&(h[S]=d[S]);if(l&&l.defaultProps)for(S in d=l.defaultProps,d)h[S]===void 0&&(h[S]=d[S]);return{$$typeof:c,type:l,key:g,ref:x,props:h,_owner:A.current}}return ln.Fragment=p,ln.jsx=I,ln.jsxs=I,ln}var ad;function Sm(){return ad||(ad=1,Ol.exports=ym()),Ol.exports}var w=Sm(),ie=lc();const hn=Kd(ie);var Oo={},Il={exports:{}},Rt={},Bl={exports:{}},Fl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ld;function xm(){return ld||(ld=1,(function(i){function c(X,D){var O=X.length;X.push(D);e:for(;0<O;){var P=O-1>>>1,B=X[P];if(0<A(B,D))X[P]=D,X[O]=B,O=P;else break e}}function p(X){return X.length===0?null:X[0]}function R(X){if(X.length===0)return null;var D=X[0],O=X.pop();if(O!==D){X[0]=O;e:for(var P=0,B=X.length,te=B>>>1;P<te;){var Y=2*(P+1)-1,ue=X[Y],de=Y+1,K=X[de];if(0>A(ue,O))de<B&&0>A(K,ue)?(X[P]=K,X[de]=O,P=de):(X[P]=ue,X[Y]=O,P=Y);else if(de<B&&0>A(K,O))X[P]=K,X[de]=O,P=de;else break e}}return D}function A(X,D){var O=X.sortIndex-D.sortIndex;return O!==0?O:X.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var j=performance;i.unstable_now=function(){return j.now()}}else{var I=Date,l=I.now();i.unstable_now=function(){return I.now()-l}}var d=[],v=[],S=1,h=null,g=3,x=!1,E=!1,m=!1,o=typeof setTimeout=="function"?setTimeout:null,a=typeof clearTimeout=="function"?clearTimeout:null,n=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function u(X){for(var D=p(v);D!==null;){if(D.callback===null)R(v);else if(D.startTime<=X)R(v),D.sortIndex=D.expirationTime,c(d,D);else break;D=p(v)}}function _(X){if(m=!1,u(X),!E)if(p(d)!==null)E=!0,ne(k);else{var D=p(v);D!==null&&le(_,D.startTime-X)}}function k(X,D){E=!1,m&&(m=!1,a(C),C=-1),x=!0;var O=g;try{for(u(D),h=p(d);h!==null&&(!(h.expirationTime>D)||X&&!U());){var P=h.callback;if(typeof P=="function"){h.callback=null,g=h.priorityLevel;var B=P(h.expirationTime<=D);D=i.unstable_now(),typeof B=="function"?h.callback=B:h===p(d)&&R(d),u(D)}else R(d);h=p(d)}if(h!==null)var te=!0;else{var Y=p(v);Y!==null&&le(_,Y.startTime-D),te=!1}return te}finally{h=null,g=O,x=!1}}var b=!1,L=null,C=-1,T=5,H=-1;function U(){return!(i.unstable_now()-H<T)}function W(){if(L!==null){var X=i.unstable_now();H=X;var D=!0;try{D=L(!0,X)}finally{D?F():(b=!1,L=null)}}else b=!1}var F;if(typeof n=="function")F=function(){n(W)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,re=G.port2;G.port1.onmessage=W,F=function(){re.postMessage(null)}}else F=function(){o(W,0)};function ne(X){L=X,b||(b=!0,F())}function le(X,D){C=o(function(){X(i.unstable_now())},D)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_continueExecution=function(){E||x||(E=!0,ne(k))},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return g},i.unstable_getFirstCallbackNode=function(){return p(d)},i.unstable_next=function(X){switch(g){case 1:case 2:case 3:var D=3;break;default:D=g}var O=g;g=D;try{return X()}finally{g=O}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(X,D){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var O=g;g=X;try{return D()}finally{g=O}},i.unstable_scheduleCallback=function(X,D,O){var P=i.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?P+O:P):O=P,X){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=O+B,X={id:S++,callback:D,priorityLevel:X,startTime:O,expirationTime:B,sortIndex:-1},O>P?(X.sortIndex=O,c(v,X),p(d)===null&&X===p(v)&&(m?(a(C),C=-1):m=!0,le(_,O-P))):(X.sortIndex=B,c(d,X),E||x||(E=!0,ne(k))),X},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(X){var D=g;return function(){var O=g;g=D;try{return X.apply(this,arguments)}finally{g=O}}}})(Fl)),Fl}var cd;function wm(){return cd||(cd=1,Bl.exports=xm()),Bl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ud;function Cm(){if(ud)return Rt;ud=1;var i=lc(),c=wm();function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var R=new Set,A={};function j(e,t){I(e,t),I(e+"Capture",t)}function I(e,t){for(A[e]=t,e=0;e<t.length;e++)R.add(t[e])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},h={};function g(e){return d.call(h,e)?!0:d.call(S,e)?!1:v.test(e)?h[e]=!0:(S[e]=!0,!1)}function x(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function E(e,t,r,s){if(t===null||typeof t>"u"||x(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function m(e,t,r,s,f,y,M){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=f,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=y,this.removeEmptyString=M}var o={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){o[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];o[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){o[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){o[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){o[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){o[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){o[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){o[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){o[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var a=/[\-:]([a-z])/g;function n(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(a,n);o[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(a,n);o[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(a,n);o[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){o[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),o.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){o[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});function u(e,t,r,s){var f=o.hasOwnProperty(t)?o[t]:null;(f!==null?f.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(E(t,r,f,s)&&(r=null),s||f===null?g(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):f.mustUseProperty?e[f.propertyName]=r===null?f.type===3?!1:"":r:(t=f.attributeName,s=f.attributeNamespace,r===null?e.removeAttribute(t):(f=f.type,r=f===3||f===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var _=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),b=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),U=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),X=Symbol.iterator;function D(e){return e===null||typeof e!="object"?null:(e=X&&e[X]||e["@@iterator"],typeof e=="function"?e:null)}var O=Object.assign,P;function B(e){if(P===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return`
`+P+e}var te=!1;function Y(e,t){if(!e||te)return"";te=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(Z){var s=Z}Reflect.construct(e,[],t)}else{try{t.call()}catch(Z){s=Z}e.call(t.prototype)}else{try{throw Error()}catch(Z){s=Z}e()}}catch(Z){if(Z&&s&&typeof Z.stack=="string"){for(var f=Z.stack.split(`
`),y=s.stack.split(`
`),M=f.length-1,z=y.length-1;1<=M&&0<=z&&f[M]!==y[z];)z--;for(;1<=M&&0<=z;M--,z--)if(f[M]!==y[z]){if(M!==1||z!==1)do if(M--,z--,0>z||f[M]!==y[z]){var q=`
`+f[M].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),q}while(1<=M&&0<=z);break}}}finally{te=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?B(e):""}function ue(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=Y(e.type,!1),e;case 11:return e=Y(e.type.render,!1),e;case 1:return e=Y(e.type,!0),e;default:return""}}function de(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case L:return"Fragment";case b:return"Portal";case T:return"Profiler";case C:return"StrictMode";case F:return"Suspense";case G:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case U:return(e.displayName||"Context")+".Consumer";case H:return(e._context.displayName||"Context")+".Provider";case W:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return t=e.displayName||null,t!==null?t:de(e.type)||"Memo";case ne:t=e._payload,e=e._init;try{return de(e(t))}catch{}}return null}function K(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function N(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function se(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ee(e){var t=se(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var f=r.get,y=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return f.call(this)},set:function(M){s=""+M,y.call(this,M)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(M){s=""+M},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pe(e){e._valueTracker||(e._valueTracker=ee(e))}function fe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=se(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Le(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ie(e,t){var r=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function He(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=N(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ot(e,t){t=t.checked,t!=null&&u(e,"checked",t,!1)}function be(e,t){ot(e,t);var r=N(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hs(e,t.type,r):t.hasOwnProperty("defaultValue")&&hs(e,t.type,N(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Lr(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function hs(e,t,r){(t!=="number"||Le(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var dr=Array.isArray;function rr(e,t,r,s){if(e=e.options,t){t={};for(var f=0;f<r.length;f++)t["$"+r[f]]=!0;for(r=0;r<e.length;r++)f=t.hasOwnProperty("$"+e[r].value),e[r].selected!==f&&(e[r].selected=f),f&&s&&(e[r].defaultSelected=!0)}else{for(r=""+N(r),t=null,f=0;f<e.length;f++){if(e[f].value===r){e[f].selected=!0,s&&(e[f].defaultSelected=!0);return}t!==null||e[f].disabled||(t=e[f])}t!==null&&(t.selected=!0)}}function Dr(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(p(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pt(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(p(92));if(dr(r)){if(1<r.length)throw Error(p(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:N(r)}}function Pr(e,t){var r=N(t.value),s=N(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Pt(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Tr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ds(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Tr(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Tt,fs=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,f){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,f)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Tt=Tt||document.createElement("div"),Tt.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Tt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var qt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ze=["Webkit","ms","Moz","O"];Object.keys(qt).forEach(function(e){ze.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qt[t]=qt[e]})});function kn(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||qt.hasOwnProperty(e)&&qt[e]?(""+t).trim():t+"px"}function yc(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,f=kn(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,f):e[r]=f}}var Cf=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ko(e,t){if(t){if(Cf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(p(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(p(61))}if(t.style!=null&&typeof t.style!="object")throw Error(p(62))}}function Vo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qo=null;function Go(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xo=null,Fs=null,Hs=null;function Sc(e){if(e=Ki(e)){if(typeof Xo!="function")throw Error(p(280));var t=e.stateNode;t&&(t=Qn(t),Xo(e.stateNode,e.type,t))}}function xc(e){Fs?Hs?Hs.push(e):Hs=[e]:Fs=e}function wc(){if(Fs){var e=Fs,t=Hs;if(Hs=Fs=null,Sc(e),t)for(e=0;e<t.length;e++)Sc(t[e])}}function Cc(e,t){return e(t)}function bc(){}var Jo=!1;function kc(e,t,r){if(Jo)return e(t,r);Jo=!0;try{return Cc(e,t,r)}finally{Jo=!1,(Fs!==null||Hs!==null)&&(bc(),wc())}}function ki(e,t){var r=e.stateNode;if(r===null)return null;var s=Qn(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(p(231,t,typeof r));return r}var Yo=!1;if(l)try{var Ei={};Object.defineProperty(Ei,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",Ei,Ei),window.removeEventListener("test",Ei,Ei)}catch{Yo=!1}function bf(e,t,r,s,f,y,M,z,q){var Z=Array.prototype.slice.call(arguments,3);try{t.apply(r,Z)}catch(ae){this.onError(ae)}}var Ri=!1,En=null,Rn=!1,Zo=null,kf={onError:function(e){Ri=!0,En=e}};function Ef(e,t,r,s,f,y,M,z,q){Ri=!1,En=null,bf.apply(kf,arguments)}function Rf(e,t,r,s,f,y,M,z,q){if(Ef.apply(this,arguments),Ri){if(Ri){var Z=En;Ri=!1,En=null}else throw Error(p(198));Rn||(Rn=!0,Zo=Z)}}function ps(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ec(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rc(e){if(ps(e)!==e)throw Error(p(188))}function Lf(e){var t=e.alternate;if(!t){if(t=ps(e),t===null)throw Error(p(188));return t!==e?null:e}for(var r=e,s=t;;){var f=r.return;if(f===null)break;var y=f.alternate;if(y===null){if(s=f.return,s!==null){r=s;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===r)return Rc(f),e;if(y===s)return Rc(f),t;y=y.sibling}throw Error(p(188))}if(r.return!==s.return)r=f,s=y;else{for(var M=!1,z=f.child;z;){if(z===r){M=!0,r=f,s=y;break}if(z===s){M=!0,s=f,r=y;break}z=z.sibling}if(!M){for(z=y.child;z;){if(z===r){M=!0,r=y,s=f;break}if(z===s){M=!0,s=y,r=f;break}z=z.sibling}if(!M)throw Error(p(189))}}if(r.alternate!==s)throw Error(p(190))}if(r.tag!==3)throw Error(p(188));return r.stateNode.current===r?e:t}function Lc(e){return e=Lf(e),e!==null?Dc(e):null}function Dc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Dc(e);if(t!==null)return t;e=e.sibling}return null}var Pc=c.unstable_scheduleCallback,Tc=c.unstable_cancelCallback,Df=c.unstable_shouldYield,Pf=c.unstable_requestPaint,Xe=c.unstable_now,Tf=c.unstable_getCurrentPriorityLevel,ea=c.unstable_ImmediatePriority,Mc=c.unstable_UserBlockingPriority,Ln=c.unstable_NormalPriority,Mf=c.unstable_LowPriority,Ac=c.unstable_IdlePriority,Dn=null,sr=null;function Af(e){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(Dn,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:jf,Nf=Math.log,Of=Math.LN2;function jf(e){return e>>>=0,e===0?32:31-(Nf(e)/Of|0)|0}var Pn=64,Tn=4194304;function Li(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mn(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,f=e.suspendedLanes,y=e.pingedLanes,M=r&268435455;if(M!==0){var z=M&~f;z!==0?s=Li(z):(y&=M,y!==0&&(s=Li(y)))}else M=r&~f,M!==0?s=Li(M):y!==0&&(s=Li(y));if(s===0)return 0;if(t!==0&&t!==s&&(t&f)===0&&(f=s&-s,y=t&-t,f>=y||f===16&&(y&4194240)!==0))return t;if((s&4)!==0&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Kt(t),f=1<<r,s|=e[r],t&=~f;return s}function If(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bf(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,f=e.expirationTimes,y=e.pendingLanes;0<y;){var M=31-Kt(y),z=1<<M,q=f[M];q===-1?((z&r)===0||(z&s)!==0)&&(f[M]=If(z,t)):q<=t&&(e.expiredLanes|=z),y&=~z}}function ta(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Nc(){var e=Pn;return Pn<<=1,(Pn&4194240)===0&&(Pn=64),e}function ra(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Di(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=r}function Ff(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var f=31-Kt(r),y=1<<f;t[f]=0,s[f]=-1,e[f]=-1,r&=~y}}function sa(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Kt(r),f=1<<s;f&t|e[s]&t&&(e[s]|=t),r&=~f}}var je=0;function Oc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var jc,ia,Ic,Bc,Fc,na=!1,An=[],Mr=null,Ar=null,Nr=null,Pi=new Map,Ti=new Map,Or=[],Hf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hc(e,t){switch(e){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":Pi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ti.delete(t.pointerId)}}function Mi(e,t,r,s,f,y){return e===null||e.nativeEvent!==y?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:y,targetContainers:[f]},t!==null&&(t=Ki(t),t!==null&&ia(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,f!==null&&t.indexOf(f)===-1&&t.push(f),e)}function zf(e,t,r,s,f){switch(t){case"focusin":return Mr=Mi(Mr,e,t,r,s,f),!0;case"dragenter":return Ar=Mi(Ar,e,t,r,s,f),!0;case"mouseover":return Nr=Mi(Nr,e,t,r,s,f),!0;case"pointerover":var y=f.pointerId;return Pi.set(y,Mi(Pi.get(y)||null,e,t,r,s,f)),!0;case"gotpointercapture":return y=f.pointerId,Ti.set(y,Mi(Ti.get(y)||null,e,t,r,s,f)),!0}return!1}function zc(e){var t=ms(e.target);if(t!==null){var r=ps(t);if(r!==null){if(t=r.tag,t===13){if(t=Ec(r),t!==null){e.blockedOn=t,Fc(e.priority,function(){Ic(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Nn(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=aa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Qo=s,r.target.dispatchEvent(s),Qo=null}else return t=Ki(r),t!==null&&ia(t),e.blockedOn=r,!1;t.shift()}return!0}function Uc(e,t,r){Nn(e)&&r.delete(t)}function Uf(){na=!1,Mr!==null&&Nn(Mr)&&(Mr=null),Ar!==null&&Nn(Ar)&&(Ar=null),Nr!==null&&Nn(Nr)&&(Nr=null),Pi.forEach(Uc),Ti.forEach(Uc)}function Ai(e,t){e.blockedOn===t&&(e.blockedOn=null,na||(na=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Uf)))}function Ni(e){function t(f){return Ai(f,e)}if(0<An.length){Ai(An[0],e);for(var r=1;r<An.length;r++){var s=An[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Mr!==null&&Ai(Mr,e),Ar!==null&&Ai(Ar,e),Nr!==null&&Ai(Nr,e),Pi.forEach(t),Ti.forEach(t),r=0;r<Or.length;r++)s=Or[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Or.length&&(r=Or[0],r.blockedOn===null);)zc(r),r.blockedOn===null&&Or.shift()}var zs=_.ReactCurrentBatchConfig,On=!0;function Wf(e,t,r,s){var f=je,y=zs.transition;zs.transition=null;try{je=1,oa(e,t,r,s)}finally{je=f,zs.transition=y}}function $f(e,t,r,s){var f=je,y=zs.transition;zs.transition=null;try{je=4,oa(e,t,r,s)}finally{je=f,zs.transition=y}}function oa(e,t,r,s){if(On){var f=aa(e,t,r,s);if(f===null)ba(e,t,s,jn,r),Hc(e,s);else if(zf(f,e,t,r,s))s.stopPropagation();else if(Hc(e,s),t&4&&-1<Hf.indexOf(e)){for(;f!==null;){var y=Ki(f);if(y!==null&&jc(y),y=aa(e,t,r,s),y===null&&ba(e,t,s,jn,r),y===f)break;f=y}f!==null&&s.stopPropagation()}else ba(e,t,s,null,r)}}var jn=null;function aa(e,t,r,s){if(jn=null,e=Go(s),e=ms(e),e!==null)if(t=ps(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ec(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jn=e,null}function Wc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tf()){case ea:return 1;case Mc:return 4;case Ln:case Mf:return 16;case Ac:return 536870912;default:return 16}default:return 16}}var jr=null,la=null,In=null;function $c(){if(In)return In;var e,t=la,r=t.length,s,f="value"in jr?jr.value:jr.textContent,y=f.length;for(e=0;e<r&&t[e]===f[e];e++);var M=r-e;for(s=1;s<=M&&t[r-s]===f[y-s];s++);return In=f.slice(e,1<s?1-s:void 0)}function Bn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fn(){return!0}function qc(){return!1}function Mt(e){function t(r,s,f,y,M){this._reactName=r,this._targetInst=f,this.type=s,this.nativeEvent=y,this.target=M,this.currentTarget=null;for(var z in e)e.hasOwnProperty(z)&&(r=e[z],this[z]=r?r(y):y[z]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Fn:qc,this.isPropagationStopped=qc,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fn)},persist:function(){},isPersistent:Fn}),t}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=Mt(Us),Oi=O({},Us,{view:0,detail:0}),qf=Mt(Oi),ua,ha,ji,Hn=O({},Oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ji&&(ji&&e.type==="mousemove"?(ua=e.screenX-ji.screenX,ha=e.screenY-ji.screenY):ha=ua=0,ji=e),ua)},movementY:function(e){return"movementY"in e?e.movementY:ha}}),Kc=Mt(Hn),Kf=O({},Hn,{dataTransfer:0}),Vf=Mt(Kf),Qf=O({},Oi,{relatedTarget:0}),da=Mt(Qf),Gf=O({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),Xf=Mt(Gf),Jf=O({},Us,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yf=Mt(Jf),Zf=O({},Us,{data:0}),Vc=Mt(Zf),ep={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rp[e])?!!t[e]:!1}function fa(){return sp}var ip=O({},Oi,{key:function(e){if(e.key){var t=ep[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fa,charCode:function(e){return e.type==="keypress"?Bn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),np=Mt(ip),op=O({},Hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qc=Mt(op),ap=O({},Oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fa}),lp=Mt(ap),cp=O({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),up=Mt(cp),hp=O({},Hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),dp=Mt(hp),fp=[9,13,27,32],pa=l&&"CompositionEvent"in window,Ii=null;l&&"documentMode"in document&&(Ii=document.documentMode);var pp=l&&"TextEvent"in window&&!Ii,Gc=l&&(!pa||Ii&&8<Ii&&11>=Ii),Xc=" ",Jc=!1;function Yc(e,t){switch(e){case"keyup":return fp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ws=!1;function mp(e,t){switch(e){case"compositionend":return Zc(t);case"keypress":return t.which!==32?null:(Jc=!0,Xc);case"textInput":return e=t.data,e===Xc&&Jc?null:e;default:return null}}function _p(e,t){if(Ws)return e==="compositionend"||!pa&&Yc(e,t)?(e=$c(),In=la=jr=null,Ws=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gc&&t.locale!=="ko"?null:t.data;default:return null}}var vp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!vp[e.type]:t==="textarea"}function tu(e,t,r,s){xc(s),t=qn(t,"onChange"),0<t.length&&(r=new ca("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Bi=null,Fi=null;function gp(e){yu(e,0)}function zn(e){var t=Qs(e);if(fe(t))return e}function yp(e,t){if(e==="change")return t}var ru=!1;if(l){var ma;if(l){var _a="oninput"in document;if(!_a){var su=document.createElement("div");su.setAttribute("oninput","return;"),_a=typeof su.oninput=="function"}ma=_a}else ma=!1;ru=ma&&(!document.documentMode||9<document.documentMode)}function iu(){Bi&&(Bi.detachEvent("onpropertychange",nu),Fi=Bi=null)}function nu(e){if(e.propertyName==="value"&&zn(Fi)){var t=[];tu(t,Fi,e,Go(e)),kc(gp,t)}}function Sp(e,t,r){e==="focusin"?(iu(),Bi=t,Fi=r,Bi.attachEvent("onpropertychange",nu)):e==="focusout"&&iu()}function xp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zn(Fi)}function wp(e,t){if(e==="click")return zn(t)}function Cp(e,t){if(e==="input"||e==="change")return zn(t)}function bp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:bp;function Hi(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var f=r[s];if(!d.call(t,f)||!Vt(e[f],t[f]))return!1}return!0}function ou(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function au(e,t){var r=ou(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ou(r)}}function lu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cu(){for(var e=window,t=Le();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Le(e.document)}return t}function va(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kp(e){var t=cu(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&lu(r.ownerDocument.documentElement,r)){if(s!==null&&va(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var f=r.textContent.length,y=Math.min(s.start,f);s=s.end===void 0?y:Math.min(s.end,f),!e.extend&&y>s&&(f=s,s=y,y=f),f=au(r,y);var M=au(r,s);f&&M&&(e.rangeCount!==1||e.anchorNode!==f.node||e.anchorOffset!==f.offset||e.focusNode!==M.node||e.focusOffset!==M.offset)&&(t=t.createRange(),t.setStart(f.node,f.offset),e.removeAllRanges(),y>s?(e.addRange(t),e.extend(M.node,M.offset)):(t.setEnd(M.node,M.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ep=l&&"documentMode"in document&&11>=document.documentMode,$s=null,ga=null,zi=null,ya=!1;function uu(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ya||$s==null||$s!==Le(s)||(s=$s,"selectionStart"in s&&va(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),zi&&Hi(zi,s)||(zi=s,s=qn(ga,"onSelect"),0<s.length&&(t=new ca("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=$s)))}function Un(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var qs={animationend:Un("Animation","AnimationEnd"),animationiteration:Un("Animation","AnimationIteration"),animationstart:Un("Animation","AnimationStart"),transitionend:Un("Transition","TransitionEnd")},Sa={},hu={};l&&(hu=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function Wn(e){if(Sa[e])return Sa[e];if(!qs[e])return e;var t=qs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in hu)return Sa[e]=t[r];return e}var du=Wn("animationend"),fu=Wn("animationiteration"),pu=Wn("animationstart"),mu=Wn("transitionend"),_u=new Map,vu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){_u.set(e,t),j(t,[e])}for(var xa=0;xa<vu.length;xa++){var wa=vu[xa],Rp=wa.toLowerCase(),Lp=wa[0].toUpperCase()+wa.slice(1);Ir(Rp,"on"+Lp)}Ir(du,"onAnimationEnd"),Ir(fu,"onAnimationIteration"),Ir(pu,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(mu,"onTransitionEnd"),I("onMouseEnter",["mouseout","mouseover"]),I("onMouseLeave",["mouseout","mouseover"]),I("onPointerEnter",["pointerout","pointerover"]),I("onPointerLeave",["pointerout","pointerover"]),j("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),j("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),j("onBeforeInput",["compositionend","keypress","textInput","paste"]),j("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),j("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),j("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ui));function gu(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Rf(s,t,void 0,e),e.currentTarget=null}function yu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],f=s.event;s=s.listeners;e:{var y=void 0;if(t)for(var M=s.length-1;0<=M;M--){var z=s[M],q=z.instance,Z=z.currentTarget;if(z=z.listener,q!==y&&f.isPropagationStopped())break e;gu(f,z,Z),y=q}else for(M=0;M<s.length;M++){if(z=s[M],q=z.instance,Z=z.currentTarget,z=z.listener,q!==y&&f.isPropagationStopped())break e;gu(f,z,Z),y=q}}}if(Rn)throw e=Zo,Rn=!1,Zo=null,e}function Ue(e,t){var r=t[Pa];r===void 0&&(r=t[Pa]=new Set);var s=e+"__bubble";r.has(s)||(Su(t,e,2,!1),r.add(s))}function Ca(e,t,r){var s=0;t&&(s|=4),Su(r,e,s,t)}var $n="_reactListening"+Math.random().toString(36).slice(2);function Wi(e){if(!e[$n]){e[$n]=!0,R.forEach(function(r){r!=="selectionchange"&&(Dp.has(r)||Ca(r,!1,e),Ca(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$n]||(t[$n]=!0,Ca("selectionchange",!1,t))}}function Su(e,t,r,s){switch(Wc(t)){case 1:var f=Wf;break;case 4:f=$f;break;default:f=oa}r=f.bind(null,t,r,e),f=void 0,!Yo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(f=!0),s?f!==void 0?e.addEventListener(t,r,{capture:!0,passive:f}):e.addEventListener(t,r,!0):f!==void 0?e.addEventListener(t,r,{passive:f}):e.addEventListener(t,r,!1)}function ba(e,t,r,s,f){var y=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var M=s.tag;if(M===3||M===4){var z=s.stateNode.containerInfo;if(z===f||z.nodeType===8&&z.parentNode===f)break;if(M===4)for(M=s.return;M!==null;){var q=M.tag;if((q===3||q===4)&&(q=M.stateNode.containerInfo,q===f||q.nodeType===8&&q.parentNode===f))return;M=M.return}for(;z!==null;){if(M=ms(z),M===null)return;if(q=M.tag,q===5||q===6){s=y=M;continue e}z=z.parentNode}}s=s.return}kc(function(){var Z=y,ae=Go(r),ce=[];e:{var oe=_u.get(e);if(oe!==void 0){var _e=ca,ge=e;switch(e){case"keypress":if(Bn(r)===0)break e;case"keydown":case"keyup":_e=np;break;case"focusin":ge="focus",_e=da;break;case"focusout":ge="blur",_e=da;break;case"beforeblur":case"afterblur":_e=da;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Vf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=lp;break;case du:case fu:case pu:_e=Xf;break;case mu:_e=up;break;case"scroll":_e=qf;break;case"wheel":_e=dp;break;case"copy":case"cut":case"paste":_e=Yf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Qc}var ye=(t&4)!==0,Je=!ye&&e==="scroll",Q=ye?oe!==null?oe+"Capture":null:oe;ye=[];for(var V=Z,J;V!==null;){J=V;var he=J.stateNode;if(J.tag===5&&he!==null&&(J=he,Q!==null&&(he=ki(V,Q),he!=null&&ye.push($i(V,he,J)))),Je)break;V=V.return}0<ye.length&&(oe=new _e(oe,ge,null,r,ae),ce.push({event:oe,listeners:ye}))}}if((t&7)===0){e:{if(oe=e==="mouseover"||e==="pointerover",_e=e==="mouseout"||e==="pointerout",oe&&r!==Qo&&(ge=r.relatedTarget||r.fromElement)&&(ms(ge)||ge[fr]))break e;if((_e||oe)&&(oe=ae.window===ae?ae:(oe=ae.ownerDocument)?oe.defaultView||oe.parentWindow:window,_e?(ge=r.relatedTarget||r.toElement,_e=Z,ge=ge?ms(ge):null,ge!==null&&(Je=ps(ge),ge!==Je||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(_e=null,ge=Z),_e!==ge)){if(ye=Kc,he="onMouseLeave",Q="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(ye=Qc,he="onPointerLeave",Q="onPointerEnter",V="pointer"),Je=_e==null?oe:Qs(_e),J=ge==null?oe:Qs(ge),oe=new ye(he,V+"leave",_e,r,ae),oe.target=Je,oe.relatedTarget=J,he=null,ms(ae)===Z&&(ye=new ye(Q,V+"enter",ge,r,ae),ye.target=J,ye.relatedTarget=Je,he=ye),Je=he,_e&&ge)t:{for(ye=_e,Q=ge,V=0,J=ye;J;J=Ks(J))V++;for(J=0,he=Q;he;he=Ks(he))J++;for(;0<V-J;)ye=Ks(ye),V--;for(;0<J-V;)Q=Ks(Q),J--;for(;V--;){if(ye===Q||Q!==null&&ye===Q.alternate)break t;ye=Ks(ye),Q=Ks(Q)}ye=null}else ye=null;_e!==null&&xu(ce,oe,_e,ye,!1),ge!==null&&Je!==null&&xu(ce,Je,ge,ye,!0)}}e:{if(oe=Z?Qs(Z):window,_e=oe.nodeName&&oe.nodeName.toLowerCase(),_e==="select"||_e==="input"&&oe.type==="file")var Se=yp;else if(eu(oe))if(ru)Se=Cp;else{Se=xp;var we=Sp}else(_e=oe.nodeName)&&_e.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Se=wp);if(Se&&(Se=Se(e,Z))){tu(ce,Se,r,ae);break e}we&&we(e,oe,Z),e==="focusout"&&(we=oe._wrapperState)&&we.controlled&&oe.type==="number"&&hs(oe,"number",oe.value)}switch(we=Z?Qs(Z):window,e){case"focusin":(eu(we)||we.contentEditable==="true")&&($s=we,ga=Z,zi=null);break;case"focusout":zi=ga=$s=null;break;case"mousedown":ya=!0;break;case"contextmenu":case"mouseup":case"dragend":ya=!1,uu(ce,r,ae);break;case"selectionchange":if(Ep)break;case"keydown":case"keyup":uu(ce,r,ae)}var Ce;if(pa)e:{switch(e){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Ws?Yc(e,r)&&(ke="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ke="onCompositionStart");ke&&(Gc&&r.locale!=="ko"&&(Ws||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Ws&&(Ce=$c()):(jr=ae,la="value"in jr?jr.value:jr.textContent,Ws=!0)),we=qn(Z,ke),0<we.length&&(ke=new Vc(ke,e,null,r,ae),ce.push({event:ke,listeners:we}),Ce?ke.data=Ce:(Ce=Zc(r),Ce!==null&&(ke.data=Ce)))),(Ce=pp?mp(e,r):_p(e,r))&&(Z=qn(Z,"onBeforeInput"),0<Z.length&&(ae=new Vc("onBeforeInput","beforeinput",null,r,ae),ce.push({event:ae,listeners:Z}),ae.data=Ce))}yu(ce,t)})}function $i(e,t,r){return{instance:e,listener:t,currentTarget:r}}function qn(e,t){for(var r=t+"Capture",s=[];e!==null;){var f=e,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=ki(e,r),y!=null&&s.unshift($i(e,y,f)),y=ki(e,t),y!=null&&s.push($i(e,y,f))),e=e.return}return s}function Ks(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xu(e,t,r,s,f){for(var y=t._reactName,M=[];r!==null&&r!==s;){var z=r,q=z.alternate,Z=z.stateNode;if(q!==null&&q===s)break;z.tag===5&&Z!==null&&(z=Z,f?(q=ki(r,y),q!=null&&M.unshift($i(r,q,z))):f||(q=ki(r,y),q!=null&&M.push($i(r,q,z)))),r=r.return}M.length!==0&&e.push({event:t,listeners:M})}var Pp=/\r\n?/g,Tp=/\u0000|\uFFFD/g;function wu(e){return(typeof e=="string"?e:""+e).replace(Pp,`
`).replace(Tp,"")}function Kn(e,t,r){if(t=wu(t),wu(e)!==t&&r)throw Error(p(425))}function Vn(){}var ka=null,Ea=null;function Ra(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var La=typeof setTimeout=="function"?setTimeout:void 0,Mp=typeof clearTimeout=="function"?clearTimeout:void 0,Cu=typeof Promise=="function"?Promise:void 0,Ap=typeof queueMicrotask=="function"?queueMicrotask:typeof Cu<"u"?function(e){return Cu.resolve(null).then(e).catch(Np)}:La;function Np(e){setTimeout(function(){throw e})}function Da(e,t){var r=t,s=0;do{var f=r.nextSibling;if(e.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"){if(s===0){e.removeChild(f),Ni(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=f}while(r);Ni(t)}function Br(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Vs=Math.random().toString(36).slice(2),ir="__reactFiber$"+Vs,qi="__reactProps$"+Vs,fr="__reactContainer$"+Vs,Pa="__reactEvents$"+Vs,Op="__reactListeners$"+Vs,jp="__reactHandles$"+Vs;function ms(e){var t=e[ir];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fr]||r[ir]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=bu(e);e!==null;){if(r=e[ir])return r;e=bu(e)}return t}e=r,r=e.parentNode}return null}function Ki(e){return e=e[ir]||e[fr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Qn(e){return e[qi]||null}var Ta=[],Gs=-1;function Fr(e){return{current:e}}function We(e){0>Gs||(e.current=Ta[Gs],Ta[Gs]=null,Gs--)}function Be(e,t){Gs++,Ta[Gs]=e.current,e.current=t}var Hr={},ct=Fr(Hr),wt=Fr(!1),_s=Hr;function Xs(e,t){var r=e.type.contextTypes;if(!r)return Hr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in r)f[y]=t[y];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=f),f}function Ct(e){return e=e.childContextTypes,e!=null}function Gn(){We(wt),We(ct)}function ku(e,t,r){if(ct.current!==Hr)throw Error(p(168));Be(ct,t),Be(wt,r)}function Eu(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var f in s)if(!(f in t))throw Error(p(108,K(e)||"Unknown",f));return O({},r,s)}function Xn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hr,_s=ct.current,Be(ct,e),Be(wt,wt.current),!0}function Ru(e,t,r){var s=e.stateNode;if(!s)throw Error(p(169));r?(e=Eu(e,t,_s),s.__reactInternalMemoizedMergedChildContext=e,We(wt),We(ct),Be(ct,e)):We(wt),Be(wt,r)}var pr=null,Jn=!1,Ma=!1;function Lu(e){pr===null?pr=[e]:pr.push(e)}function Ip(e){Jn=!0,Lu(e)}function zr(){if(!Ma&&pr!==null){Ma=!0;var e=0,t=je;try{var r=pr;for(je=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}pr=null,Jn=!1}catch(f){throw pr!==null&&(pr=pr.slice(e+1)),Pc(ea,zr),f}finally{je=t,Ma=!1}}return null}var Js=[],Ys=0,Yn=null,Zn=0,It=[],Bt=0,vs=null,mr=1,_r="";function gs(e,t){Js[Ys++]=Zn,Js[Ys++]=Yn,Yn=e,Zn=t}function Du(e,t,r){It[Bt++]=mr,It[Bt++]=_r,It[Bt++]=vs,vs=e;var s=mr;e=_r;var f=32-Kt(s)-1;s&=~(1<<f),r+=1;var y=32-Kt(t)+f;if(30<y){var M=f-f%5;y=(s&(1<<M)-1).toString(32),s>>=M,f-=M,mr=1<<32-Kt(t)+f|r<<f|s,_r=y+e}else mr=1<<y|r<<f|s,_r=e}function Aa(e){e.return!==null&&(gs(e,1),Du(e,1,0))}function Na(e){for(;e===Yn;)Yn=Js[--Ys],Js[Ys]=null,Zn=Js[--Ys],Js[Ys]=null;for(;e===vs;)vs=It[--Bt],It[Bt]=null,_r=It[--Bt],It[Bt]=null,mr=It[--Bt],It[Bt]=null}var At=null,Nt=null,qe=!1,Qt=null;function Pu(e,t){var r=Ut(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Tu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,At=e,Nt=Br(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,At=e,Nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=vs!==null?{id:mr,overflow:_r}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ut(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,At=e,Nt=null,!0):!1;default:return!1}}function Oa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ja(e){if(qe){var t=Nt;if(t){var r=t;if(!Tu(e,t)){if(Oa(e))throw Error(p(418));t=Br(r.nextSibling);var s=At;t&&Tu(e,t)?Pu(s,r):(e.flags=e.flags&-4097|2,qe=!1,At=e)}}else{if(Oa(e))throw Error(p(418));e.flags=e.flags&-4097|2,qe=!1,At=e}}}function Mu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;At=e}function eo(e){if(e!==At)return!1;if(!qe)return Mu(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ra(e.type,e.memoizedProps)),t&&(t=Nt)){if(Oa(e))throw Au(),Error(p(418));for(;t;)Pu(e,t),t=Br(t.nextSibling)}if(Mu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Nt=Br(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Nt=null}}else Nt=At?Br(e.stateNode.nextSibling):null;return!0}function Au(){for(var e=Nt;e;)e=Br(e.nextSibling)}function Zs(){Nt=At=null,qe=!1}function Ia(e){Qt===null?Qt=[e]:Qt.push(e)}var Bp=_.ReactCurrentBatchConfig;function Vi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(p(309));var s=r.stateNode}if(!s)throw Error(p(147,e));var f=s,y=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===y?t.ref:(t=function(M){var z=f.refs;M===null?delete z[y]:z[y]=M},t._stringRef=y,t)}if(typeof e!="string")throw Error(p(284));if(!r._owner)throw Error(p(290,e))}return e}function to(e,t){throw e=Object.prototype.toString.call(t),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nu(e){var t=e._init;return t(e._payload)}function Ou(e){function t(Q,V){if(e){var J=Q.deletions;J===null?(Q.deletions=[V],Q.flags|=16):J.push(V)}}function r(Q,V){if(!e)return null;for(;V!==null;)t(Q,V),V=V.sibling;return null}function s(Q,V){for(Q=new Map;V!==null;)V.key!==null?Q.set(V.key,V):Q.set(V.index,V),V=V.sibling;return Q}function f(Q,V){return Q=Gr(Q,V),Q.index=0,Q.sibling=null,Q}function y(Q,V,J){return Q.index=J,e?(J=Q.alternate,J!==null?(J=J.index,J<V?(Q.flags|=2,V):J):(Q.flags|=2,V)):(Q.flags|=1048576,V)}function M(Q){return e&&Q.alternate===null&&(Q.flags|=2),Q}function z(Q,V,J,he){return V===null||V.tag!==6?(V=Ll(J,Q.mode,he),V.return=Q,V):(V=f(V,J),V.return=Q,V)}function q(Q,V,J,he){var Se=J.type;return Se===L?ae(Q,V,J.props.children,he,J.key):V!==null&&(V.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===ne&&Nu(Se)===V.type)?(he=f(V,J.props),he.ref=Vi(Q,V,J),he.return=Q,he):(he=Eo(J.type,J.key,J.props,null,Q.mode,he),he.ref=Vi(Q,V,J),he.return=Q,he)}function Z(Q,V,J,he){return V===null||V.tag!==4||V.stateNode.containerInfo!==J.containerInfo||V.stateNode.implementation!==J.implementation?(V=Dl(J,Q.mode,he),V.return=Q,V):(V=f(V,J.children||[]),V.return=Q,V)}function ae(Q,V,J,he,Se){return V===null||V.tag!==7?(V=Es(J,Q.mode,he,Se),V.return=Q,V):(V=f(V,J),V.return=Q,V)}function ce(Q,V,J){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Ll(""+V,Q.mode,J),V.return=Q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case k:return J=Eo(V.type,V.key,V.props,null,Q.mode,J),J.ref=Vi(Q,null,V),J.return=Q,J;case b:return V=Dl(V,Q.mode,J),V.return=Q,V;case ne:var he=V._init;return ce(Q,he(V._payload),J)}if(dr(V)||D(V))return V=Es(V,Q.mode,J,null),V.return=Q,V;to(Q,V)}return null}function oe(Q,V,J,he){var Se=V!==null?V.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return Se!==null?null:z(Q,V,""+J,he);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case k:return J.key===Se?q(Q,V,J,he):null;case b:return J.key===Se?Z(Q,V,J,he):null;case ne:return Se=J._init,oe(Q,V,Se(J._payload),he)}if(dr(J)||D(J))return Se!==null?null:ae(Q,V,J,he,null);to(Q,J)}return null}function _e(Q,V,J,he,Se){if(typeof he=="string"&&he!==""||typeof he=="number")return Q=Q.get(J)||null,z(V,Q,""+he,Se);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case k:return Q=Q.get(he.key===null?J:he.key)||null,q(V,Q,he,Se);case b:return Q=Q.get(he.key===null?J:he.key)||null,Z(V,Q,he,Se);case ne:var we=he._init;return _e(Q,V,J,we(he._payload),Se)}if(dr(he)||D(he))return Q=Q.get(J)||null,ae(V,Q,he,Se,null);to(V,he)}return null}function ge(Q,V,J,he){for(var Se=null,we=null,Ce=V,ke=V=0,it=null;Ce!==null&&ke<J.length;ke++){Ce.index>ke?(it=Ce,Ce=null):it=Ce.sibling;var Ae=oe(Q,Ce,J[ke],he);if(Ae===null){Ce===null&&(Ce=it);break}e&&Ce&&Ae.alternate===null&&t(Q,Ce),V=y(Ae,V,ke),we===null?Se=Ae:we.sibling=Ae,we=Ae,Ce=it}if(ke===J.length)return r(Q,Ce),qe&&gs(Q,ke),Se;if(Ce===null){for(;ke<J.length;ke++)Ce=ce(Q,J[ke],he),Ce!==null&&(V=y(Ce,V,ke),we===null?Se=Ce:we.sibling=Ce,we=Ce);return qe&&gs(Q,ke),Se}for(Ce=s(Q,Ce);ke<J.length;ke++)it=_e(Ce,Q,ke,J[ke],he),it!==null&&(e&&it.alternate!==null&&Ce.delete(it.key===null?ke:it.key),V=y(it,V,ke),we===null?Se=it:we.sibling=it,we=it);return e&&Ce.forEach(function(Xr){return t(Q,Xr)}),qe&&gs(Q,ke),Se}function ye(Q,V,J,he){var Se=D(J);if(typeof Se!="function")throw Error(p(150));if(J=Se.call(J),J==null)throw Error(p(151));for(var we=Se=null,Ce=V,ke=V=0,it=null,Ae=J.next();Ce!==null&&!Ae.done;ke++,Ae=J.next()){Ce.index>ke?(it=Ce,Ce=null):it=Ce.sibling;var Xr=oe(Q,Ce,Ae.value,he);if(Xr===null){Ce===null&&(Ce=it);break}e&&Ce&&Xr.alternate===null&&t(Q,Ce),V=y(Xr,V,ke),we===null?Se=Xr:we.sibling=Xr,we=Xr,Ce=it}if(Ae.done)return r(Q,Ce),qe&&gs(Q,ke),Se;if(Ce===null){for(;!Ae.done;ke++,Ae=J.next())Ae=ce(Q,Ae.value,he),Ae!==null&&(V=y(Ae,V,ke),we===null?Se=Ae:we.sibling=Ae,we=Ae);return qe&&gs(Q,ke),Se}for(Ce=s(Q,Ce);!Ae.done;ke++,Ae=J.next())Ae=_e(Ce,Q,ke,Ae.value,he),Ae!==null&&(e&&Ae.alternate!==null&&Ce.delete(Ae.key===null?ke:Ae.key),V=y(Ae,V,ke),we===null?Se=Ae:we.sibling=Ae,we=Ae);return e&&Ce.forEach(function(vm){return t(Q,vm)}),qe&&gs(Q,ke),Se}function Je(Q,V,J,he){if(typeof J=="object"&&J!==null&&J.type===L&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case k:e:{for(var Se=J.key,we=V;we!==null;){if(we.key===Se){if(Se=J.type,Se===L){if(we.tag===7){r(Q,we.sibling),V=f(we,J.props.children),V.return=Q,Q=V;break e}}else if(we.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===ne&&Nu(Se)===we.type){r(Q,we.sibling),V=f(we,J.props),V.ref=Vi(Q,we,J),V.return=Q,Q=V;break e}r(Q,we);break}else t(Q,we);we=we.sibling}J.type===L?(V=Es(J.props.children,Q.mode,he,J.key),V.return=Q,Q=V):(he=Eo(J.type,J.key,J.props,null,Q.mode,he),he.ref=Vi(Q,V,J),he.return=Q,Q=he)}return M(Q);case b:e:{for(we=J.key;V!==null;){if(V.key===we)if(V.tag===4&&V.stateNode.containerInfo===J.containerInfo&&V.stateNode.implementation===J.implementation){r(Q,V.sibling),V=f(V,J.children||[]),V.return=Q,Q=V;break e}else{r(Q,V);break}else t(Q,V);V=V.sibling}V=Dl(J,Q.mode,he),V.return=Q,Q=V}return M(Q);case ne:return we=J._init,Je(Q,V,we(J._payload),he)}if(dr(J))return ge(Q,V,J,he);if(D(J))return ye(Q,V,J,he);to(Q,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,V!==null&&V.tag===6?(r(Q,V.sibling),V=f(V,J),V.return=Q,Q=V):(r(Q,V),V=Ll(J,Q.mode,he),V.return=Q,Q=V),M(Q)):r(Q,V)}return Je}var ei=Ou(!0),ju=Ou(!1),ro=Fr(null),so=null,ti=null,Ba=null;function Fa(){Ba=ti=so=null}function Ha(e){var t=ro.current;We(ro),e._currentValue=t}function za(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function ri(e,t){so=e,Ba=ti=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(bt=!0),e.firstContext=null)}function Ft(e){var t=e._currentValue;if(Ba!==e)if(e={context:e,memoizedValue:t,next:null},ti===null){if(so===null)throw Error(p(308));ti=e,so.dependencies={lanes:0,firstContext:e}}else ti=ti.next=e;return t}var ys=null;function Ua(e){ys===null?ys=[e]:ys.push(e)}function Iu(e,t,r,s){var f=t.interleaved;return f===null?(r.next=r,Ua(t)):(r.next=f.next,f.next=r),t.interleaved=r,vr(e,s)}function vr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ur=!1;function Wa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Te&2)!==0){var f=s.pending;return f===null?t.next=t:(t.next=f.next,f.next=t),s.pending=t,vr(e,r)}return f=s.interleaved,f===null?(t.next=t,Ua(s)):(t.next=f.next,f.next=t),s.interleaved=t,vr(e,r)}function io(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,sa(e,r)}}function Fu(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var f=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var M={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};y===null?f=y=M:y=y.next=M,r=r.next}while(r!==null);y===null?f=y=t:y=y.next=t}else f=y=t;r={baseState:s.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function no(e,t,r,s){var f=e.updateQueue;Ur=!1;var y=f.firstBaseUpdate,M=f.lastBaseUpdate,z=f.shared.pending;if(z!==null){f.shared.pending=null;var q=z,Z=q.next;q.next=null,M===null?y=Z:M.next=Z,M=q;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,z=ae.lastBaseUpdate,z!==M&&(z===null?ae.firstBaseUpdate=Z:z.next=Z,ae.lastBaseUpdate=q))}if(y!==null){var ce=f.baseState;M=0,ae=Z=q=null,z=y;do{var oe=z.lane,_e=z.eventTime;if((s&oe)===oe){ae!==null&&(ae=ae.next={eventTime:_e,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var ge=e,ye=z;switch(oe=t,_e=r,ye.tag){case 1:if(ge=ye.payload,typeof ge=="function"){ce=ge.call(_e,ce,oe);break e}ce=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ye.payload,oe=typeof ge=="function"?ge.call(_e,ce,oe):ge,oe==null)break e;ce=O({},ce,oe);break e;case 2:Ur=!0}}z.callback!==null&&z.lane!==0&&(e.flags|=64,oe=f.effects,oe===null?f.effects=[z]:oe.push(z))}else _e={eventTime:_e,lane:oe,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ae===null?(Z=ae=_e,q=ce):ae=ae.next=_e,M|=oe;if(z=z.next,z===null){if(z=f.shared.pending,z===null)break;oe=z,z=oe.next,oe.next=null,f.lastBaseUpdate=oe,f.shared.pending=null}}while(!0);if(ae===null&&(q=ce),f.baseState=q,f.firstBaseUpdate=Z,f.lastBaseUpdate=ae,t=f.shared.interleaved,t!==null){f=t;do M|=f.lane,f=f.next;while(f!==t)}else y===null&&(f.shared.lanes=0);ws|=M,e.lanes=M,e.memoizedState=ce}}function Hu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],f=s.callback;if(f!==null){if(s.callback=null,s=r,typeof f!="function")throw Error(p(191,f));f.call(s)}}}var Qi={},nr=Fr(Qi),Gi=Fr(Qi),Xi=Fr(Qi);function Ss(e){if(e===Qi)throw Error(p(174));return e}function $a(e,t){switch(Be(Xi,t),Be(Gi,e),Be(nr,Qi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ds(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ds(t,e)}We(nr),Be(nr,t)}function si(){We(nr),We(Gi),We(Xi)}function zu(e){Ss(Xi.current);var t=Ss(nr.current),r=ds(t,e.type);t!==r&&(Be(Gi,e),Be(nr,r))}function qa(e){Gi.current===e&&(We(nr),We(Gi))}var Ke=Fr(0);function oo(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ka=[];function Va(){for(var e=0;e<Ka.length;e++)Ka[e]._workInProgressVersionPrimary=null;Ka.length=0}var ao=_.ReactCurrentDispatcher,Qa=_.ReactCurrentBatchConfig,xs=0,Ve=null,Ze=null,rt=null,lo=!1,Ji=!1,Yi=0,Fp=0;function ut(){throw Error(p(321))}function Ga(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Vt(e[r],t[r]))return!1;return!0}function Xa(e,t,r,s,f,y){if(xs=y,Ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ao.current=e===null||e.memoizedState===null?Wp:$p,e=r(s,f),Ji){y=0;do{if(Ji=!1,Yi=0,25<=y)throw Error(p(301));y+=1,rt=Ze=null,t.updateQueue=null,ao.current=qp,e=r(s,f)}while(Ji)}if(ao.current=ho,t=Ze!==null&&Ze.next!==null,xs=0,rt=Ze=Ve=null,lo=!1,t)throw Error(p(300));return e}function Ja(){var e=Yi!==0;return Yi=0,e}function or(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Ve.memoizedState=rt=e:rt=rt.next=e,rt}function Ht(){if(Ze===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=rt===null?Ve.memoizedState:rt.next;if(t!==null)rt=t,Ze=e;else{if(e===null)throw Error(p(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},rt===null?Ve.memoizedState=rt=e:rt=rt.next=e}return rt}function Zi(e,t){return typeof t=="function"?t(e):t}function Ya(e){var t=Ht(),r=t.queue;if(r===null)throw Error(p(311));r.lastRenderedReducer=e;var s=Ze,f=s.baseQueue,y=r.pending;if(y!==null){if(f!==null){var M=f.next;f.next=y.next,y.next=M}s.baseQueue=f=y,r.pending=null}if(f!==null){y=f.next,s=s.baseState;var z=M=null,q=null,Z=y;do{var ae=Z.lane;if((xs&ae)===ae)q!==null&&(q=q.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),s=Z.hasEagerState?Z.eagerState:e(s,Z.action);else{var ce={lane:ae,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};q===null?(z=q=ce,M=s):q=q.next=ce,Ve.lanes|=ae,ws|=ae}Z=Z.next}while(Z!==null&&Z!==y);q===null?M=s:q.next=z,Vt(s,t.memoizedState)||(bt=!0),t.memoizedState=s,t.baseState=M,t.baseQueue=q,r.lastRenderedState=s}if(e=r.interleaved,e!==null){f=e;do y=f.lane,Ve.lanes|=y,ws|=y,f=f.next;while(f!==e)}else f===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Za(e){var t=Ht(),r=t.queue;if(r===null)throw Error(p(311));r.lastRenderedReducer=e;var s=r.dispatch,f=r.pending,y=t.memoizedState;if(f!==null){r.pending=null;var M=f=f.next;do y=e(y,M.action),M=M.next;while(M!==f);Vt(y,t.memoizedState)||(bt=!0),t.memoizedState=y,t.baseQueue===null&&(t.baseState=y),r.lastRenderedState=y}return[y,s]}function Uu(){}function Wu(e,t){var r=Ve,s=Ht(),f=t(),y=!Vt(s.memoizedState,f);if(y&&(s.memoizedState=f,bt=!0),s=s.queue,el(Ku.bind(null,r,s,e),[e]),s.getSnapshot!==t||y||rt!==null&&rt.memoizedState.tag&1){if(r.flags|=2048,en(9,qu.bind(null,r,s,f,t),void 0,null),st===null)throw Error(p(349));(xs&30)!==0||$u(r,t,f)}return f}function $u(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function qu(e,t,r,s){t.value=r,t.getSnapshot=s,Vu(t)&&Qu(e)}function Ku(e,t,r){return r(function(){Vu(t)&&Qu(e)})}function Vu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Vt(e,r)}catch{return!0}}function Qu(e){var t=vr(e,1);t!==null&&Yt(t,e,1,-1)}function Gu(e){var t=or();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:e},t.queue=e,e=e.dispatch=Up.bind(null,Ve,e),[t.memoizedState,e]}function en(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Xu(){return Ht().memoizedState}function co(e,t,r,s){var f=or();Ve.flags|=e,f.memoizedState=en(1|t,r,void 0,s===void 0?null:s)}function uo(e,t,r,s){var f=Ht();s=s===void 0?null:s;var y=void 0;if(Ze!==null){var M=Ze.memoizedState;if(y=M.destroy,s!==null&&Ga(s,M.deps)){f.memoizedState=en(t,r,y,s);return}}Ve.flags|=e,f.memoizedState=en(1|t,r,y,s)}function Ju(e,t){return co(8390656,8,e,t)}function el(e,t){return uo(2048,8,e,t)}function Yu(e,t){return uo(4,2,e,t)}function Zu(e,t){return uo(4,4,e,t)}function eh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function th(e,t,r){return r=r!=null?r.concat([e]):null,uo(4,4,eh.bind(null,t,e),r)}function tl(){}function rh(e,t){var r=Ht();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ga(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function sh(e,t){var r=Ht();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ga(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function ih(e,t,r){return(xs&21)===0?(e.baseState&&(e.baseState=!1,bt=!0),e.memoizedState=r):(Vt(r,t)||(r=Nc(),Ve.lanes|=r,ws|=r,e.baseState=!0),t)}function Hp(e,t){var r=je;je=r!==0&&4>r?r:4,e(!0);var s=Qa.transition;Qa.transition={};try{e(!1),t()}finally{je=r,Qa.transition=s}}function nh(){return Ht().memoizedState}function zp(e,t,r){var s=Vr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},oh(e))ah(t,r);else if(r=Iu(e,t,r,s),r!==null){var f=_t();Yt(r,e,s,f),lh(r,t,s)}}function Up(e,t,r){var s=Vr(e),f={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(oh(e))ah(t,f);else{var y=e.alternate;if(e.lanes===0&&(y===null||y.lanes===0)&&(y=t.lastRenderedReducer,y!==null))try{var M=t.lastRenderedState,z=y(M,r);if(f.hasEagerState=!0,f.eagerState=z,Vt(z,M)){var q=t.interleaved;q===null?(f.next=f,Ua(t)):(f.next=q.next,q.next=f),t.interleaved=f;return}}catch{}finally{}r=Iu(e,t,f,s),r!==null&&(f=_t(),Yt(r,e,s,f),lh(r,t,s))}}function oh(e){var t=e.alternate;return e===Ve||t!==null&&t===Ve}function ah(e,t){Ji=lo=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function lh(e,t,r){if((r&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,sa(e,r)}}var ho={readContext:Ft,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},Wp={readContext:Ft,useCallback:function(e,t){return or().memoizedState=[e,t===void 0?null:t],e},useContext:Ft,useEffect:Ju,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,co(4194308,4,eh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return co(4194308,4,e,t)},useInsertionEffect:function(e,t){return co(4,2,e,t)},useMemo:function(e,t){var r=or();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=or();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=zp.bind(null,Ve,e),[s.memoizedState,e]},useRef:function(e){var t=or();return e={current:e},t.memoizedState=e},useState:Gu,useDebugValue:tl,useDeferredValue:function(e){return or().memoizedState=e},useTransition:function(){var e=Gu(!1),t=e[0];return e=Hp.bind(null,e[1]),or().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ve,f=or();if(qe){if(r===void 0)throw Error(p(407));r=r()}else{if(r=t(),st===null)throw Error(p(349));(xs&30)!==0||$u(s,t,r)}f.memoizedState=r;var y={value:r,getSnapshot:t};return f.queue=y,Ju(Ku.bind(null,s,y,e),[e]),s.flags|=2048,en(9,qu.bind(null,s,y,r,t),void 0,null),r},useId:function(){var e=or(),t=st.identifierPrefix;if(qe){var r=_r,s=mr;r=(s&~(1<<32-Kt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Yi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Fp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$p={readContext:Ft,useCallback:rh,useContext:Ft,useEffect:el,useImperativeHandle:th,useInsertionEffect:Yu,useLayoutEffect:Zu,useMemo:sh,useReducer:Ya,useRef:Xu,useState:function(){return Ya(Zi)},useDebugValue:tl,useDeferredValue:function(e){var t=Ht();return ih(t,Ze.memoizedState,e)},useTransition:function(){var e=Ya(Zi)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Uu,useSyncExternalStore:Wu,useId:nh,unstable_isNewReconciler:!1},qp={readContext:Ft,useCallback:rh,useContext:Ft,useEffect:el,useImperativeHandle:th,useInsertionEffect:Yu,useLayoutEffect:Zu,useMemo:sh,useReducer:Za,useRef:Xu,useState:function(){return Za(Zi)},useDebugValue:tl,useDeferredValue:function(e){var t=Ht();return Ze===null?t.memoizedState=e:ih(t,Ze.memoizedState,e)},useTransition:function(){var e=Za(Zi)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Uu,useSyncExternalStore:Wu,useId:nh,unstable_isNewReconciler:!1};function Gt(e,t){if(e&&e.defaultProps){t=O({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function rl(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:O({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var fo={isMounted:function(e){return(e=e._reactInternals)?ps(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=_t(),f=Vr(e),y=gr(s,f);y.payload=t,r!=null&&(y.callback=r),t=Wr(e,y,f),t!==null&&(Yt(t,e,f,s),io(t,e,f))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=_t(),f=Vr(e),y=gr(s,f);y.tag=1,y.payload=t,r!=null&&(y.callback=r),t=Wr(e,y,f),t!==null&&(Yt(t,e,f,s),io(t,e,f))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=_t(),s=Vr(e),f=gr(r,s);f.tag=2,t!=null&&(f.callback=t),t=Wr(e,f,s),t!==null&&(Yt(t,e,s,r),io(t,e,s))}};function ch(e,t,r,s,f,y,M){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,y,M):t.prototype&&t.prototype.isPureReactComponent?!Hi(r,s)||!Hi(f,y):!0}function uh(e,t,r){var s=!1,f=Hr,y=t.contextType;return typeof y=="object"&&y!==null?y=Ft(y):(f=Ct(t)?_s:ct.current,s=t.contextTypes,y=(s=s!=null)?Xs(e,f):Hr),t=new t(r,y),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fo,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=f,e.__reactInternalMemoizedMaskedChildContext=y),t}function hh(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function sl(e,t,r,s){var f=e.stateNode;f.props=r,f.state=e.memoizedState,f.refs={},Wa(e);var y=t.contextType;typeof y=="object"&&y!==null?f.context=Ft(y):(y=Ct(t)?_s:ct.current,f.context=Xs(e,y)),f.state=e.memoizedState,y=t.getDerivedStateFromProps,typeof y=="function"&&(rl(e,t,y,r),f.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(t=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),t!==f.state&&fo.enqueueReplaceState(f,f.state,null),no(e,r,f,s),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308)}function ii(e,t){try{var r="",s=t;do r+=ue(s),s=s.return;while(s);var f=r}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:e,source:t,stack:f,digest:null}}function il(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function nl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Kp=typeof WeakMap=="function"?WeakMap:Map;function dh(e,t,r){r=gr(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){So||(So=!0,Sl=s),nl(e,t)},r}function fh(e,t,r){r=gr(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var f=t.value;r.payload=function(){return s(f)},r.callback=function(){nl(e,t)}}var y=e.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(r.callback=function(){nl(e,t),typeof s!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var M=t.stack;this.componentDidCatch(t.value,{componentStack:M!==null?M:""})}),r}function ph(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Kp;var f=new Set;s.set(t,f)}else f=s.get(t),f===void 0&&(f=new Set,s.set(t,f));f.has(r)||(f.add(r),e=om.bind(null,e,t,r),t.then(e,e))}function mh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _h(e,t,r,s,f){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=gr(-1,1),t.tag=2,Wr(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=f,e)}var Vp=_.ReactCurrentOwner,bt=!1;function mt(e,t,r,s){t.child=e===null?ju(t,null,r,s):ei(t,e.child,r,s)}function vh(e,t,r,s,f){r=r.render;var y=t.ref;return ri(t,f),s=Xa(e,t,r,s,y,f),r=Ja(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~f,yr(e,t,f)):(qe&&r&&Aa(t),t.flags|=1,mt(e,t,s,f),t.child)}function gh(e,t,r,s,f){if(e===null){var y=r.type;return typeof y=="function"&&!Rl(y)&&y.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=y,yh(e,t,y,s,f)):(e=Eo(r.type,null,s,t,t.mode,f),e.ref=t.ref,e.return=t,t.child=e)}if(y=e.child,(e.lanes&f)===0){var M=y.memoizedProps;if(r=r.compare,r=r!==null?r:Hi,r(M,s)&&e.ref===t.ref)return yr(e,t,f)}return t.flags|=1,e=Gr(y,s),e.ref=t.ref,e.return=t,t.child=e}function yh(e,t,r,s,f){if(e!==null){var y=e.memoizedProps;if(Hi(y,s)&&e.ref===t.ref)if(bt=!1,t.pendingProps=s=y,(e.lanes&f)!==0)(e.flags&131072)!==0&&(bt=!0);else return t.lanes=e.lanes,yr(e,t,f)}return ol(e,t,r,s,f)}function Sh(e,t,r){var s=t.pendingProps,f=s.children,y=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(oi,Ot),Ot|=r;else{if((r&1073741824)===0)return e=y!==null?y.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Be(oi,Ot),Ot|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=y!==null?y.baseLanes:r,Be(oi,Ot),Ot|=s}else y!==null?(s=y.baseLanes|r,t.memoizedState=null):s=r,Be(oi,Ot),Ot|=s;return mt(e,t,f,r),t.child}function xh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ol(e,t,r,s,f){var y=Ct(r)?_s:ct.current;return y=Xs(t,y),ri(t,f),r=Xa(e,t,r,s,y,f),s=Ja(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~f,yr(e,t,f)):(qe&&s&&Aa(t),t.flags|=1,mt(e,t,r,f),t.child)}function wh(e,t,r,s,f){if(Ct(r)){var y=!0;Xn(t)}else y=!1;if(ri(t,f),t.stateNode===null)mo(e,t),uh(t,r,s),sl(t,r,s,f),s=!0;else if(e===null){var M=t.stateNode,z=t.memoizedProps;M.props=z;var q=M.context,Z=r.contextType;typeof Z=="object"&&Z!==null?Z=Ft(Z):(Z=Ct(r)?_s:ct.current,Z=Xs(t,Z));var ae=r.getDerivedStateFromProps,ce=typeof ae=="function"||typeof M.getSnapshotBeforeUpdate=="function";ce||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(z!==s||q!==Z)&&hh(t,M,s,Z),Ur=!1;var oe=t.memoizedState;M.state=oe,no(t,s,M,f),q=t.memoizedState,z!==s||oe!==q||wt.current||Ur?(typeof ae=="function"&&(rl(t,r,ae,s),q=t.memoizedState),(z=Ur||ch(t,r,z,s,oe,q,Z))?(ce||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(t.flags|=4194308)):(typeof M.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=q),M.props=s,M.state=q,M.context=Z,s=z):(typeof M.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{M=t.stateNode,Bu(e,t),z=t.memoizedProps,Z=t.type===t.elementType?z:Gt(t.type,z),M.props=Z,ce=t.pendingProps,oe=M.context,q=r.contextType,typeof q=="object"&&q!==null?q=Ft(q):(q=Ct(r)?_s:ct.current,q=Xs(t,q));var _e=r.getDerivedStateFromProps;(ae=typeof _e=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(z!==ce||oe!==q)&&hh(t,M,s,q),Ur=!1,oe=t.memoizedState,M.state=oe,no(t,s,M,f);var ge=t.memoizedState;z!==ce||oe!==ge||wt.current||Ur?(typeof _e=="function"&&(rl(t,r,_e,s),ge=t.memoizedState),(Z=Ur||ch(t,r,Z,s,oe,ge,q)||!1)?(ae||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(s,ge,q),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(s,ge,q)),typeof M.componentDidUpdate=="function"&&(t.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof M.componentDidUpdate!="function"||z===e.memoizedProps&&oe===e.memoizedState||(t.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||z===e.memoizedProps&&oe===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=ge),M.props=s,M.state=ge,M.context=q,s=Z):(typeof M.componentDidUpdate!="function"||z===e.memoizedProps&&oe===e.memoizedState||(t.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||z===e.memoizedProps&&oe===e.memoizedState||(t.flags|=1024),s=!1)}return al(e,t,r,s,y,f)}function al(e,t,r,s,f,y){xh(e,t);var M=(t.flags&128)!==0;if(!s&&!M)return f&&Ru(t,r,!1),yr(e,t,y);s=t.stateNode,Vp.current=t;var z=M&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&M?(t.child=ei(t,e.child,null,y),t.child=ei(t,null,z,y)):mt(e,t,z,y),t.memoizedState=s.state,f&&Ru(t,r,!0),t.child}function Ch(e){var t=e.stateNode;t.pendingContext?ku(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ku(e,t.context,!1),$a(e,t.containerInfo)}function bh(e,t,r,s,f){return Zs(),Ia(f),t.flags|=256,mt(e,t,r,s),t.child}var ll={dehydrated:null,treeContext:null,retryLane:0};function cl(e){return{baseLanes:e,cachePool:null,transitions:null}}function kh(e,t,r){var s=t.pendingProps,f=Ke.current,y=!1,M=(t.flags&128)!==0,z;if((z=M)||(z=e!==null&&e.memoizedState===null?!1:(f&2)!==0),z?(y=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(f|=1),Be(Ke,f&1),e===null)return ja(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(M=s.children,e=s.fallback,y?(s=t.mode,y=t.child,M={mode:"hidden",children:M},(s&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=M):y=Ro(M,s,0,null),e=Es(e,s,r,null),y.return=t,e.return=t,y.sibling=e,t.child=y,t.child.memoizedState=cl(r),t.memoizedState=ll,e):ul(t,M));if(f=e.memoizedState,f!==null&&(z=f.dehydrated,z!==null))return Qp(e,t,M,s,z,f,r);if(y){y=s.fallback,M=t.mode,f=e.child,z=f.sibling;var q={mode:"hidden",children:s.children};return(M&1)===0&&t.child!==f?(s=t.child,s.childLanes=0,s.pendingProps=q,t.deletions=null):(s=Gr(f,q),s.subtreeFlags=f.subtreeFlags&14680064),z!==null?y=Gr(z,y):(y=Es(y,M,r,null),y.flags|=2),y.return=t,s.return=t,s.sibling=y,t.child=s,s=y,y=t.child,M=e.child.memoizedState,M=M===null?cl(r):{baseLanes:M.baseLanes|r,cachePool:null,transitions:M.transitions},y.memoizedState=M,y.childLanes=e.childLanes&~r,t.memoizedState=ll,s}return y=e.child,e=y.sibling,s=Gr(y,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function ul(e,t){return t=Ro({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function po(e,t,r,s){return s!==null&&Ia(s),ei(t,e.child,null,r),e=ul(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qp(e,t,r,s,f,y,M){if(r)return t.flags&256?(t.flags&=-257,s=il(Error(p(422))),po(e,t,M,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(y=s.fallback,f=t.mode,s=Ro({mode:"visible",children:s.children},f,0,null),y=Es(y,f,M,null),y.flags|=2,s.return=t,y.return=t,s.sibling=y,t.child=s,(t.mode&1)!==0&&ei(t,e.child,null,M),t.child.memoizedState=cl(M),t.memoizedState=ll,y);if((t.mode&1)===0)return po(e,t,M,null);if(f.data==="$!"){if(s=f.nextSibling&&f.nextSibling.dataset,s)var z=s.dgst;return s=z,y=Error(p(419)),s=il(y,s,void 0),po(e,t,M,s)}if(z=(M&e.childLanes)!==0,bt||z){if(s=st,s!==null){switch(M&-M){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(s.suspendedLanes|M))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,vr(e,f),Yt(s,e,f,-1))}return El(),s=il(Error(p(421))),po(e,t,M,s)}return f.data==="$?"?(t.flags|=128,t.child=e.child,t=am.bind(null,e),f._reactRetry=t,null):(e=y.treeContext,Nt=Br(f.nextSibling),At=t,qe=!0,Qt=null,e!==null&&(It[Bt++]=mr,It[Bt++]=_r,It[Bt++]=vs,mr=e.id,_r=e.overflow,vs=t),t=ul(t,s.children),t.flags|=4096,t)}function Eh(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),za(e.return,t,r)}function hl(e,t,r,s,f){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:f}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=s,y.tail=r,y.tailMode=f)}function Rh(e,t,r){var s=t.pendingProps,f=s.revealOrder,y=s.tail;if(mt(e,t,s.children,r),s=Ke.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Eh(e,r,t);else if(e.tag===19)Eh(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Be(Ke,s),(t.mode&1)===0)t.memoizedState=null;else switch(f){case"forwards":for(r=t.child,f=null;r!==null;)e=r.alternate,e!==null&&oo(e)===null&&(f=r),r=r.sibling;r=f,r===null?(f=t.child,t.child=null):(f=r.sibling,r.sibling=null),hl(t,!1,f,r,y);break;case"backwards":for(r=null,f=t.child,t.child=null;f!==null;){if(e=f.alternate,e!==null&&oo(e)===null){t.child=f;break}e=f.sibling,f.sibling=r,r=f,f=e}hl(t,!0,r,null,y);break;case"together":hl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function mo(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ws|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(p(153));if(t.child!==null){for(e=t.child,r=Gr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Gr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Gp(e,t,r){switch(t.tag){case 3:Ch(t),Zs();break;case 5:zu(t);break;case 1:Ct(t.type)&&Xn(t);break;case 4:$a(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,f=t.memoizedProps.value;Be(ro,s._currentValue),s._currentValue=f;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Be(Ke,Ke.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?kh(e,t,r):(Be(Ke,Ke.current&1),e=yr(e,t,r),e!==null?e.sibling:null);Be(Ke,Ke.current&1);break;case 19:if(s=(r&t.childLanes)!==0,(e.flags&128)!==0){if(s)return Rh(e,t,r);t.flags|=128}if(f=t.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Be(Ke,Ke.current),s)break;return null;case 22:case 23:return t.lanes=0,Sh(e,t,r)}return yr(e,t,r)}var Lh,dl,Dh,Ph;Lh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},dl=function(){},Dh=function(e,t,r,s){var f=e.memoizedProps;if(f!==s){e=t.stateNode,Ss(nr.current);var y=null;switch(r){case"input":f=Ie(e,f),s=Ie(e,s),y=[];break;case"select":f=O({},f,{value:void 0}),s=O({},s,{value:void 0}),y=[];break;case"textarea":f=Dr(e,f),s=Dr(e,s),y=[];break;default:typeof f.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Vn)}Ko(r,s);var M;r=null;for(Z in f)if(!s.hasOwnProperty(Z)&&f.hasOwnProperty(Z)&&f[Z]!=null)if(Z==="style"){var z=f[Z];for(M in z)z.hasOwnProperty(M)&&(r||(r={}),r[M]="")}else Z!=="dangerouslySetInnerHTML"&&Z!=="children"&&Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(A.hasOwnProperty(Z)?y||(y=[]):(y=y||[]).push(Z,null));for(Z in s){var q=s[Z];if(z=f!=null?f[Z]:void 0,s.hasOwnProperty(Z)&&q!==z&&(q!=null||z!=null))if(Z==="style")if(z){for(M in z)!z.hasOwnProperty(M)||q&&q.hasOwnProperty(M)||(r||(r={}),r[M]="");for(M in q)q.hasOwnProperty(M)&&z[M]!==q[M]&&(r||(r={}),r[M]=q[M])}else r||(y||(y=[]),y.push(Z,r)),r=q;else Z==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,z=z?z.__html:void 0,q!=null&&z!==q&&(y=y||[]).push(Z,q)):Z==="children"?typeof q!="string"&&typeof q!="number"||(y=y||[]).push(Z,""+q):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&(A.hasOwnProperty(Z)?(q!=null&&Z==="onScroll"&&Ue("scroll",e),y||z===q||(y=[])):(y=y||[]).push(Z,q))}r&&(y=y||[]).push("style",r);var Z=y;(t.updateQueue=Z)&&(t.flags|=4)}},Ph=function(e,t,r,s){r!==s&&(t.flags|=4)};function tn(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var f=e.child;f!==null;)r|=f.lanes|f.childLanes,s|=f.subtreeFlags&14680064,s|=f.flags&14680064,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)r|=f.lanes|f.childLanes,s|=f.subtreeFlags,s|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Xp(e,t,r){var s=t.pendingProps;switch(Na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(t),null;case 1:return Ct(t.type)&&Gn(),ht(t),null;case 3:return s=t.stateNode,si(),We(wt),We(ct),Va(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(eo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Qt!==null&&(Cl(Qt),Qt=null))),dl(e,t),ht(t),null;case 5:qa(t);var f=Ss(Xi.current);if(r=t.type,e!==null&&t.stateNode!=null)Dh(e,t,r,s,f),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(p(166));return ht(t),null}if(e=Ss(nr.current),eo(t)){s=t.stateNode,r=t.type;var y=t.memoizedProps;switch(s[ir]=t,s[qi]=y,e=(t.mode&1)!==0,r){case"dialog":Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":case"embed":Ue("load",s);break;case"video":case"audio":for(f=0;f<Ui.length;f++)Ue(Ui[f],s);break;case"source":Ue("error",s);break;case"img":case"image":case"link":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"input":He(s,y),Ue("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!y.multiple},Ue("invalid",s);break;case"textarea":pt(s,y),Ue("invalid",s)}Ko(r,y),f=null;for(var M in y)if(y.hasOwnProperty(M)){var z=y[M];M==="children"?typeof z=="string"?s.textContent!==z&&(y.suppressHydrationWarning!==!0&&Kn(s.textContent,z,e),f=["children",z]):typeof z=="number"&&s.textContent!==""+z&&(y.suppressHydrationWarning!==!0&&Kn(s.textContent,z,e),f=["children",""+z]):A.hasOwnProperty(M)&&z!=null&&M==="onScroll"&&Ue("scroll",s)}switch(r){case"input":pe(s),Lr(s,y,!0);break;case"textarea":pe(s),Pt(s);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(s.onclick=Vn)}s=f,t.updateQueue=s,s!==null&&(t.flags|=4)}else{M=f.nodeType===9?f:f.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tr(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=M.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=M.createElement(r,{is:s.is}):(e=M.createElement(r),r==="select"&&(M=e,s.multiple?M.multiple=!0:s.size&&(M.size=s.size))):e=M.createElementNS(e,r),e[ir]=t,e[qi]=s,Lh(e,t,!1,!1),t.stateNode=e;e:{switch(M=Vo(r,s),r){case"dialog":Ue("cancel",e),Ue("close",e),f=s;break;case"iframe":case"object":case"embed":Ue("load",e),f=s;break;case"video":case"audio":for(f=0;f<Ui.length;f++)Ue(Ui[f],e);f=s;break;case"source":Ue("error",e),f=s;break;case"img":case"image":case"link":Ue("error",e),Ue("load",e),f=s;break;case"details":Ue("toggle",e),f=s;break;case"input":He(e,s),f=Ie(e,s),Ue("invalid",e);break;case"option":f=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},f=O({},s,{value:void 0}),Ue("invalid",e);break;case"textarea":pt(e,s),f=Dr(e,s),Ue("invalid",e);break;default:f=s}Ko(r,f),z=f;for(y in z)if(z.hasOwnProperty(y)){var q=z[y];y==="style"?yc(e,q):y==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&fs(e,q)):y==="children"?typeof q=="string"?(r!=="textarea"||q!=="")&&xt(e,q):typeof q=="number"&&xt(e,""+q):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(A.hasOwnProperty(y)?q!=null&&y==="onScroll"&&Ue("scroll",e):q!=null&&u(e,y,q,M))}switch(r){case"input":pe(e),Lr(e,s,!1);break;case"textarea":pe(e),Pt(e);break;case"option":s.value!=null&&e.setAttribute("value",""+N(s.value));break;case"select":e.multiple=!!s.multiple,y=s.value,y!=null?rr(e,!!s.multiple,y,!1):s.defaultValue!=null&&rr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof f.onClick=="function"&&(e.onclick=Vn)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ht(t),null;case 6:if(e&&t.stateNode!=null)Ph(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(p(166));if(r=Ss(Xi.current),Ss(nr.current),eo(t)){if(s=t.stateNode,r=t.memoizedProps,s[ir]=t,(y=s.nodeValue!==r)&&(e=At,e!==null))switch(e.tag){case 3:Kn(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Kn(s.nodeValue,r,(e.mode&1)!==0)}y&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[ir]=t,t.stateNode=s}return ht(t),null;case 13:if(We(Ke),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&Nt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Au(),Zs(),t.flags|=98560,y=!1;else if(y=eo(t),s!==null&&s.dehydrated!==null){if(e===null){if(!y)throw Error(p(318));if(y=t.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(p(317));y[ir]=t}else Zs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ht(t),y=!1}else Qt!==null&&(Cl(Qt),Qt=null),y=!0;if(!y)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ke.current&1)!==0?et===0&&(et=3):El())),t.updateQueue!==null&&(t.flags|=4),ht(t),null);case 4:return si(),dl(e,t),e===null&&Wi(t.stateNode.containerInfo),ht(t),null;case 10:return Ha(t.type._context),ht(t),null;case 17:return Ct(t.type)&&Gn(),ht(t),null;case 19:if(We(Ke),y=t.memoizedState,y===null)return ht(t),null;if(s=(t.flags&128)!==0,M=y.rendering,M===null)if(s)tn(y,!1);else{if(et!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(M=oo(e),M!==null){for(t.flags|=128,tn(y,!1),s=M.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)y=r,e=s,y.flags&=14680066,M=y.alternate,M===null?(y.childLanes=0,y.lanes=e,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=M.childLanes,y.lanes=M.lanes,y.child=M.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=M.memoizedProps,y.memoizedState=M.memoizedState,y.updateQueue=M.updateQueue,y.type=M.type,e=M.dependencies,y.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Be(Ke,Ke.current&1|2),t.child}e=e.sibling}y.tail!==null&&Xe()>ai&&(t.flags|=128,s=!0,tn(y,!1),t.lanes=4194304)}else{if(!s)if(e=oo(M),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),tn(y,!0),y.tail===null&&y.tailMode==="hidden"&&!M.alternate&&!qe)return ht(t),null}else 2*Xe()-y.renderingStartTime>ai&&r!==1073741824&&(t.flags|=128,s=!0,tn(y,!1),t.lanes=4194304);y.isBackwards?(M.sibling=t.child,t.child=M):(r=y.last,r!==null?r.sibling=M:t.child=M,y.last=M)}return y.tail!==null?(t=y.tail,y.rendering=t,y.tail=t.sibling,y.renderingStartTime=Xe(),t.sibling=null,r=Ke.current,Be(Ke,s?r&1|2:r&1),t):(ht(t),null);case 22:case 23:return kl(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(Ot&1073741824)!==0&&(ht(t),t.subtreeFlags&6&&(t.flags|=8192)):ht(t),null;case 24:return null;case 25:return null}throw Error(p(156,t.tag))}function Jp(e,t){switch(Na(t),t.tag){case 1:return Ct(t.type)&&Gn(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return si(),We(wt),We(ct),Va(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return qa(t),null;case 13:if(We(Ke),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(p(340));Zs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return We(Ke),null;case 4:return si(),null;case 10:return Ha(t.type._context),null;case 22:case 23:return kl(),null;case 24:return null;default:return null}}var _o=!1,dt=!1,Yp=typeof WeakSet=="function"?WeakSet:Set,ve=null;function ni(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Qe(e,t,s)}else r.current=null}function fl(e,t,r){try{r()}catch(s){Qe(e,t,s)}}var Th=!1;function Zp(e,t){if(ka=On,e=cu(),va(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var f=s.anchorOffset,y=s.focusNode;s=s.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var M=0,z=-1,q=-1,Z=0,ae=0,ce=e,oe=null;t:for(;;){for(var _e;ce!==r||f!==0&&ce.nodeType!==3||(z=M+f),ce!==y||s!==0&&ce.nodeType!==3||(q=M+s),ce.nodeType===3&&(M+=ce.nodeValue.length),(_e=ce.firstChild)!==null;)oe=ce,ce=_e;for(;;){if(ce===e)break t;if(oe===r&&++Z===f&&(z=M),oe===y&&++ae===s&&(q=M),(_e=ce.nextSibling)!==null)break;ce=oe,oe=ce.parentNode}ce=_e}r=z===-1||q===-1?null:{start:z,end:q}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ea={focusedElem:e,selectionRange:r},On=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){t=ve;try{var ge=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ye=ge.memoizedProps,Je=ge.memoizedState,Q=t.stateNode,V=Q.getSnapshotBeforeUpdate(t.elementType===t.type?ye:Gt(t.type,ye),Je);Q.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var J=t.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(he){Qe(t,t.return,he)}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}return ge=Th,Th=!1,ge}function rn(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var f=s=s.next;do{if((f.tag&e)===e){var y=f.destroy;f.destroy=void 0,y!==void 0&&fl(t,r,y)}f=f.next}while(f!==s)}}function vo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function pl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Mh(e){var t=e.alternate;t!==null&&(e.alternate=null,Mh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ir],delete t[qi],delete t[Pa],delete t[Op],delete t[jp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ah(e){return e.tag===5||e.tag===3||e.tag===4}function Nh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ah(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ml(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Vn));else if(s!==4&&(e=e.child,e!==null))for(ml(e,t,r),e=e.sibling;e!==null;)ml(e,t,r),e=e.sibling}function _l(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(_l(e,t,r),e=e.sibling;e!==null;)_l(e,t,r),e=e.sibling}var at=null,Xt=!1;function $r(e,t,r){for(r=r.child;r!==null;)Oh(e,t,r),r=r.sibling}function Oh(e,t,r){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(Dn,r)}catch{}switch(r.tag){case 5:dt||ni(r,t);case 6:var s=at,f=Xt;at=null,$r(e,t,r),at=s,Xt=f,at!==null&&(Xt?(e=at,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):at.removeChild(r.stateNode));break;case 18:at!==null&&(Xt?(e=at,r=r.stateNode,e.nodeType===8?Da(e.parentNode,r):e.nodeType===1&&Da(e,r),Ni(e)):Da(at,r.stateNode));break;case 4:s=at,f=Xt,at=r.stateNode.containerInfo,Xt=!0,$r(e,t,r),at=s,Xt=f;break;case 0:case 11:case 14:case 15:if(!dt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){f=s=s.next;do{var y=f,M=y.destroy;y=y.tag,M!==void 0&&((y&2)!==0||(y&4)!==0)&&fl(r,t,M),f=f.next}while(f!==s)}$r(e,t,r);break;case 1:if(!dt&&(ni(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(z){Qe(r,t,z)}$r(e,t,r);break;case 21:$r(e,t,r);break;case 22:r.mode&1?(dt=(s=dt)||r.memoizedState!==null,$r(e,t,r),dt=s):$r(e,t,r);break;default:$r(e,t,r)}}function jh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Yp),t.forEach(function(s){var f=lm.bind(null,e,s);r.has(s)||(r.add(s),s.then(f,f))})}}function Jt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var f=r[s];try{var y=e,M=t,z=M;e:for(;z!==null;){switch(z.tag){case 5:at=z.stateNode,Xt=!1;break e;case 3:at=z.stateNode.containerInfo,Xt=!0;break e;case 4:at=z.stateNode.containerInfo,Xt=!0;break e}z=z.return}if(at===null)throw Error(p(160));Oh(y,M,f),at=null,Xt=!1;var q=f.alternate;q!==null&&(q.return=null),f.return=null}catch(Z){Qe(f,t,Z)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ih(t,e),t=t.sibling}function Ih(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),ar(e),s&4){try{rn(3,e,e.return),vo(3,e)}catch(ye){Qe(e,e.return,ye)}try{rn(5,e,e.return)}catch(ye){Qe(e,e.return,ye)}}break;case 1:Jt(t,e),ar(e),s&512&&r!==null&&ni(r,r.return);break;case 5:if(Jt(t,e),ar(e),s&512&&r!==null&&ni(r,r.return),e.flags&32){var f=e.stateNode;try{xt(f,"")}catch(ye){Qe(e,e.return,ye)}}if(s&4&&(f=e.stateNode,f!=null)){var y=e.memoizedProps,M=r!==null?r.memoizedProps:y,z=e.type,q=e.updateQueue;if(e.updateQueue=null,q!==null)try{z==="input"&&y.type==="radio"&&y.name!=null&&ot(f,y),Vo(z,M);var Z=Vo(z,y);for(M=0;M<q.length;M+=2){var ae=q[M],ce=q[M+1];ae==="style"?yc(f,ce):ae==="dangerouslySetInnerHTML"?fs(f,ce):ae==="children"?xt(f,ce):u(f,ae,ce,Z)}switch(z){case"input":be(f,y);break;case"textarea":Pr(f,y);break;case"select":var oe=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var _e=y.value;_e!=null?rr(f,!!y.multiple,_e,!1):oe!==!!y.multiple&&(y.defaultValue!=null?rr(f,!!y.multiple,y.defaultValue,!0):rr(f,!!y.multiple,y.multiple?[]:"",!1))}f[qi]=y}catch(ye){Qe(e,e.return,ye)}}break;case 6:if(Jt(t,e),ar(e),s&4){if(e.stateNode===null)throw Error(p(162));f=e.stateNode,y=e.memoizedProps;try{f.nodeValue=y}catch(ye){Qe(e,e.return,ye)}}break;case 3:if(Jt(t,e),ar(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Ni(t.containerInfo)}catch(ye){Qe(e,e.return,ye)}break;case 4:Jt(t,e),ar(e);break;case 13:Jt(t,e),ar(e),f=e.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(yl=Xe())),s&4&&jh(e);break;case 22:if(ae=r!==null&&r.memoizedState!==null,e.mode&1?(dt=(Z=dt)||ae,Jt(t,e),dt=Z):Jt(t,e),ar(e),s&8192){if(Z=e.memoizedState!==null,(e.stateNode.isHidden=Z)&&!ae&&(e.mode&1)!==0)for(ve=e,ae=e.child;ae!==null;){for(ce=ve=ae;ve!==null;){switch(oe=ve,_e=oe.child,oe.tag){case 0:case 11:case 14:case 15:rn(4,oe,oe.return);break;case 1:ni(oe,oe.return);var ge=oe.stateNode;if(typeof ge.componentWillUnmount=="function"){s=oe,r=oe.return;try{t=s,ge.props=t.memoizedProps,ge.state=t.memoizedState,ge.componentWillUnmount()}catch(ye){Qe(s,r,ye)}}break;case 5:ni(oe,oe.return);break;case 22:if(oe.memoizedState!==null){Hh(ce);continue}}_e!==null?(_e.return=oe,ve=_e):Hh(ce)}ae=ae.sibling}e:for(ae=null,ce=e;;){if(ce.tag===5){if(ae===null){ae=ce;try{f=ce.stateNode,Z?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(z=ce.stateNode,q=ce.memoizedProps.style,M=q!=null&&q.hasOwnProperty("display")?q.display:null,z.style.display=kn("display",M))}catch(ye){Qe(e,e.return,ye)}}}else if(ce.tag===6){if(ae===null)try{ce.stateNode.nodeValue=Z?"":ce.memoizedProps}catch(ye){Qe(e,e.return,ye)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===e)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===e)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===e)break e;ae===ce&&(ae=null),ce=ce.return}ae===ce&&(ae=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:Jt(t,e),ar(e),s&4&&jh(e);break;case 21:break;default:Jt(t,e),ar(e)}}function ar(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Ah(r)){var s=r;break e}r=r.return}throw Error(p(160))}switch(s.tag){case 5:var f=s.stateNode;s.flags&32&&(xt(f,""),s.flags&=-33);var y=Nh(e);_l(e,y,f);break;case 3:case 4:var M=s.stateNode.containerInfo,z=Nh(e);ml(e,z,M);break;default:throw Error(p(161))}}catch(q){Qe(e,e.return,q)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function em(e,t,r){ve=e,Bh(e)}function Bh(e,t,r){for(var s=(e.mode&1)!==0;ve!==null;){var f=ve,y=f.child;if(f.tag===22&&s){var M=f.memoizedState!==null||_o;if(!M){var z=f.alternate,q=z!==null&&z.memoizedState!==null||dt;z=_o;var Z=dt;if(_o=M,(dt=q)&&!Z)for(ve=f;ve!==null;)M=ve,q=M.child,M.tag===22&&M.memoizedState!==null?zh(f):q!==null?(q.return=M,ve=q):zh(f);for(;y!==null;)ve=y,Bh(y),y=y.sibling;ve=f,_o=z,dt=Z}Fh(e)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,ve=y):Fh(e)}}function Fh(e){for(;ve!==null;){var t=ve;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:dt||vo(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!dt)if(r===null)s.componentDidMount();else{var f=t.elementType===t.type?r.memoizedProps:Gt(t.type,r.memoizedProps);s.componentDidUpdate(f,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var y=t.updateQueue;y!==null&&Hu(t,y,s);break;case 3:var M=t.updateQueue;if(M!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Hu(t,M,r)}break;case 5:var z=t.stateNode;if(r===null&&t.flags&4){r=z;var q=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":q.autoFocus&&r.focus();break;case"img":q.src&&(r.src=q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var Z=t.alternate;if(Z!==null){var ae=Z.memoizedState;if(ae!==null){var ce=ae.dehydrated;ce!==null&&Ni(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}dt||t.flags&512&&pl(t)}catch(oe){Qe(t,t.return,oe)}}if(t===e){ve=null;break}if(r=t.sibling,r!==null){r.return=t.return,ve=r;break}ve=t.return}}function Hh(e){for(;ve!==null;){var t=ve;if(t===e){ve=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ve=r;break}ve=t.return}}function zh(e){for(;ve!==null;){var t=ve;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{vo(4,t)}catch(q){Qe(t,r,q)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var f=t.return;try{s.componentDidMount()}catch(q){Qe(t,f,q)}}var y=t.return;try{pl(t)}catch(q){Qe(t,y,q)}break;case 5:var M=t.return;try{pl(t)}catch(q){Qe(t,M,q)}}}catch(q){Qe(t,t.return,q)}if(t===e){ve=null;break}var z=t.sibling;if(z!==null){z.return=t.return,ve=z;break}ve=t.return}}var tm=Math.ceil,go=_.ReactCurrentDispatcher,vl=_.ReactCurrentOwner,zt=_.ReactCurrentBatchConfig,Te=0,st=null,Ye=null,lt=0,Ot=0,oi=Fr(0),et=0,sn=null,ws=0,yo=0,gl=0,nn=null,kt=null,yl=0,ai=1/0,Sr=null,So=!1,Sl=null,qr=null,xo=!1,Kr=null,wo=0,on=0,xl=null,Co=-1,bo=0;function _t(){return(Te&6)!==0?Xe():Co!==-1?Co:Co=Xe()}function Vr(e){return(e.mode&1)===0?1:(Te&2)!==0&&lt!==0?lt&-lt:Bp.transition!==null?(bo===0&&(bo=Nc()),bo):(e=je,e!==0||(e=window.event,e=e===void 0?16:Wc(e.type)),e)}function Yt(e,t,r,s){if(50<on)throw on=0,xl=null,Error(p(185));Di(e,r,s),((Te&2)===0||e!==st)&&(e===st&&((Te&2)===0&&(yo|=r),et===4&&Qr(e,lt)),Et(e,s),r===1&&Te===0&&(t.mode&1)===0&&(ai=Xe()+500,Jn&&zr()))}function Et(e,t){var r=e.callbackNode;Bf(e,t);var s=Mn(e,e===st?lt:0);if(s===0)r!==null&&Tc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Tc(r),t===1)e.tag===0?Ip(Wh.bind(null,e)):Lu(Wh.bind(null,e)),Ap(function(){(Te&6)===0&&zr()}),r=null;else{switch(Oc(s)){case 1:r=ea;break;case 4:r=Mc;break;case 16:r=Ln;break;case 536870912:r=Ac;break;default:r=Ln}r=Jh(r,Uh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Uh(e,t){if(Co=-1,bo=0,(Te&6)!==0)throw Error(p(327));var r=e.callbackNode;if(li()&&e.callbackNode!==r)return null;var s=Mn(e,e===st?lt:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=ko(e,s);else{t=s;var f=Te;Te|=2;var y=qh();(st!==e||lt!==t)&&(Sr=null,ai=Xe()+500,bs(e,t));do try{im();break}catch(z){$h(e,z)}while(!0);Fa(),go.current=y,Te=f,Ye!==null?t=0:(st=null,lt=0,t=et)}if(t!==0){if(t===2&&(f=ta(e),f!==0&&(s=f,t=wl(e,f))),t===1)throw r=sn,bs(e,0),Qr(e,s),Et(e,Xe()),r;if(t===6)Qr(e,s);else{if(f=e.current.alternate,(s&30)===0&&!rm(f)&&(t=ko(e,s),t===2&&(y=ta(e),y!==0&&(s=y,t=wl(e,y))),t===1))throw r=sn,bs(e,0),Qr(e,s),Et(e,Xe()),r;switch(e.finishedWork=f,e.finishedLanes=s,t){case 0:case 1:throw Error(p(345));case 2:ks(e,kt,Sr);break;case 3:if(Qr(e,s),(s&130023424)===s&&(t=yl+500-Xe(),10<t)){if(Mn(e,0)!==0)break;if(f=e.suspendedLanes,(f&s)!==s){_t(),e.pingedLanes|=e.suspendedLanes&f;break}e.timeoutHandle=La(ks.bind(null,e,kt,Sr),t);break}ks(e,kt,Sr);break;case 4:if(Qr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,f=-1;0<s;){var M=31-Kt(s);y=1<<M,M=t[M],M>f&&(f=M),s&=~y}if(s=f,s=Xe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*tm(s/1960))-s,10<s){e.timeoutHandle=La(ks.bind(null,e,kt,Sr),s);break}ks(e,kt,Sr);break;case 5:ks(e,kt,Sr);break;default:throw Error(p(329))}}}return Et(e,Xe()),e.callbackNode===r?Uh.bind(null,e):null}function wl(e,t){var r=nn;return e.current.memoizedState.isDehydrated&&(bs(e,t).flags|=256),e=ko(e,t),e!==2&&(t=kt,kt=r,t!==null&&Cl(t)),e}function Cl(e){kt===null?kt=e:kt.push.apply(kt,e)}function rm(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var f=r[s],y=f.getSnapshot;f=f.value;try{if(!Vt(y(),f))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qr(e,t){for(t&=~gl,t&=~yo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Kt(t),s=1<<r;e[r]=-1,t&=~s}}function Wh(e){if((Te&6)!==0)throw Error(p(327));li();var t=Mn(e,0);if((t&1)===0)return Et(e,Xe()),null;var r=ko(e,t);if(e.tag!==0&&r===2){var s=ta(e);s!==0&&(t=s,r=wl(e,s))}if(r===1)throw r=sn,bs(e,0),Qr(e,t),Et(e,Xe()),r;if(r===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ks(e,kt,Sr),Et(e,Xe()),null}function bl(e,t){var r=Te;Te|=1;try{return e(t)}finally{Te=r,Te===0&&(ai=Xe()+500,Jn&&zr())}}function Cs(e){Kr!==null&&Kr.tag===0&&(Te&6)===0&&li();var t=Te;Te|=1;var r=zt.transition,s=je;try{if(zt.transition=null,je=1,e)return e()}finally{je=s,zt.transition=r,Te=t,(Te&6)===0&&zr()}}function kl(){Ot=oi.current,We(oi)}function bs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Mp(r)),Ye!==null)for(r=Ye.return;r!==null;){var s=r;switch(Na(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Gn();break;case 3:si(),We(wt),We(ct),Va();break;case 5:qa(s);break;case 4:si();break;case 13:We(Ke);break;case 19:We(Ke);break;case 10:Ha(s.type._context);break;case 22:case 23:kl()}r=r.return}if(st=e,Ye=e=Gr(e.current,null),lt=Ot=t,et=0,sn=null,gl=yo=ws=0,kt=nn=null,ys!==null){for(t=0;t<ys.length;t++)if(r=ys[t],s=r.interleaved,s!==null){r.interleaved=null;var f=s.next,y=r.pending;if(y!==null){var M=y.next;y.next=f,s.next=M}r.pending=s}ys=null}return e}function $h(e,t){do{var r=Ye;try{if(Fa(),ao.current=ho,lo){for(var s=Ve.memoizedState;s!==null;){var f=s.queue;f!==null&&(f.pending=null),s=s.next}lo=!1}if(xs=0,rt=Ze=Ve=null,Ji=!1,Yi=0,vl.current=null,r===null||r.return===null){et=1,sn=t,Ye=null;break}e:{var y=e,M=r.return,z=r,q=t;if(t=lt,z.flags|=32768,q!==null&&typeof q=="object"&&typeof q.then=="function"){var Z=q,ae=z,ce=ae.tag;if((ae.mode&1)===0&&(ce===0||ce===11||ce===15)){var oe=ae.alternate;oe?(ae.updateQueue=oe.updateQueue,ae.memoizedState=oe.memoizedState,ae.lanes=oe.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var _e=mh(M);if(_e!==null){_e.flags&=-257,_h(_e,M,z,y,t),_e.mode&1&&ph(y,Z,t),t=_e,q=Z;var ge=t.updateQueue;if(ge===null){var ye=new Set;ye.add(q),t.updateQueue=ye}else ge.add(q);break e}else{if((t&1)===0){ph(y,Z,t),El();break e}q=Error(p(426))}}else if(qe&&z.mode&1){var Je=mh(M);if(Je!==null){(Je.flags&65536)===0&&(Je.flags|=256),_h(Je,M,z,y,t),Ia(ii(q,z));break e}}y=q=ii(q,z),et!==4&&(et=2),nn===null?nn=[y]:nn.push(y),y=M;do{switch(y.tag){case 3:y.flags|=65536,t&=-t,y.lanes|=t;var Q=dh(y,q,t);Fu(y,Q);break e;case 1:z=q;var V=y.type,J=y.stateNode;if((y.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(qr===null||!qr.has(J)))){y.flags|=65536,t&=-t,y.lanes|=t;var he=fh(y,z,t);Fu(y,he);break e}}y=y.return}while(y!==null)}Vh(r)}catch(Se){t=Se,Ye===r&&r!==null&&(Ye=r=r.return);continue}break}while(!0)}function qh(){var e=go.current;return go.current=ho,e===null?ho:e}function El(){(et===0||et===3||et===2)&&(et=4),st===null||(ws&268435455)===0&&(yo&268435455)===0||Qr(st,lt)}function ko(e,t){var r=Te;Te|=2;var s=qh();(st!==e||lt!==t)&&(Sr=null,bs(e,t));do try{sm();break}catch(f){$h(e,f)}while(!0);if(Fa(),Te=r,go.current=s,Ye!==null)throw Error(p(261));return st=null,lt=0,et}function sm(){for(;Ye!==null;)Kh(Ye)}function im(){for(;Ye!==null&&!Df();)Kh(Ye)}function Kh(e){var t=Xh(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,t===null?Vh(e):Ye=t,vl.current=null}function Vh(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=Xp(r,t,Ot),r!==null){Ye=r;return}}else{if(r=Jp(r,t),r!==null){r.flags&=32767,Ye=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Ye=null;return}}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);et===0&&(et=5)}function ks(e,t,r){var s=je,f=zt.transition;try{zt.transition=null,je=1,nm(e,t,r,s)}finally{zt.transition=f,je=s}return null}function nm(e,t,r,s){do li();while(Kr!==null);if((Te&6)!==0)throw Error(p(327));r=e.finishedWork;var f=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var y=r.lanes|r.childLanes;if(Ff(e,y),e===st&&(Ye=st=null,lt=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||xo||(xo=!0,Jh(Ln,function(){return li(),null})),y=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||y){y=zt.transition,zt.transition=null;var M=je;je=1;var z=Te;Te|=4,vl.current=null,Zp(e,r),Ih(r,e),kp(Ea),On=!!ka,Ea=ka=null,e.current=r,em(r),Pf(),Te=z,je=M,zt.transition=y}else e.current=r;if(xo&&(xo=!1,Kr=e,wo=f),y=e.pendingLanes,y===0&&(qr=null),Af(r.stateNode),Et(e,Xe()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)f=t[r],s(f.value,{componentStack:f.stack,digest:f.digest});if(So)throw So=!1,e=Sl,Sl=null,e;return(wo&1)!==0&&e.tag!==0&&li(),y=e.pendingLanes,(y&1)!==0?e===xl?on++:(on=0,xl=e):on=0,zr(),null}function li(){if(Kr!==null){var e=Oc(wo),t=zt.transition,r=je;try{if(zt.transition=null,je=16>e?16:e,Kr===null)var s=!1;else{if(e=Kr,Kr=null,wo=0,(Te&6)!==0)throw Error(p(331));var f=Te;for(Te|=4,ve=e.current;ve!==null;){var y=ve,M=y.child;if((ve.flags&16)!==0){var z=y.deletions;if(z!==null){for(var q=0;q<z.length;q++){var Z=z[q];for(ve=Z;ve!==null;){var ae=ve;switch(ae.tag){case 0:case 11:case 15:rn(8,ae,y)}var ce=ae.child;if(ce!==null)ce.return=ae,ve=ce;else for(;ve!==null;){ae=ve;var oe=ae.sibling,_e=ae.return;if(Mh(ae),ae===Z){ve=null;break}if(oe!==null){oe.return=_e,ve=oe;break}ve=_e}}}var ge=y.alternate;if(ge!==null){var ye=ge.child;if(ye!==null){ge.child=null;do{var Je=ye.sibling;ye.sibling=null,ye=Je}while(ye!==null)}}ve=y}}if((y.subtreeFlags&2064)!==0&&M!==null)M.return=y,ve=M;else e:for(;ve!==null;){if(y=ve,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:rn(9,y,y.return)}var Q=y.sibling;if(Q!==null){Q.return=y.return,ve=Q;break e}ve=y.return}}var V=e.current;for(ve=V;ve!==null;){M=ve;var J=M.child;if((M.subtreeFlags&2064)!==0&&J!==null)J.return=M,ve=J;else e:for(M=V;ve!==null;){if(z=ve,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:vo(9,z)}}catch(Se){Qe(z,z.return,Se)}if(z===M){ve=null;break e}var he=z.sibling;if(he!==null){he.return=z.return,ve=he;break e}ve=z.return}}if(Te=f,zr(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(Dn,e)}catch{}s=!0}return s}finally{je=r,zt.transition=t}}return!1}function Qh(e,t,r){t=ii(r,t),t=dh(e,t,1),e=Wr(e,t,1),t=_t(),e!==null&&(Di(e,1,t),Et(e,t))}function Qe(e,t,r){if(e.tag===3)Qh(e,e,r);else for(;t!==null;){if(t.tag===3){Qh(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(qr===null||!qr.has(s))){e=ii(r,e),e=fh(t,e,1),t=Wr(t,e,1),e=_t(),t!==null&&(Di(t,1,e),Et(t,e));break}}t=t.return}}function om(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=_t(),e.pingedLanes|=e.suspendedLanes&r,st===e&&(lt&r)===r&&(et===4||et===3&&(lt&130023424)===lt&&500>Xe()-yl?bs(e,0):gl|=r),Et(e,t)}function Gh(e,t){t===0&&((e.mode&1)===0?t=1:(t=Tn,Tn<<=1,(Tn&130023424)===0&&(Tn=4194304)));var r=_t();e=vr(e,t),e!==null&&(Di(e,t,r),Et(e,r))}function am(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Gh(e,r)}function lm(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,f=e.memoizedState;f!==null&&(r=f.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(p(314))}s!==null&&s.delete(t),Gh(e,r)}var Xh;Xh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||wt.current)bt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return bt=!1,Gp(e,t,r);bt=(e.flags&131072)!==0}else bt=!1,qe&&(t.flags&1048576)!==0&&Du(t,Zn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;mo(e,t),e=t.pendingProps;var f=Xs(t,ct.current);ri(t,r),f=Xa(null,t,s,e,f,r);var y=Ja();return t.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ct(s)?(y=!0,Xn(t)):y=!1,t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Wa(t),f.updater=fo,t.stateNode=f,f._reactInternals=t,sl(t,s,e,r),t=al(null,t,s,!0,y,r)):(t.tag=0,qe&&y&&Aa(t),mt(null,t,f,r),t=t.child),t;case 16:s=t.elementType;e:{switch(mo(e,t),e=t.pendingProps,f=s._init,s=f(s._payload),t.type=s,f=t.tag=um(s),e=Gt(s,e),f){case 0:t=ol(null,t,s,e,r);break e;case 1:t=wh(null,t,s,e,r);break e;case 11:t=vh(null,t,s,e,r);break e;case 14:t=gh(null,t,s,Gt(s.type,e),r);break e}throw Error(p(306,s,""))}return t;case 0:return s=t.type,f=t.pendingProps,f=t.elementType===s?f:Gt(s,f),ol(e,t,s,f,r);case 1:return s=t.type,f=t.pendingProps,f=t.elementType===s?f:Gt(s,f),wh(e,t,s,f,r);case 3:e:{if(Ch(t),e===null)throw Error(p(387));s=t.pendingProps,y=t.memoizedState,f=y.element,Bu(e,t),no(t,s,null,r);var M=t.memoizedState;if(s=M.element,y.isDehydrated)if(y={element:s,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},t.updateQueue.baseState=y,t.memoizedState=y,t.flags&256){f=ii(Error(p(423)),t),t=bh(e,t,s,r,f);break e}else if(s!==f){f=ii(Error(p(424)),t),t=bh(e,t,s,r,f);break e}else for(Nt=Br(t.stateNode.containerInfo.firstChild),At=t,qe=!0,Qt=null,r=ju(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Zs(),s===f){t=yr(e,t,r);break e}mt(e,t,s,r)}t=t.child}return t;case 5:return zu(t),e===null&&ja(t),s=t.type,f=t.pendingProps,y=e!==null?e.memoizedProps:null,M=f.children,Ra(s,f)?M=null:y!==null&&Ra(s,y)&&(t.flags|=32),xh(e,t),mt(e,t,M,r),t.child;case 6:return e===null&&ja(t),null;case 13:return kh(e,t,r);case 4:return $a(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ei(t,null,s,r):mt(e,t,s,r),t.child;case 11:return s=t.type,f=t.pendingProps,f=t.elementType===s?f:Gt(s,f),vh(e,t,s,f,r);case 7:return mt(e,t,t.pendingProps,r),t.child;case 8:return mt(e,t,t.pendingProps.children,r),t.child;case 12:return mt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,f=t.pendingProps,y=t.memoizedProps,M=f.value,Be(ro,s._currentValue),s._currentValue=M,y!==null)if(Vt(y.value,M)){if(y.children===f.children&&!wt.current){t=yr(e,t,r);break e}}else for(y=t.child,y!==null&&(y.return=t);y!==null;){var z=y.dependencies;if(z!==null){M=y.child;for(var q=z.firstContext;q!==null;){if(q.context===s){if(y.tag===1){q=gr(-1,r&-r),q.tag=2;var Z=y.updateQueue;if(Z!==null){Z=Z.shared;var ae=Z.pending;ae===null?q.next=q:(q.next=ae.next,ae.next=q),Z.pending=q}}y.lanes|=r,q=y.alternate,q!==null&&(q.lanes|=r),za(y.return,r,t),z.lanes|=r;break}q=q.next}}else if(y.tag===10)M=y.type===t.type?null:y.child;else if(y.tag===18){if(M=y.return,M===null)throw Error(p(341));M.lanes|=r,z=M.alternate,z!==null&&(z.lanes|=r),za(M,r,t),M=y.sibling}else M=y.child;if(M!==null)M.return=y;else for(M=y;M!==null;){if(M===t){M=null;break}if(y=M.sibling,y!==null){y.return=M.return,M=y;break}M=M.return}y=M}mt(e,t,f.children,r),t=t.child}return t;case 9:return f=t.type,s=t.pendingProps.children,ri(t,r),f=Ft(f),s=s(f),t.flags|=1,mt(e,t,s,r),t.child;case 14:return s=t.type,f=Gt(s,t.pendingProps),f=Gt(s.type,f),gh(e,t,s,f,r);case 15:return yh(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,f=t.pendingProps,f=t.elementType===s?f:Gt(s,f),mo(e,t),t.tag=1,Ct(s)?(e=!0,Xn(t)):e=!1,ri(t,r),uh(t,s,f),sl(t,s,f,r),al(null,t,s,!0,e,r);case 19:return Rh(e,t,r);case 22:return Sh(e,t,r)}throw Error(p(156,t.tag))};function Jh(e,t){return Pc(e,t)}function cm(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,r,s){return new cm(e,t,r,s)}function Rl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function um(e){if(typeof e=="function")return Rl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===W)return 11;if(e===re)return 14}return 2}function Gr(e,t){var r=e.alternate;return r===null?(r=Ut(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Eo(e,t,r,s,f,y){var M=2;if(s=e,typeof e=="function")Rl(e)&&(M=1);else if(typeof e=="string")M=5;else e:switch(e){case L:return Es(r.children,f,y,t);case C:M=8,f|=8;break;case T:return e=Ut(12,r,t,f|2),e.elementType=T,e.lanes=y,e;case F:return e=Ut(13,r,t,f),e.elementType=F,e.lanes=y,e;case G:return e=Ut(19,r,t,f),e.elementType=G,e.lanes=y,e;case le:return Ro(r,f,y,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:M=10;break e;case U:M=9;break e;case W:M=11;break e;case re:M=14;break e;case ne:M=16,s=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return t=Ut(M,r,t,f),t.elementType=e,t.type=s,t.lanes=y,t}function Es(e,t,r,s){return e=Ut(7,e,s,t),e.lanes=r,e}function Ro(e,t,r,s){return e=Ut(22,e,s,t),e.elementType=le,e.lanes=r,e.stateNode={isHidden:!1},e}function Ll(e,t,r){return e=Ut(6,e,null,t),e.lanes=r,e}function Dl(e,t,r){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hm(e,t,r,s,f){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ra(0),this.expirationTimes=ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ra(0),this.identifierPrefix=s,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Pl(e,t,r,s,f,y,M,z,q){return e=new hm(e,t,r,z,q),t===1?(t=1,y===!0&&(t|=8)):t=0,y=Ut(3,null,null,t),e.current=y,y.stateNode=e,y.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wa(y),e}function dm(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:b,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Yh(e){if(!e)return Hr;e=e._reactInternals;e:{if(ps(e)!==e||e.tag!==1)throw Error(p(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(p(171))}if(e.tag===1){var r=e.type;if(Ct(r))return Eu(e,r,t)}return t}function Zh(e,t,r,s,f,y,M,z,q){return e=Pl(r,s,!0,e,f,y,M,z,q),e.context=Yh(null),r=e.current,s=_t(),f=Vr(r),y=gr(s,f),y.callback=t??null,Wr(r,y,f),e.current.lanes=f,Di(e,f,s),Et(e,s),e}function Lo(e,t,r,s){var f=t.current,y=_t(),M=Vr(f);return r=Yh(r),t.context===null?t.context=r:t.pendingContext=r,t=gr(y,M),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Wr(f,t,M),e!==null&&(Yt(e,f,M,y),io(e,f,M)),M}function Do(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ed(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Tl(e,t){ed(e,t),(e=e.alternate)&&ed(e,t)}function fm(){return null}var td=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ml(e){this._internalRoot=e}Po.prototype.render=Ml.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(p(409));Lo(e,t,null,null)},Po.prototype.unmount=Ml.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cs(function(){Lo(null,e,null,null)}),t[fr]=null}};function Po(e){this._internalRoot=e}Po.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Or.length&&t!==0&&t<Or[r].priority;r++);Or.splice(r,0,e),r===0&&zc(e)}};function Al(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function To(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rd(){}function pm(e,t,r,s,f){if(f){if(typeof s=="function"){var y=s;s=function(){var Z=Do(M);y.call(Z)}}var M=Zh(t,s,e,0,null,!1,!1,"",rd);return e._reactRootContainer=M,e[fr]=M.current,Wi(e.nodeType===8?e.parentNode:e),Cs(),M}for(;f=e.lastChild;)e.removeChild(f);if(typeof s=="function"){var z=s;s=function(){var Z=Do(q);z.call(Z)}}var q=Pl(e,0,!1,null,null,!1,!1,"",rd);return e._reactRootContainer=q,e[fr]=q.current,Wi(e.nodeType===8?e.parentNode:e),Cs(function(){Lo(t,q,r,s)}),q}function Mo(e,t,r,s,f){var y=r._reactRootContainer;if(y){var M=y;if(typeof f=="function"){var z=f;f=function(){var q=Do(M);z.call(q)}}Lo(t,M,e,f)}else M=pm(r,t,e,f,s);return Do(M)}jc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Li(t.pendingLanes);r!==0&&(sa(t,r|1),Et(t,Xe()),(Te&6)===0&&(ai=Xe()+500,zr()))}break;case 13:Cs(function(){var s=vr(e,1);if(s!==null){var f=_t();Yt(s,e,1,f)}}),Tl(e,1)}},ia=function(e){if(e.tag===13){var t=vr(e,134217728);if(t!==null){var r=_t();Yt(t,e,134217728,r)}Tl(e,134217728)}},Ic=function(e){if(e.tag===13){var t=Vr(e),r=vr(e,t);if(r!==null){var s=_t();Yt(r,e,t,s)}Tl(e,t)}},Bc=function(){return je},Fc=function(e,t){var r=je;try{return je=e,t()}finally{je=r}},Xo=function(e,t,r){switch(t){case"input":if(be(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var f=Qn(s);if(!f)throw Error(p(90));fe(s),be(s,f)}}}break;case"textarea":Pr(e,r);break;case"select":t=r.value,t!=null&&rr(e,!!r.multiple,t,!1)}},Cc=bl,bc=Cs;var mm={usingClientEntryPoint:!1,Events:[Ki,Qs,Qn,xc,wc,bl]},an={findFiberByHostInstance:ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_m={bundleType:an.bundleType,version:an.version,rendererPackageName:an.rendererPackageName,rendererConfig:an.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Lc(e),e===null?null:e.stateNode},findFiberByHostInstance:an.findFiberByHostInstance||fm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ao=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ao.isDisabled&&Ao.supportsFiber)try{Dn=Ao.inject(_m),sr=Ao}catch{}}return Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mm,Rt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Al(t))throw Error(p(200));return dm(e,t,null,r)},Rt.createRoot=function(e,t){if(!Al(e))throw Error(p(299));var r=!1,s="",f=td;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=Pl(e,1,!1,null,null,r,!1,s,f),e[fr]=t.current,Wi(e.nodeType===8?e.parentNode:e),new Ml(t)},Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Lc(t),e=e===null?null:e.stateNode,e},Rt.flushSync=function(e){return Cs(e)},Rt.hydrate=function(e,t,r){if(!To(t))throw Error(p(200));return Mo(null,e,t,!0,r)},Rt.hydrateRoot=function(e,t,r){if(!Al(e))throw Error(p(405));var s=r!=null&&r.hydratedSources||null,f=!1,y="",M=td;if(r!=null&&(r.unstable_strictMode===!0&&(f=!0),r.identifierPrefix!==void 0&&(y=r.identifierPrefix),r.onRecoverableError!==void 0&&(M=r.onRecoverableError)),t=Zh(t,null,e,1,r??null,f,!1,y,M),e[fr]=t.current,Wi(e),s)for(e=0;e<s.length;e++)r=s[e],f=r._getVersion,f=f(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,f]:t.mutableSourceEagerHydrationData.push(r,f);return new Po(t)},Rt.render=function(e,t,r){if(!To(t))throw Error(p(200));return Mo(null,e,t,!1,r)},Rt.unmountComponentAtNode=function(e){if(!To(e))throw Error(p(40));return e._reactRootContainer?(Cs(function(){Mo(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0):!1},Rt.unstable_batchedUpdates=bl,Rt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!To(r))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return Mo(e,t,r,!1,s)},Rt.version="18.3.1-next-f1338f8080-20240426",Rt}var hd;function bm(){if(hd)return Il.exports;hd=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(c){console.error(c)}}return i(),Il.exports=Cm(),Il.exports}var dd;function km(){if(dd)return Oo;dd=1;var i=bm();return Oo.createRoot=i.createRoot,Oo.hydrateRoot=i.hydrateRoot,Oo}var Em=km();const Rm=Kd(Em);var Ci=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(i){return this.listeners.add(i),this.onSubscribe(),()=>{this.listeners.delete(i),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Lm={setTimeout:(i,c)=>setTimeout(i,c),clearTimeout:i=>clearTimeout(i),setInterval:(i,c)=>setInterval(i,c),clearInterval:i=>clearInterval(i)},es,ac,Od,Dm=(Od=class{constructor(){xe(this,es,Lm);xe(this,ac,!1)}setTimeoutProvider(i){me(this,es,i)}setTimeout(i,c){return $(this,es).setTimeout(i,c)}clearTimeout(i){$(this,es).clearTimeout(i)}setInterval(i,c){return $(this,es).setInterval(i,c)}clearInterval(i){$(this,es).clearInterval(i)}},es=new WeakMap,ac=new WeakMap,Od),Rs=new Dm;function Pm(i){setTimeout(i,0)}var Is=typeof window>"u"||"Deno"in globalThis;function yt(){}function Tm(i,c){return typeof i=="function"?i(c):i}function ql(i){return typeof i=="number"&&i>=0&&i!==1/0}function Vd(i,c){return Math.max(i+(c||0)-Date.now(),0)}function cs(i,c){return typeof i=="function"?i(c):i}function $t(i,c){return typeof i=="function"?i(c):i}function fd(i,c){const{type:p="all",exact:R,fetchStatus:A,predicate:j,queryKey:I,stale:l}=i;if(I){if(R){if(c.queryHash!==cc(I,c.options))return!1}else if(!pn(c.queryKey,I))return!1}if(p!=="all"){const d=c.isActive();if(p==="active"&&!d||p==="inactive"&&d)return!1}return!(typeof l=="boolean"&&c.isStale()!==l||A&&A!==c.state.fetchStatus||j&&!j(c))}function pd(i,c){const{exact:p,status:R,predicate:A,mutationKey:j}=i;if(j){if(!c.options.mutationKey)return!1;if(p){if(Bs(c.options.mutationKey)!==Bs(j))return!1}else if(!pn(c.options.mutationKey,j))return!1}return!(R&&c.state.status!==R||A&&!A(c))}function cc(i,c){return((c==null?void 0:c.queryKeyHashFn)||Bs)(i)}function Bs(i){return JSON.stringify(i,(c,p)=>Kl(p)?Object.keys(p).sort().reduce((R,A)=>(R[A]=p[A],R),{}):p)}function pn(i,c){return i===c?!0:typeof i!=typeof c?!1:i&&c&&typeof i=="object"&&typeof c=="object"?Object.keys(c).every(p=>pn(i[p],c[p])):!1}var Mm=Object.prototype.hasOwnProperty;function Qd(i,c,p=0){if(i===c)return i;if(p>500)return c;const R=md(i)&&md(c);if(!R&&!(Kl(i)&&Kl(c)))return c;const j=(R?i:Object.keys(i)).length,I=R?c:Object.keys(c),l=I.length,d=R?new Array(l):{};let v=0;for(let S=0;S<l;S++){const h=R?S:I[S],g=i[h],x=c[h];if(g===x){d[h]=g,(R?S<j:Mm.call(i,h))&&v++;continue}if(g===null||x===null||typeof g!="object"||typeof x!="object"){d[h]=x;continue}const E=Qd(g,x,p+1);d[h]=E,E===g&&v++}return j===l&&v===j?i:d}function Bo(i,c){if(!c||Object.keys(i).length!==Object.keys(c).length)return!1;for(const p in i)if(i[p]!==c[p])return!1;return!0}function md(i){return Array.isArray(i)&&i.length===Object.keys(i).length}function Kl(i){if(!_d(i))return!1;const c=i.constructor;if(c===void 0)return!0;const p=c.prototype;return!(!_d(p)||!p.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(i)!==Object.prototype)}function _d(i){return Object.prototype.toString.call(i)==="[object Object]"}function Am(i){return new Promise(c=>{Rs.setTimeout(c,i)})}function Vl(i,c,p){return typeof p.structuralSharing=="function"?p.structuralSharing(i,c):p.structuralSharing!==!1?Qd(i,c):c}function Nm(i,c,p=0){const R=[...i,c];return p&&R.length>p?R.slice(1):R}function Om(i,c,p=0){const R=[c,...i];return p&&R.length>p?R.slice(0,-1):R}var uc=Symbol();function Gd(i,c){return!i.queryFn&&(c!=null&&c.initialPromise)?()=>c.initialPromise:!i.queryFn||i.queryFn===uc?()=>Promise.reject(new Error(`Missing queryFn: '${i.queryHash}'`)):i.queryFn}function hc(i,c){return typeof i=="function"?i(...c):!!i}function jm(i,c,p){let R=!1,A;return Object.defineProperty(i,"signal",{enumerable:!0,get:()=>(A??(A=c()),R||(R=!0,A.aborted?p():A.addEventListener("abort",p,{once:!0})),A)}),i}var Ls,ts,hi,jd,Im=(jd=class extends Ci{constructor(){super();xe(this,Ls);xe(this,ts);xe(this,hi);me(this,hi,c=>{if(!Is&&window.addEventListener){const p=()=>c();return window.addEventListener("visibilitychange",p,!1),()=>{window.removeEventListener("visibilitychange",p)}}})}onSubscribe(){$(this,ts)||this.setEventListener($(this,hi))}onUnsubscribe(){var c;this.hasListeners()||((c=$(this,ts))==null||c.call(this),me(this,ts,void 0))}setEventListener(c){var p;me(this,hi,c),(p=$(this,ts))==null||p.call(this),me(this,ts,c(R=>{typeof R=="boolean"?this.setFocused(R):this.onFocus()}))}setFocused(c){$(this,Ls)!==c&&(me(this,Ls,c),this.onFocus())}onFocus(){const c=this.isFocused();this.listeners.forEach(p=>{p(c)})}isFocused(){var c;return typeof $(this,Ls)=="boolean"?$(this,Ls):((c=globalThis.document)==null?void 0:c.visibilityState)!=="hidden"}},Ls=new WeakMap,ts=new WeakMap,hi=new WeakMap,jd),dc=new Im;function Ql(){let i,c;const p=new Promise((A,j)=>{i=A,c=j});p.status="pending",p.catch(()=>{});function R(A){Object.assign(p,A),delete p.resolve,delete p.reject}return p.resolve=A=>{R({status:"fulfilled",value:A}),i(A)},p.reject=A=>{R({status:"rejected",reason:A}),c(A)},p}var Bm=Pm;function Fm(){let i=[],c=0,p=l=>{l()},R=l=>{l()},A=Bm;const j=l=>{c?i.push(l):A(()=>{p(l)})},I=()=>{const l=i;i=[],l.length&&A(()=>{R(()=>{l.forEach(d=>{p(d)})})})};return{batch:l=>{let d;c++;try{d=l()}finally{c--,c||I()}return d},batchCalls:l=>(...d)=>{j(()=>{l(...d)})},schedule:j,setNotifyFunction:l=>{p=l},setBatchNotifyFunction:l=>{R=l},setScheduler:l=>{A=l}}}var tt=Fm(),di,rs,fi,Id,Hm=(Id=class extends Ci{constructor(){super();xe(this,di,!0);xe(this,rs);xe(this,fi);me(this,fi,c=>{if(!Is&&window.addEventListener){const p=()=>c(!0),R=()=>c(!1);return window.addEventListener("online",p,!1),window.addEventListener("offline",R,!1),()=>{window.removeEventListener("online",p),window.removeEventListener("offline",R)}}})}onSubscribe(){$(this,rs)||this.setEventListener($(this,fi))}onUnsubscribe(){var c;this.hasListeners()||((c=$(this,rs))==null||c.call(this),me(this,rs,void 0))}setEventListener(c){var p;me(this,fi,c),(p=$(this,rs))==null||p.call(this),me(this,rs,c(this.setOnline.bind(this)))}setOnline(c){$(this,di)!==c&&(me(this,di,c),this.listeners.forEach(R=>{R(c)}))}isOnline(){return $(this,di)}},di=new WeakMap,rs=new WeakMap,fi=new WeakMap,Id),Fo=new Hm;function zm(i){return Math.min(1e3*2**i,3e4)}function Xd(i){return(i??"online")==="online"?Fo.isOnline():!0}var Gl=class extends Error{constructor(i){super("CancelledError"),this.revert=i==null?void 0:i.revert,this.silent=i==null?void 0:i.silent}};function Jd(i){let c=!1,p=0,R;const A=Ql(),j=()=>A.status!=="pending",I=m=>{var o;if(!j()){const a=new Gl(m);g(a),(o=i.onCancel)==null||o.call(i,a)}},l=()=>{c=!0},d=()=>{c=!1},v=()=>dc.isFocused()&&(i.networkMode==="always"||Fo.isOnline())&&i.canRun(),S=()=>Xd(i.networkMode)&&i.canRun(),h=m=>{j()||(R==null||R(),A.resolve(m))},g=m=>{j()||(R==null||R(),A.reject(m))},x=()=>new Promise(m=>{var o;R=a=>{(j()||v())&&m(a)},(o=i.onPause)==null||o.call(i)}).then(()=>{var m;R=void 0,j()||(m=i.onContinue)==null||m.call(i)}),E=()=>{if(j())return;let m;const o=p===0?i.initialPromise:void 0;try{m=o??i.fn()}catch(a){m=Promise.reject(a)}Promise.resolve(m).then(h).catch(a=>{var b;if(j())return;const n=i.retry??(Is?0:3),u=i.retryDelay??zm,_=typeof u=="function"?u(p,a):u,k=n===!0||typeof n=="number"&&p<n||typeof n=="function"&&n(p,a);if(c||!k){g(a);return}p++,(b=i.onFail)==null||b.call(i,p,a),Am(_).then(()=>v()?void 0:x()).then(()=>{c?g(a):E()})})};return{promise:A,status:()=>A.status,cancel:I,continue:()=>(R==null||R(),A),cancelRetry:l,continueRetry:d,canStart:S,start:()=>(S()?E():x().then(E),A)}}var Ds,Bd,Yd=(Bd=class{constructor(){xe(this,Ds)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ql(this.gcTime)&&me(this,Ds,Rs.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(i){this.gcTime=Math.max(this.gcTime||0,i??(Is?1/0:300*1e3))}clearGcTimeout(){$(this,Ds)&&(Rs.clearTimeout($(this,Ds)),me(this,Ds,void 0))}},Ds=new WeakMap,Bd),Ps,pi,Wt,Ts,nt,vn,Ms,er,wr,Fd,Um=(Fd=class extends Yd{constructor(c){super();xe(this,er);xe(this,Ps);xe(this,pi);xe(this,Wt);xe(this,Ts);xe(this,nt);xe(this,vn);xe(this,Ms);me(this,Ms,!1),me(this,vn,c.defaultOptions),this.setOptions(c.options),this.observers=[],me(this,Ts,c.client),me(this,Wt,$(this,Ts).getQueryCache()),this.queryKey=c.queryKey,this.queryHash=c.queryHash,me(this,Ps,gd(this.options)),this.state=c.state??$(this,Ps),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var c;return(c=$(this,nt))==null?void 0:c.promise}setOptions(c){if(this.options={...$(this,vn),...c},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const p=gd(this.options);p.data!==void 0&&(this.setState(vd(p.data,p.dataUpdatedAt)),me(this,Ps,p))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Wt).remove(this)}setData(c,p){const R=Vl(this.state.data,c,this.options);return Re(this,er,wr).call(this,{data:R,type:"success",dataUpdatedAt:p==null?void 0:p.updatedAt,manual:p==null?void 0:p.manual}),R}setState(c,p){Re(this,er,wr).call(this,{type:"setState",state:c,setStateOptions:p})}cancel(c){var R,A;const p=(R=$(this,nt))==null?void 0:R.promise;return(A=$(this,nt))==null||A.cancel(c),p?p.then(yt).catch(yt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,Ps))}isActive(){return this.observers.some(c=>$t(c.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===uc||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(c=>cs(c.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(c=>c.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(c=0){return this.state.data===void 0?!0:c==="static"?!1:this.state.isInvalidated?!0:!Vd(this.state.dataUpdatedAt,c)}onFocus(){var p;const c=this.observers.find(R=>R.shouldFetchOnWindowFocus());c==null||c.refetch({cancelRefetch:!1}),(p=$(this,nt))==null||p.continue()}onOnline(){var p;const c=this.observers.find(R=>R.shouldFetchOnReconnect());c==null||c.refetch({cancelRefetch:!1}),(p=$(this,nt))==null||p.continue()}addObserver(c){this.observers.includes(c)||(this.observers.push(c),this.clearGcTimeout(),$(this,Wt).notify({type:"observerAdded",query:this,observer:c}))}removeObserver(c){this.observers.includes(c)&&(this.observers=this.observers.filter(p=>p!==c),this.observers.length||($(this,nt)&&($(this,Ms)?$(this,nt).cancel({revert:!0}):$(this,nt).cancelRetry()),this.scheduleGc()),$(this,Wt).notify({type:"observerRemoved",query:this,observer:c}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Re(this,er,wr).call(this,{type:"invalidate"})}async fetch(c,p){var d,v,S,h,g,x,E,m,o,a,n,u;if(this.state.fetchStatus!=="idle"&&((d=$(this,nt))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(p!=null&&p.cancelRefetch))this.cancel({silent:!0});else if($(this,nt))return $(this,nt).continueRetry(),$(this,nt).promise}if(c&&this.setOptions(c),!this.options.queryFn){const _=this.observers.find(k=>k.options.queryFn);_&&this.setOptions(_.options)}const R=new AbortController,A=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(me(this,Ms,!0),R.signal)})},j=()=>{const _=Gd(this.options,p),b=(()=>{const L={client:$(this,Ts),queryKey:this.queryKey,meta:this.meta};return A(L),L})();return me(this,Ms,!1),this.options.persister?this.options.persister(_,b,this):_(b)},l=(()=>{const _={fetchOptions:p,options:this.options,queryKey:this.queryKey,client:$(this,Ts),state:this.state,fetchFn:j};return A(_),_})();(v=this.options.behavior)==null||v.onFetch(l,this),me(this,pi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((S=l.fetchOptions)==null?void 0:S.meta))&&Re(this,er,wr).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),me(this,nt,Jd({initialPromise:p==null?void 0:p.initialPromise,fn:l.fetchFn,onCancel:_=>{_ instanceof Gl&&_.revert&&this.setState({...$(this,pi),fetchStatus:"idle"}),R.abort()},onFail:(_,k)=>{Re(this,er,wr).call(this,{type:"failed",failureCount:_,error:k})},onPause:()=>{Re(this,er,wr).call(this,{type:"pause"})},onContinue:()=>{Re(this,er,wr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const _=await $(this,nt).start();if(_===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(_),(x=(g=$(this,Wt).config).onSuccess)==null||x.call(g,_,this),(m=(E=$(this,Wt).config).onSettled)==null||m.call(E,_,this.state.error,this),_}catch(_){if(_ instanceof Gl){if(_.silent)return $(this,nt).promise;if(_.revert){if(this.state.data===void 0)throw _;return this.state.data}}throw Re(this,er,wr).call(this,{type:"error",error:_}),(a=(o=$(this,Wt).config).onError)==null||a.call(o,_,this),(u=(n=$(this,Wt).config).onSettled)==null||u.call(n,this.state.data,_,this),_}finally{this.scheduleGc()}}},Ps=new WeakMap,pi=new WeakMap,Wt=new WeakMap,Ts=new WeakMap,nt=new WeakMap,vn=new WeakMap,Ms=new WeakMap,er=new WeakSet,wr=function(c){const p=R=>{switch(c.type){case"failed":return{...R,fetchFailureCount:c.failureCount,fetchFailureReason:c.error};case"pause":return{...R,fetchStatus:"paused"};case"continue":return{...R,fetchStatus:"fetching"};case"fetch":return{...R,...Zd(R.data,this.options),fetchMeta:c.meta??null};case"success":const A={...R,...vd(c.data,c.dataUpdatedAt),dataUpdateCount:R.dataUpdateCount+1,...!c.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return me(this,pi,c.manual?A:void 0),A;case"error":const j=c.error;return{...R,error:j,errorUpdateCount:R.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:R.fetchFailureCount+1,fetchFailureReason:j,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...R,isInvalidated:!0};case"setState":return{...R,...c.state}}};this.state=p(this.state),tt.batch(()=>{this.observers.forEach(R=>{R.onQueryUpdate()}),$(this,Wt).notify({query:this,type:"updated",action:c})})},Fd);function Zd(i,c){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Xd(c.networkMode)?"fetching":"paused",...i===void 0&&{error:null,status:"pending"}}}function vd(i,c){return{data:i,dataUpdatedAt:c??Date.now(),error:null,isInvalidated:!1,status:"success"}}function gd(i){const c=typeof i.initialData=="function"?i.initialData():i.initialData,p=c!==void 0,R=p?typeof i.initialDataUpdatedAt=="function"?i.initialDataUpdatedAt():i.initialDataUpdatedAt:0;return{data:c,dataUpdateCount:0,dataUpdatedAt:p?R??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:p?"success":"pending",fetchStatus:"idle"}}var Lt,Pe,gn,vt,As,mi,Cr,ss,yn,_i,vi,Ns,Os,is,gi,Oe,dn,Xl,Jl,Yl,Zl,ec,tc,rc,ef,Hd,Wm=(Hd=class extends Ci{constructor(c,p){super();xe(this,Oe);xe(this,Lt);xe(this,Pe);xe(this,gn);xe(this,vt);xe(this,As);xe(this,mi);xe(this,Cr);xe(this,ss);xe(this,yn);xe(this,_i);xe(this,vi);xe(this,Ns);xe(this,Os);xe(this,is);xe(this,gi,new Set);this.options=p,me(this,Lt,c),me(this,ss,null),me(this,Cr,Ql()),this.bindMethods(),this.setOptions(p)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&($(this,Pe).addObserver(this),yd($(this,Pe),this.options)?Re(this,Oe,dn).call(this):this.updateResult(),Re(this,Oe,Zl).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return sc($(this,Pe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return sc($(this,Pe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Re(this,Oe,ec).call(this),Re(this,Oe,tc).call(this),$(this,Pe).removeObserver(this)}setOptions(c){const p=this.options,R=$(this,Pe);if(this.options=$(this,Lt).defaultQueryOptions(c),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof $t(this.options.enabled,$(this,Pe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Re(this,Oe,rc).call(this),$(this,Pe).setOptions(this.options),p._defaulted&&!Bo(this.options,p)&&$(this,Lt).getQueryCache().notify({type:"observerOptionsUpdated",query:$(this,Pe),observer:this});const A=this.hasListeners();A&&Sd($(this,Pe),R,this.options,p)&&Re(this,Oe,dn).call(this),this.updateResult(),A&&($(this,Pe)!==R||$t(this.options.enabled,$(this,Pe))!==$t(p.enabled,$(this,Pe))||cs(this.options.staleTime,$(this,Pe))!==cs(p.staleTime,$(this,Pe)))&&Re(this,Oe,Xl).call(this);const j=Re(this,Oe,Jl).call(this);A&&($(this,Pe)!==R||$t(this.options.enabled,$(this,Pe))!==$t(p.enabled,$(this,Pe))||j!==$(this,is))&&Re(this,Oe,Yl).call(this,j)}getOptimisticResult(c){const p=$(this,Lt).getQueryCache().build($(this,Lt),c),R=this.createResult(p,c);return qm(this,R)&&(me(this,vt,R),me(this,mi,this.options),me(this,As,$(this,Pe).state)),R}getCurrentResult(){return $(this,vt)}trackResult(c,p){return new Proxy(c,{get:(R,A)=>(this.trackProp(A),p==null||p(A),A==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&$(this,Cr).status==="pending"&&$(this,Cr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(R,A))})}trackProp(c){$(this,gi).add(c)}getCurrentQuery(){return $(this,Pe)}refetch({...c}={}){return this.fetch({...c})}fetchOptimistic(c){const p=$(this,Lt).defaultQueryOptions(c),R=$(this,Lt).getQueryCache().build($(this,Lt),p);return R.fetch().then(()=>this.createResult(R,p))}fetch(c){return Re(this,Oe,dn).call(this,{...c,cancelRefetch:c.cancelRefetch??!0}).then(()=>(this.updateResult(),$(this,vt)))}createResult(c,p){var T;const R=$(this,Pe),A=this.options,j=$(this,vt),I=$(this,As),l=$(this,mi),v=c!==R?c.state:$(this,gn),{state:S}=c;let h={...S},g=!1,x;if(p._optimisticResults){const H=this.hasListeners(),U=!H&&yd(c,p),W=H&&Sd(c,R,p,A);(U||W)&&(h={...h,...Zd(S.data,c.options)}),p._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:E,errorUpdatedAt:m,status:o}=h;x=h.data;let a=!1;if(p.placeholderData!==void 0&&x===void 0&&o==="pending"){let H;j!=null&&j.isPlaceholderData&&p.placeholderData===(l==null?void 0:l.placeholderData)?(H=j.data,a=!0):H=typeof p.placeholderData=="function"?p.placeholderData((T=$(this,vi))==null?void 0:T.state.data,$(this,vi)):p.placeholderData,H!==void 0&&(o="success",x=Vl(j==null?void 0:j.data,H,p),g=!0)}if(p.select&&x!==void 0&&!a)if(j&&x===(I==null?void 0:I.data)&&p.select===$(this,yn))x=$(this,_i);else try{me(this,yn,p.select),x=p.select(x),x=Vl(j==null?void 0:j.data,x,p),me(this,_i,x),me(this,ss,null)}catch(H){me(this,ss,H)}$(this,ss)&&(E=$(this,ss),x=$(this,_i),m=Date.now(),o="error");const n=h.fetchStatus==="fetching",u=o==="pending",_=o==="error",k=u&&n,b=x!==void 0,C={status:o,fetchStatus:h.fetchStatus,isPending:u,isSuccess:o==="success",isError:_,isInitialLoading:k,isLoading:k,data:x,dataUpdatedAt:h.dataUpdatedAt,error:E,errorUpdatedAt:m,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>v.dataUpdateCount||h.errorUpdateCount>v.errorUpdateCount,isFetching:n,isRefetching:n&&!u,isLoadingError:_&&!b,isPaused:h.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:_&&b,isStale:fc(c,p),refetch:this.refetch,promise:$(this,Cr),isEnabled:$t(p.enabled,c)!==!1};if(this.options.experimental_prefetchInRender){const H=C.data!==void 0,U=C.status==="error"&&!H,W=re=>{U?re.reject(C.error):H&&re.resolve(C.data)},F=()=>{const re=me(this,Cr,C.promise=Ql());W(re)},G=$(this,Cr);switch(G.status){case"pending":c.queryHash===R.queryHash&&W(G);break;case"fulfilled":(U||C.data!==G.value)&&F();break;case"rejected":(!U||C.error!==G.reason)&&F();break}}return C}updateResult(){const c=$(this,vt),p=this.createResult($(this,Pe),this.options);if(me(this,As,$(this,Pe).state),me(this,mi,this.options),$(this,As).data!==void 0&&me(this,vi,$(this,Pe)),Bo(p,c))return;me(this,vt,p);const R=()=>{if(!c)return!0;const{notifyOnChangeProps:A}=this.options,j=typeof A=="function"?A():A;if(j==="all"||!j&&!$(this,gi).size)return!0;const I=new Set(j??$(this,gi));return this.options.throwOnError&&I.add("error"),Object.keys($(this,vt)).some(l=>{const d=l;return $(this,vt)[d]!==c[d]&&I.has(d)})};Re(this,Oe,ef).call(this,{listeners:R()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Re(this,Oe,Zl).call(this)}},Lt=new WeakMap,Pe=new WeakMap,gn=new WeakMap,vt=new WeakMap,As=new WeakMap,mi=new WeakMap,Cr=new WeakMap,ss=new WeakMap,yn=new WeakMap,_i=new WeakMap,vi=new WeakMap,Ns=new WeakMap,Os=new WeakMap,is=new WeakMap,gi=new WeakMap,Oe=new WeakSet,dn=function(c){Re(this,Oe,rc).call(this);let p=$(this,Pe).fetch(this.options,c);return c!=null&&c.throwOnError||(p=p.catch(yt)),p},Xl=function(){Re(this,Oe,ec).call(this);const c=cs(this.options.staleTime,$(this,Pe));if(Is||$(this,vt).isStale||!ql(c))return;const R=Vd($(this,vt).dataUpdatedAt,c)+1;me(this,Ns,Rs.setTimeout(()=>{$(this,vt).isStale||this.updateResult()},R))},Jl=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval($(this,Pe)):this.options.refetchInterval)??!1},Yl=function(c){Re(this,Oe,tc).call(this),me(this,is,c),!(Is||$t(this.options.enabled,$(this,Pe))===!1||!ql($(this,is))||$(this,is)===0)&&me(this,Os,Rs.setInterval(()=>{(this.options.refetchIntervalInBackground||dc.isFocused())&&Re(this,Oe,dn).call(this)},$(this,is)))},Zl=function(){Re(this,Oe,Xl).call(this),Re(this,Oe,Yl).call(this,Re(this,Oe,Jl).call(this))},ec=function(){$(this,Ns)&&(Rs.clearTimeout($(this,Ns)),me(this,Ns,void 0))},tc=function(){$(this,Os)&&(Rs.clearInterval($(this,Os)),me(this,Os,void 0))},rc=function(){const c=$(this,Lt).getQueryCache().build($(this,Lt),this.options);if(c===$(this,Pe))return;const p=$(this,Pe);me(this,Pe,c),me(this,gn,c.state),this.hasListeners()&&(p==null||p.removeObserver(this),c.addObserver(this))},ef=function(c){tt.batch(()=>{c.listeners&&this.listeners.forEach(p=>{p($(this,vt))}),$(this,Lt).getQueryCache().notify({query:$(this,Pe),type:"observerResultsUpdated"})})},Hd);function $m(i,c){return $t(c.enabled,i)!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&c.retryOnMount===!1)}function yd(i,c){return $m(i,c)||i.state.data!==void 0&&sc(i,c,c.refetchOnMount)}function sc(i,c,p){if($t(c.enabled,i)!==!1&&cs(c.staleTime,i)!=="static"){const R=typeof p=="function"?p(i):p;return R==="always"||R!==!1&&fc(i,c)}return!1}function Sd(i,c,p,R){return(i!==c||$t(R.enabled,i)===!1)&&(!p.suspense||i.state.status!=="error")&&fc(i,p)}function fc(i,c){return $t(c.enabled,i)!==!1&&i.isStaleByTime(cs(c.staleTime,i))}function qm(i,c){return!Bo(i.getCurrentResult(),c)}function xd(i){return{onFetch:(c,p)=>{var S,h,g,x,E;const R=c.options,A=(g=(h=(S=c.fetchOptions)==null?void 0:S.meta)==null?void 0:h.fetchMore)==null?void 0:g.direction,j=((x=c.state.data)==null?void 0:x.pages)||[],I=((E=c.state.data)==null?void 0:E.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const v=async()=>{let m=!1;const o=u=>{jm(u,()=>c.signal,()=>m=!0)},a=Gd(c.options,c.fetchOptions),n=async(u,_,k)=>{if(m)return Promise.reject();if(_==null&&u.pages.length)return Promise.resolve(u);const L=(()=>{const U={client:c.client,queryKey:c.queryKey,pageParam:_,direction:k?"backward":"forward",meta:c.options.meta};return o(U),U})(),C=await a(L),{maxPages:T}=c.options,H=k?Om:Nm;return{pages:H(u.pages,C,T),pageParams:H(u.pageParams,_,T)}};if(A&&j.length){const u=A==="backward",_=u?Km:wd,k={pages:j,pageParams:I},b=_(R,k);l=await n(k,b,u)}else{const u=i??j.length;do{const _=d===0?I[0]??R.initialPageParam:wd(R,l);if(d>0&&_==null)break;l=await n(l,_),d++}while(d<u)}return l};c.options.persister?c.fetchFn=()=>{var m,o;return(o=(m=c.options).persister)==null?void 0:o.call(m,v,{client:c.client,queryKey:c.queryKey,meta:c.options.meta,signal:c.signal},p)}:c.fetchFn=v}}}function wd(i,{pages:c,pageParams:p}){const R=c.length-1;return c.length>0?i.getNextPageParam(c[R],c,p[R],p):void 0}function Km(i,{pages:c,pageParams:p}){var R;return c.length>0?(R=i.getPreviousPageParam)==null?void 0:R.call(i,c[0],c,p[0],p):void 0}var Sn,lr,ft,js,cr,Zr,zd,Vm=(zd=class extends Yd{constructor(c){super();xe(this,cr);xe(this,Sn);xe(this,lr);xe(this,ft);xe(this,js);me(this,Sn,c.client),this.mutationId=c.mutationId,me(this,ft,c.mutationCache),me(this,lr,[]),this.state=c.state||tf(),this.setOptions(c.options),this.scheduleGc()}setOptions(c){this.options=c,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(c){$(this,lr).includes(c)||($(this,lr).push(c),this.clearGcTimeout(),$(this,ft).notify({type:"observerAdded",mutation:this,observer:c}))}removeObserver(c){me(this,lr,$(this,lr).filter(p=>p!==c)),this.scheduleGc(),$(this,ft).notify({type:"observerRemoved",mutation:this,observer:c})}optionalRemove(){$(this,lr).length||(this.state.status==="pending"?this.scheduleGc():$(this,ft).remove(this))}continue(){var c;return((c=$(this,js))==null?void 0:c.continue())??this.execute(this.state.variables)}async execute(c){var I,l,d,v,S,h,g,x,E,m,o,a,n,u,_,k,b,L;const p=()=>{Re(this,cr,Zr).call(this,{type:"continue"})},R={client:$(this,Sn),meta:this.options.meta,mutationKey:this.options.mutationKey};me(this,js,Jd({fn:()=>this.options.mutationFn?this.options.mutationFn(c,R):Promise.reject(new Error("No mutationFn found")),onFail:(C,T)=>{Re(this,cr,Zr).call(this,{type:"failed",failureCount:C,error:T})},onPause:()=>{Re(this,cr,Zr).call(this,{type:"pause"})},onContinue:p,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,ft).canRun(this)}));const A=this.state.status==="pending",j=!$(this,js).canStart();try{if(A)p();else{Re(this,cr,Zr).call(this,{type:"pending",variables:c,isPaused:j}),$(this,ft).config.onMutate&&await $(this,ft).config.onMutate(c,this,R);const T=await((l=(I=this.options).onMutate)==null?void 0:l.call(I,c,R));T!==this.state.context&&Re(this,cr,Zr).call(this,{type:"pending",context:T,variables:c,isPaused:j})}const C=await $(this,js).start();return await((v=(d=$(this,ft).config).onSuccess)==null?void 0:v.call(d,C,c,this.state.context,this,R)),await((h=(S=this.options).onSuccess)==null?void 0:h.call(S,C,c,this.state.context,R)),await((x=(g=$(this,ft).config).onSettled)==null?void 0:x.call(g,C,null,this.state.variables,this.state.context,this,R)),await((m=(E=this.options).onSettled)==null?void 0:m.call(E,C,null,c,this.state.context,R)),Re(this,cr,Zr).call(this,{type:"success",data:C}),C}catch(C){try{await((a=(o=$(this,ft).config).onError)==null?void 0:a.call(o,C,c,this.state.context,this,R))}catch(T){Promise.reject(T)}try{await((u=(n=this.options).onError)==null?void 0:u.call(n,C,c,this.state.context,R))}catch(T){Promise.reject(T)}try{await((k=(_=$(this,ft).config).onSettled)==null?void 0:k.call(_,void 0,C,this.state.variables,this.state.context,this,R))}catch(T){Promise.reject(T)}try{await((L=(b=this.options).onSettled)==null?void 0:L.call(b,void 0,C,c,this.state.context,R))}catch(T){Promise.reject(T)}throw Re(this,cr,Zr).call(this,{type:"error",error:C}),C}finally{$(this,ft).runNext(this)}}},Sn=new WeakMap,lr=new WeakMap,ft=new WeakMap,js=new WeakMap,cr=new WeakSet,Zr=function(c){const p=R=>{switch(c.type){case"failed":return{...R,failureCount:c.failureCount,failureReason:c.error};case"pause":return{...R,isPaused:!0};case"continue":return{...R,isPaused:!1};case"pending":return{...R,context:c.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:c.isPaused,status:"pending",variables:c.variables,submittedAt:Date.now()};case"success":return{...R,data:c.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...R,data:void 0,error:c.error,failureCount:R.failureCount+1,failureReason:c.error,isPaused:!1,status:"error"}}};this.state=p(this.state),tt.batch(()=>{$(this,lr).forEach(R=>{R.onMutationUpdate(c)}),$(this,ft).notify({mutation:this,type:"updated",action:c})})},zd);function tf(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var br,tr,xn,Ud,Qm=(Ud=class extends Ci{constructor(c={}){super();xe(this,br);xe(this,tr);xe(this,xn);this.config=c,me(this,br,new Set),me(this,tr,new Map),me(this,xn,0)}build(c,p,R){const A=new Vm({client:c,mutationCache:this,mutationId:++No(this,xn)._,options:c.defaultMutationOptions(p),state:R});return this.add(A),A}add(c){$(this,br).add(c);const p=jo(c);if(typeof p=="string"){const R=$(this,tr).get(p);R?R.push(c):$(this,tr).set(p,[c])}this.notify({type:"added",mutation:c})}remove(c){if($(this,br).delete(c)){const p=jo(c);if(typeof p=="string"){const R=$(this,tr).get(p);if(R)if(R.length>1){const A=R.indexOf(c);A!==-1&&R.splice(A,1)}else R[0]===c&&$(this,tr).delete(p)}}this.notify({type:"removed",mutation:c})}canRun(c){const p=jo(c);if(typeof p=="string"){const R=$(this,tr).get(p),A=R==null?void 0:R.find(j=>j.state.status==="pending");return!A||A===c}else return!0}runNext(c){var R;const p=jo(c);if(typeof p=="string"){const A=(R=$(this,tr).get(p))==null?void 0:R.find(j=>j!==c&&j.state.isPaused);return(A==null?void 0:A.continue())??Promise.resolve()}else return Promise.resolve()}clear(){tt.batch(()=>{$(this,br).forEach(c=>{this.notify({type:"removed",mutation:c})}),$(this,br).clear(),$(this,tr).clear()})}getAll(){return Array.from($(this,br))}find(c){const p={exact:!0,...c};return this.getAll().find(R=>pd(p,R))}findAll(c={}){return this.getAll().filter(p=>pd(c,p))}notify(c){tt.batch(()=>{this.listeners.forEach(p=>{p(c)})})}resumePausedMutations(){const c=this.getAll().filter(p=>p.state.isPaused);return tt.batch(()=>Promise.all(c.map(p=>p.continue().catch(yt))))}},br=new WeakMap,tr=new WeakMap,xn=new WeakMap,Ud);function jo(i){var c;return(c=i.options.scope)==null?void 0:c.id}var kr,ns,Dt,Er,Rr,Io,ic,Wd,Gm=(Wd=class extends Ci{constructor(p,R){super();xe(this,Rr);xe(this,kr);xe(this,ns);xe(this,Dt);xe(this,Er);me(this,kr,p),this.setOptions(R),this.bindMethods(),Re(this,Rr,Io).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(p){var A;const R=this.options;this.options=$(this,kr).defaultMutationOptions(p),Bo(this.options,R)||$(this,kr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:$(this,Dt),observer:this}),R!=null&&R.mutationKey&&this.options.mutationKey&&Bs(R.mutationKey)!==Bs(this.options.mutationKey)?this.reset():((A=$(this,Dt))==null?void 0:A.state.status)==="pending"&&$(this,Dt).setOptions(this.options)}onUnsubscribe(){var p;this.hasListeners()||(p=$(this,Dt))==null||p.removeObserver(this)}onMutationUpdate(p){Re(this,Rr,Io).call(this),Re(this,Rr,ic).call(this,p)}getCurrentResult(){return $(this,ns)}reset(){var p;(p=$(this,Dt))==null||p.removeObserver(this),me(this,Dt,void 0),Re(this,Rr,Io).call(this),Re(this,Rr,ic).call(this)}mutate(p,R){var A;return me(this,Er,R),(A=$(this,Dt))==null||A.removeObserver(this),me(this,Dt,$(this,kr).getMutationCache().build($(this,kr),this.options)),$(this,Dt).addObserver(this),$(this,Dt).execute(p)}},kr=new WeakMap,ns=new WeakMap,Dt=new WeakMap,Er=new WeakMap,Rr=new WeakSet,Io=function(){var R;const p=((R=$(this,Dt))==null?void 0:R.state)??tf();me(this,ns,{...p,isPending:p.status==="pending",isSuccess:p.status==="success",isError:p.status==="error",isIdle:p.status==="idle",mutate:this.mutate,reset:this.reset})},ic=function(p){tt.batch(()=>{var R,A,j,I,l,d,v,S;if($(this,Er)&&this.hasListeners()){const h=$(this,ns).variables,g=$(this,ns).context,x={client:$(this,kr),meta:this.options.meta,mutationKey:this.options.mutationKey};if((p==null?void 0:p.type)==="success"){try{(A=(R=$(this,Er)).onSuccess)==null||A.call(R,p.data,h,g,x)}catch(E){Promise.reject(E)}try{(I=(j=$(this,Er)).onSettled)==null||I.call(j,p.data,null,h,g,x)}catch(E){Promise.reject(E)}}else if((p==null?void 0:p.type)==="error"){try{(d=(l=$(this,Er)).onError)==null||d.call(l,p.error,h,g,x)}catch(E){Promise.reject(E)}try{(S=(v=$(this,Er)).onSettled)==null||S.call(v,void 0,p.error,h,g,x)}catch(E){Promise.reject(E)}}}this.listeners.forEach(h=>{h($(this,ns))})})},Wd),ur,$d,Xm=($d=class extends Ci{constructor(c={}){super();xe(this,ur);this.config=c,me(this,ur,new Map)}build(c,p,R){const A=p.queryKey,j=p.queryHash??cc(A,p);let I=this.get(j);return I||(I=new Um({client:c,queryKey:A,queryHash:j,options:c.defaultQueryOptions(p),state:R,defaultOptions:c.getQueryDefaults(A)}),this.add(I)),I}add(c){$(this,ur).has(c.queryHash)||($(this,ur).set(c.queryHash,c),this.notify({type:"added",query:c}))}remove(c){const p=$(this,ur).get(c.queryHash);p&&(c.destroy(),p===c&&$(this,ur).delete(c.queryHash),this.notify({type:"removed",query:c}))}clear(){tt.batch(()=>{this.getAll().forEach(c=>{this.remove(c)})})}get(c){return $(this,ur).get(c)}getAll(){return[...$(this,ur).values()]}find(c){const p={exact:!0,...c};return this.getAll().find(R=>fd(p,R))}findAll(c={}){const p=this.getAll();return Object.keys(c).length>0?p.filter(R=>fd(c,R)):p}notify(c){tt.batch(()=>{this.listeners.forEach(p=>{p(c)})})}onFocus(){tt.batch(()=>{this.getAll().forEach(c=>{c.onFocus()})})}onOnline(){tt.batch(()=>{this.getAll().forEach(c=>{c.onOnline()})})}},ur=new WeakMap,$d),Ge,os,as,yi,Si,ls,xi,wi,qd,Jm=(qd=class{constructor(i={}){xe(this,Ge);xe(this,os);xe(this,as);xe(this,yi);xe(this,Si);xe(this,ls);xe(this,xi);xe(this,wi);me(this,Ge,i.queryCache||new Xm),me(this,os,i.mutationCache||new Qm),me(this,as,i.defaultOptions||{}),me(this,yi,new Map),me(this,Si,new Map),me(this,ls,0)}mount(){No(this,ls)._++,$(this,ls)===1&&(me(this,xi,dc.subscribe(async i=>{i&&(await this.resumePausedMutations(),$(this,Ge).onFocus())})),me(this,wi,Fo.subscribe(async i=>{i&&(await this.resumePausedMutations(),$(this,Ge).onOnline())})))}unmount(){var i,c;No(this,ls)._--,$(this,ls)===0&&((i=$(this,xi))==null||i.call(this),me(this,xi,void 0),(c=$(this,wi))==null||c.call(this),me(this,wi,void 0))}isFetching(i){return $(this,Ge).findAll({...i,fetchStatus:"fetching"}).length}isMutating(i){return $(this,os).findAll({...i,status:"pending"}).length}getQueryData(i){var p;const c=this.defaultQueryOptions({queryKey:i});return(p=$(this,Ge).get(c.queryHash))==null?void 0:p.state.data}ensureQueryData(i){const c=this.defaultQueryOptions(i),p=$(this,Ge).build(this,c),R=p.state.data;return R===void 0?this.fetchQuery(i):(i.revalidateIfStale&&p.isStaleByTime(cs(c.staleTime,p))&&this.prefetchQuery(c),Promise.resolve(R))}getQueriesData(i){return $(this,Ge).findAll(i).map(({queryKey:c,state:p})=>{const R=p.data;return[c,R]})}setQueryData(i,c,p){const R=this.defaultQueryOptions({queryKey:i}),A=$(this,Ge).get(R.queryHash),j=A==null?void 0:A.state.data,I=Tm(c,j);if(I!==void 0)return $(this,Ge).build(this,R).setData(I,{...p,manual:!0})}setQueriesData(i,c,p){return tt.batch(()=>$(this,Ge).findAll(i).map(({queryKey:R})=>[R,this.setQueryData(R,c,p)]))}getQueryState(i){var p;const c=this.defaultQueryOptions({queryKey:i});return(p=$(this,Ge).get(c.queryHash))==null?void 0:p.state}removeQueries(i){const c=$(this,Ge);tt.batch(()=>{c.findAll(i).forEach(p=>{c.remove(p)})})}resetQueries(i,c){const p=$(this,Ge);return tt.batch(()=>(p.findAll(i).forEach(R=>{R.reset()}),this.refetchQueries({type:"active",...i},c)))}cancelQueries(i,c={}){const p={revert:!0,...c},R=tt.batch(()=>$(this,Ge).findAll(i).map(A=>A.cancel(p)));return Promise.all(R).then(yt).catch(yt)}invalidateQueries(i,c={}){return tt.batch(()=>($(this,Ge).findAll(i).forEach(p=>{p.invalidate()}),(i==null?void 0:i.refetchType)==="none"?Promise.resolve():this.refetchQueries({...i,type:(i==null?void 0:i.refetchType)??(i==null?void 0:i.type)??"active"},c)))}refetchQueries(i,c={}){const p={...c,cancelRefetch:c.cancelRefetch??!0},R=tt.batch(()=>$(this,Ge).findAll(i).filter(A=>!A.isDisabled()&&!A.isStatic()).map(A=>{let j=A.fetch(void 0,p);return p.throwOnError||(j=j.catch(yt)),A.state.fetchStatus==="paused"?Promise.resolve():j}));return Promise.all(R).then(yt)}fetchQuery(i){const c=this.defaultQueryOptions(i);c.retry===void 0&&(c.retry=!1);const p=$(this,Ge).build(this,c);return p.isStaleByTime(cs(c.staleTime,p))?p.fetch(c):Promise.resolve(p.state.data)}prefetchQuery(i){return this.fetchQuery(i).then(yt).catch(yt)}fetchInfiniteQuery(i){return i.behavior=xd(i.pages),this.fetchQuery(i)}prefetchInfiniteQuery(i){return this.fetchInfiniteQuery(i).then(yt).catch(yt)}ensureInfiniteQueryData(i){return i.behavior=xd(i.pages),this.ensureQueryData(i)}resumePausedMutations(){return Fo.isOnline()?$(this,os).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,Ge)}getMutationCache(){return $(this,os)}getDefaultOptions(){return $(this,as)}setDefaultOptions(i){me(this,as,i)}setQueryDefaults(i,c){$(this,yi).set(Bs(i),{queryKey:i,defaultOptions:c})}getQueryDefaults(i){const c=[...$(this,yi).values()],p={};return c.forEach(R=>{pn(i,R.queryKey)&&Object.assign(p,R.defaultOptions)}),p}setMutationDefaults(i,c){$(this,Si).set(Bs(i),{mutationKey:i,defaultOptions:c})}getMutationDefaults(i){const c=[...$(this,Si).values()],p={};return c.forEach(R=>{pn(i,R.mutationKey)&&Object.assign(p,R.defaultOptions)}),p}defaultQueryOptions(i){if(i._defaulted)return i;const c={...$(this,as).queries,...this.getQueryDefaults(i.queryKey),...i,_defaulted:!0};return c.queryHash||(c.queryHash=cc(c.queryKey,c)),c.refetchOnReconnect===void 0&&(c.refetchOnReconnect=c.networkMode!=="always"),c.throwOnError===void 0&&(c.throwOnError=!!c.suspense),!c.networkMode&&c.persister&&(c.networkMode="offlineFirst"),c.queryFn===uc&&(c.enabled=!1),c}defaultMutationOptions(i){return i!=null&&i._defaulted?i:{...$(this,as).mutations,...(i==null?void 0:i.mutationKey)&&this.getMutationDefaults(i.mutationKey),...i,_defaulted:!0}}clear(){$(this,Ge).clear(),$(this,os).clear()}},Ge=new WeakMap,os=new WeakMap,as=new WeakMap,yi=new WeakMap,Si=new WeakMap,ls=new WeakMap,xi=new WeakMap,wi=new WeakMap,qd),rf=ie.createContext(void 0),$o=i=>{const c=ie.useContext(rf);if(!c)throw new Error("No QueryClient set, use QueryClientProvider to set one");return c},Ym=({client:i,children:c})=>(ie.useEffect(()=>(i.mount(),()=>{i.unmount()}),[i]),w.jsx(rf.Provider,{value:i,children:c})),sf=ie.createContext(!1),Zm=()=>ie.useContext(sf);sf.Provider;function e_(){let i=!1;return{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i}}var t_=ie.createContext(e_()),r_=()=>ie.useContext(t_),s_=(i,c,p)=>{const R=p!=null&&p.state.error&&typeof i.throwOnError=="function"?hc(i.throwOnError,[p.state.error,p]):i.throwOnError;(i.suspense||i.experimental_prefetchInRender||R)&&(c.isReset()||(i.retryOnMount=!1))},i_=i=>{ie.useEffect(()=>{i.clearReset()},[i])},n_=({result:i,errorResetBoundary:c,throwOnError:p,query:R,suspense:A})=>i.isError&&!c.isReset()&&!i.isFetching&&R&&(A&&i.data===void 0||hc(p,[i.error,R])),o_=i=>{if(i.suspense){const p=A=>A==="static"?A:Math.max(A??1e3,1e3),R=i.staleTime;i.staleTime=typeof R=="function"?(...A)=>p(R(...A)):p(R),typeof i.gcTime=="number"&&(i.gcTime=Math.max(i.gcTime,1e3))}},a_=(i,c)=>i.isLoading&&i.isFetching&&!c,l_=(i,c)=>(i==null?void 0:i.suspense)&&c.isPending,Cd=(i,c,p)=>c.fetchOptimistic(i).catch(()=>{p.clearReset()});function c_(i,c,p){var g,x,E,m;const R=Zm(),A=r_(),j=$o(),I=j.defaultQueryOptions(i);(x=(g=j.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||x.call(g,I);const l=j.getQueryCache().get(I.queryHash);I._optimisticResults=R?"isRestoring":"optimistic",o_(I),s_(I,A,l),i_(A);const d=!j.getQueryCache().get(I.queryHash),[v]=ie.useState(()=>new c(j,I)),S=v.getOptimisticResult(I),h=!R&&i.subscribed!==!1;if(ie.useSyncExternalStore(ie.useCallback(o=>{const a=h?v.subscribe(tt.batchCalls(o)):yt;return v.updateResult(),a},[v,h]),()=>v.getCurrentResult(),()=>v.getCurrentResult()),ie.useEffect(()=>{v.setOptions(I)},[I,v]),l_(I,S))throw Cd(I,v,A);if(n_({result:S,errorResetBoundary:A,throwOnError:I.throwOnError,query:l,suspense:I.suspense}))throw S.error;if((m=(E=j.getDefaultOptions().queries)==null?void 0:E._experimental_afterQuery)==null||m.call(E,I,S),I.experimental_prefetchInRender&&!Is&&a_(S,R)){const o=d?Cd(I,v,A):l==null?void 0:l.promise;o==null||o.catch(yt).finally(()=>{v.updateResult()})}return I.notifyOnChangeProps?S:v.trackResult(S)}function u_(i,c){return c_(i,Wm)}function gt(i,c){const p=$o(),[R]=ie.useState(()=>new Gm(p,i));ie.useEffect(()=>{R.setOptions(i)},[R,i]);const A=ie.useSyncExternalStore(ie.useCallback(I=>R.subscribe(tt.batchCalls(I)),[R]),()=>R.getCurrentResult(),()=>R.getCurrentResult()),j=ie.useCallback((I,l)=>{R.mutate(I,l).catch(yt)},[R]);if(A.error&&hc(R.options.throwOnError,[A.error]))throw A.error;return{...A,mutate:j,mutateAsync:A.mutate}}const bd=i=>{let c;const p=new Set,R=(v,S)=>{const h=typeof v=="function"?v(c):v;if(!Object.is(h,c)){const g=c;c=S??(typeof h!="object"||h===null)?h:Object.assign({},c,h),p.forEach(x=>x(c,g))}},A=()=>c,l={setState:R,getState:A,getInitialState:()=>d,subscribe:v=>(p.add(v),()=>p.delete(v))},d=c=i(R,A,l);return l},h_=(i=>i?bd(i):bd),d_=i=>i;function f_(i,c=d_){const p=hn.useSyncExternalStore(i.subscribe,hn.useCallback(()=>c(i.getState()),[i,c]),hn.useCallback(()=>c(i.getInitialState()),[i,c]));return hn.useDebugValue(p),p}const kd=i=>{const c=h_(i),p=R=>f_(c,R);return Object.assign(p,c),p},wn=(i=>i?kd(i):kd);function pc(i){return`http://${window.location.hostname}:${i}`}const St=wn(i=>({theme:"dark",viewMode:"dashboard",previewUrl:"",previewPort:null,isConnecting:!1,toasts:[],setTheme:c=>i({theme:c}),toggleTheme:()=>i(c=>({theme:c.theme==="dark"?"light":"dark"})),setViewMode:c=>i({viewMode:c}),setPreviewUrl:c=>i({previewUrl:c}),setPreviewPort:c=>i({previewPort:c}),setIsConnecting:c=>i({isConnecting:c}),setPreviewFromPort:c=>{if(c){const p=pc(c);i({previewUrl:p,previewPort:c})}else i({previewUrl:"",previewPort:null})},showToast:(c,p="info")=>{const R=Math.random().toString(36).slice(2);i(A=>({toasts:[...A.toasts,{id:R,message:c,type:p}]})),setTimeout(()=>{i(A=>({toasts:A.toasts.filter(j=>j.id!==R)}))},3e3)},dismissToast:c=>{i(p=>({toasts:p.toasts.filter(R=>R.id!==c)}))}}));function p_(i,c){let p;try{p=i()}catch{return}return{getItem:A=>{var j;const I=d=>d===null?null:JSON.parse(d,void 0),l=(j=p.getItem(A))!=null?j:null;return l instanceof Promise?l.then(I):I(l)},setItem:(A,j)=>p.setItem(A,JSON.stringify(j,void 0)),removeItem:A=>p.removeItem(A)}}const nc=i=>c=>{try{const p=i(c);return p instanceof Promise?p:{then(R){return nc(R)(p)},catch(R){return this}}}catch(p){return{then(R){return this},catch(R){return nc(R)(p)}}}},m_=(i,c)=>(p,R,A)=>{let j={storage:p_(()=>localStorage),partialize:o=>o,version:0,merge:(o,a)=>({...a,...o}),...c},I=!1,l=0;const d=new Set,v=new Set;let S=j.storage;if(!S)return i((...o)=>{console.warn(`[zustand persist middleware] Unable to update item '${j.name}', the given storage is currently unavailable.`),p(...o)},R,A);const h=()=>{const o=j.partialize({...R()});return S.setItem(j.name,{state:o,version:j.version})},g=A.setState;A.setState=(o,a)=>(g(o,a),h());const x=i((...o)=>(p(...o),h()),R,A);A.getInitialState=()=>x;let E;const m=()=>{var o,a;if(!S)return;const n=++l;I=!1,d.forEach(_=>{var k;return _((k=R())!=null?k:x)});const u=((a=j.onRehydrateStorage)==null?void 0:a.call(j,(o=R())!=null?o:x))||void 0;return nc(S.getItem.bind(S))(j.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==j.version){if(j.migrate){const k=j.migrate(_.state,_.version);return k instanceof Promise?k.then(b=>[!0,b]):[!0,k]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var k;if(n!==l)return;const[b,L]=_;if(E=j.merge(L,(k=R())!=null?k:x),p(E,!0),b)return h()}).then(()=>{n===l&&(u==null||u(E,void 0),E=R(),I=!0,v.forEach(_=>_(E)))}).catch(_=>{n===l&&(u==null||u(void 0,_))})};return A.persist={setOptions:o=>{j={...j,...o},o.storage&&(S=o.storage)},clearStorage:()=>{S==null||S.removeItem(j.name)},getOptions:()=>j,rehydrate:()=>m(),hasHydrated:()=>I,onHydrate:o=>(d.add(o),()=>{d.delete(o)}),onFinishHydration:o=>(v.add(o),()=>{v.delete(o)})},j.skipHydration||m(),E||x},__=m_,hr=wn()(__(i=>({user:null,token:null,isAuthenticated:!1,isLoading:!0,setupRequired:null,setUser:c=>i({user:c,isAuthenticated:!!c}),setToken:c=>i({token:c}),setSetupRequired:c=>i({setupRequired:c}),setIsLoading:c=>i({isLoading:c}),login:(c,p)=>i({user:c,token:p,isAuthenticated:!0,isLoading:!1,setupRequired:!1}),logout:()=>i({user:null,token:null,isAuthenticated:!1})}),{name:"vibemanager-auth",partialize:i=>({token:i.token,user:i.user,isAuthenticated:i.isAuthenticated})})),jt=wn(i=>({sessions:[],currentSession:null,systemStats:null,ports:[],isLoading:!0,setSessions:c=>i({sessions:c,isLoading:!1}),setCurrentSession:c=>i({currentSession:c}),setSystemStats:c=>i({systemStats:c}),setPorts:c=>i({ports:c}),setIsLoading:c=>i({isLoading:c}),addSession:c=>i(p=>({sessions:[...p.sessions,c]})),removeSession:c=>i(p=>({sessions:p.sessions.filter(R=>R.name!==c),currentSession:p.currentSession===c?null:p.currentSession})),updateSession:(c,p)=>i(R=>({sessions:R.sessions.map(A=>A.name===c?{...A,...p}:A)}))})),nf=()=>{const{sessions:i,currentSession:c}=jt();return i.find(p=>p.name===c)||null},mc=wn(i=>({tasks:[],selectedTaskId:null,setTasks:c=>i({tasks:c}),setSelectedTask:c=>i({selectedTaskId:c}),addTask:c=>i(p=>({tasks:[c,...p.tasks]})),updateTask:(c,p)=>i(R=>({tasks:R.tasks.map(A=>A.id===c?{...A,...p}:A)})),removeTask:c=>i(p=>({tasks:p.tasks.filter(R=>R.id!==c),selectedTaskId:p.selectedTaskId===c?null:p.selectedTaskId}))}));function v_(){const i=ie.useRef(null),c=ie.useRef(null),{setSessions:p,setSystemStats:R,setPorts:A,setIsLoading:j}=jt(),{setTasks:I}=mc(),l=hr(d=>d.token);return ie.useEffect(()=>{function d(){const v=window.location.protocol==="https:"?"wss:":"ws:",S=window.location.host,h=l?`?token=${encodeURIComponent(l)}`:"",g=new WebSocket(`${v}//${S}/status${h}`);g.onopen=()=>{console.log("Status WebSocket connected"),j(!1)},g.onmessage=x=>{try{const E=JSON.parse(x.data);E.type==="status"&&(p(E.sessions),R(E.system),A(E.ports),E.tasks&&I(E.tasks))}catch(E){console.error("Error parsing status message:",E)}},g.onclose=()=>{console.log("Status WebSocket closed, reconnecting..."),i.current=null,c.current=setTimeout(d,2e3)},g.onerror=x=>{console.error("Status WebSocket error:",x)},i.current=g}return d(),()=>{c.current&&clearTimeout(c.current),i.current&&i.current.close()}},[p,R,A,j,I]),i.current}const g_="/api";function y_(){return hr.getState().token}function S_(){const{logout:i}=hr.getState();i()}async function Me(i,c,p=!1){const R=y_(),A={"Content-Type":"application/json",...c==null?void 0:c.headers};R&&!p&&(A.Authorization=`Bearer ${R}`);const j=await fetch(`${g_}${i}`,{...c,headers:A});if(j.status===401&&!p)throw S_(),new Error("Session expired. Please login again.");const I=await j.json();if(!I.success)throw new Error(I.error||"Request failed");return I.data}const fn={list:()=>Me("/sessions"),get:i=>Me(`/sessions/${i}`),getLast:()=>Me("/sessions/last"),create:i=>Me("/sessions",{method:"POST",body:JSON.stringify(i)}),delete:i=>Me(`/sessions/${i}`,{method:"DELETE"}),stop:i=>Me(`/sessions/${i}/stop`,{method:"POST"}),revive:i=>Me(`/sessions/${i}/revive`,{method:"POST"}),getScrollback:i=>Me(`/sessions/${i}/scrollback`),setPreviewPort:(i,c)=>Me(`/sessions/${i}/preview-port`,{method:"PUT",body:JSON.stringify({port:c})})},x_={list:i=>Me(`/browse${i?`?path=${encodeURIComponent(i)}`:""}`),mkdir:i=>Me("/browse/mkdir",{method:"POST",body:JSON.stringify({path:i})})},Hl={getVerifier:()=>Me("/settings/verifier"),updateVerifier:i=>Me("/settings/verifier",{method:"PUT",body:JSON.stringify(i)}),testVerifier:()=>Me("/settings/verifier/test",{method:"POST"})},Zt={list:i=>Me(`/tasks${i?`?sessionId=${encodeURIComponent(i)}`:""}`),get:i=>Me(`/tasks/${i}`),create:i=>Me("/tasks",{method:"POST",body:JSON.stringify(i)}),update:(i,c)=>Me(`/tasks/${i}`,{method:"PATCH",body:JSON.stringify(c)}),delete:i=>Me(`/tasks/${i}`,{method:"DELETE"}),start:i=>Me(`/tasks/${i}/start`,{method:"POST"}),pause:i=>Me(`/tasks/${i}/pause`,{method:"POST"}),resume:i=>Me(`/tasks/${i}/resume`,{method:"POST"}),cancel:(i,c=!1)=>Me(`/tasks/${i}/cancel${c?"?force=true":""}`,{method:"POST"}),complete:(i,c)=>Me(`/tasks/${i}/complete`,{method:"POST",body:JSON.stringify({result:c||""})}),queue:i=>Me(`/tasks/${i}/queue`,{method:"POST"}),unqueue:i=>Me(`/tasks/${i}/unqueue`,{method:"POST"}),createWithFreshSession:i=>Me("/tasks/fresh-session",{method:"POST",body:JSON.stringify(i)})},Ho={getSetupStatus:()=>Me("/auth/setup-status",void 0,!0),setup:(i,c)=>Me("/auth/setup",{method:"POST",body:JSON.stringify({username:i,password:c})},!0),login:(i,c)=>Me("/auth/login",{method:"POST",body:JSON.stringify({username:i,password:c})},!0),logout:()=>Me("/auth/logout",{method:"POST"}),me:()=>Me("/auth/me"),changePassword:(i,c)=>Me("/auth/change-password",{method:"POST",body:JSON.stringify({oldPassword:i,newPassword:c})})};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),of=(...i)=>i.filter((c,p,R)=>!!c&&c.trim()!==""&&R.indexOf(c)===p).join(" ").trim();/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var C_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=ie.forwardRef(({color:i="currentColor",size:c=24,strokeWidth:p=2,absoluteStrokeWidth:R,className:A="",children:j,iconNode:I,...l},d)=>ie.createElement("svg",{ref:d,...C_,width:c,height:c,stroke:i,strokeWidth:R?Number(p)*24/Number(c):p,className:of("lucide",A),...l},[...I.map(([v,S])=>ie.createElement(v,S)),...Array.isArray(j)?j:[j]]));/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(i,c)=>{const p=ie.forwardRef(({className:R,...A},j)=>ie.createElement(b_,{ref:j,iconNode:c,className:of(`lucide-${w_(i)}`,R),...A}));return p.displayName=`${i}`,p};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ed=Ne("Check",k_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],R_=Ne("ChevronDown",E_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],D_=Ne("ChevronLeft",L_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],T_=Ne("ChevronRight",P_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],A_=Ne("ChevronUp",M_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],af=Ne("CircleAlert",N_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],Rd=Ne("CircleArrowDown",O_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Cn=Ne("CircleCheckBig",j_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],lf=Ne("CircleX",I_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],F_=Ne("Circle",B_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],_c=Ne("Clock",H_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],U_=Ne("ExternalLink",z_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Ld=Ne("Folder",W_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],q_=Ne("Info",$_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],V_=Ne("Layers",K_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],cf=Ne("ListOrdered",Q_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Dd=Ne("ListTodo",G_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],mn=Ne("LoaderCircle",X_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Y_=Ne("Maximize2",J_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],ev=Ne("Moon",Z_);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],uf=Ne("Pause",tv);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],zo=Ne("Play",rv);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Uo=Ne("Plus",sv);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Wo=Ne("RefreshCw",iv);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],ov=Ne("ScrollText",nv);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lv=Ne("Settings",av);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],bn=Ne("Square",cv);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],hv=Ne("Sun",uv);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],vc=Ne("Trash2",dv);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],pv=Ne("TriangleAlert",fv);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],us=Ne("X",mv);function hf(i){var c,p,R="";if(typeof i=="string"||typeof i=="number")R+=i;else if(typeof i=="object")if(Array.isArray(i)){var A=i.length;for(c=0;c<A;c++)i[c]&&(p=hf(i[c]))&&(R&&(R+=" "),R+=p)}else for(p in i)i[p]&&(R&&(R+=" "),R+=p);return R}function _v(){for(var i,c,p=0,R="",A=arguments.length;p<A;p++)(i=arguments[p])&&(c=hf(i))&&(R&&(R+=" "),R+=c);return R}const gc="-",vv=i=>{const c=yv(i),{conflictingClassGroups:p,conflictingClassGroupModifiers:R}=i;return{getClassGroupId:I=>{const l=I.split(gc);return l[0]===""&&l.length!==1&&l.shift(),df(l,c)||gv(I)},getConflictingClassGroupIds:(I,l)=>{const d=p[I]||[];return l&&R[I]?[...d,...R[I]]:d}}},df=(i,c)=>{var I;if(i.length===0)return c.classGroupId;const p=i[0],R=c.nextPart.get(p),A=R?df(i.slice(1),R):void 0;if(A)return A;if(c.validators.length===0)return;const j=i.join(gc);return(I=c.validators.find(({validator:l})=>l(j)))==null?void 0:I.classGroupId},Pd=/^\[(.+)\]$/,gv=i=>{if(Pd.test(i)){const c=Pd.exec(i)[1],p=c==null?void 0:c.substring(0,c.indexOf(":"));if(p)return"arbitrary.."+p}},yv=i=>{const{theme:c,prefix:p}=i,R={nextPart:new Map,validators:[]};return xv(Object.entries(i.classGroups),p).forEach(([j,I])=>{oc(I,R,j,c)}),R},oc=(i,c,p,R)=>{i.forEach(A=>{if(typeof A=="string"){const j=A===""?c:Td(c,A);j.classGroupId=p;return}if(typeof A=="function"){if(Sv(A)){oc(A(R),c,p,R);return}c.validators.push({validator:A,classGroupId:p});return}Object.entries(A).forEach(([j,I])=>{oc(I,Td(c,j),p,R)})})},Td=(i,c)=>{let p=i;return c.split(gc).forEach(R=>{p.nextPart.has(R)||p.nextPart.set(R,{nextPart:new Map,validators:[]}),p=p.nextPart.get(R)}),p},Sv=i=>i.isThemeGetter,xv=(i,c)=>c?i.map(([p,R])=>{const A=R.map(j=>typeof j=="string"?c+j:typeof j=="object"?Object.fromEntries(Object.entries(j).map(([I,l])=>[c+I,l])):j);return[p,A]}):i,wv=i=>{if(i<1)return{get:()=>{},set:()=>{}};let c=0,p=new Map,R=new Map;const A=(j,I)=>{p.set(j,I),c++,c>i&&(c=0,R=p,p=new Map)};return{get(j){let I=p.get(j);if(I!==void 0)return I;if((I=R.get(j))!==void 0)return A(j,I),I},set(j,I){p.has(j)?p.set(j,I):A(j,I)}}},ff="!",Cv=i=>{const{separator:c,experimentalParseClassName:p}=i,R=c.length===1,A=c[0],j=c.length,I=l=>{const d=[];let v=0,S=0,h;for(let o=0;o<l.length;o++){let a=l[o];if(v===0){if(a===A&&(R||l.slice(o,o+j)===c)){d.push(l.slice(S,o)),S=o+j;continue}if(a==="/"){h=o;continue}}a==="["?v++:a==="]"&&v--}const g=d.length===0?l:l.substring(S),x=g.startsWith(ff),E=x?g.substring(1):g,m=h&&h>S?h-S:void 0;return{modifiers:d,hasImportantModifier:x,baseClassName:E,maybePostfixModifierPosition:m}};return p?l=>p({className:l,parseClassName:I}):I},bv=i=>{if(i.length<=1)return i;const c=[];let p=[];return i.forEach(R=>{R[0]==="["?(c.push(...p.sort(),R),p=[]):p.push(R)}),c.push(...p.sort()),c},kv=i=>({cache:wv(i.cacheSize),parseClassName:Cv(i),...vv(i)}),Ev=/\s+/,Rv=(i,c)=>{const{parseClassName:p,getClassGroupId:R,getConflictingClassGroupIds:A}=c,j=[],I=i.trim().split(Ev);let l="";for(let d=I.length-1;d>=0;d-=1){const v=I[d],{modifiers:S,hasImportantModifier:h,baseClassName:g,maybePostfixModifierPosition:x}=p(v);let E=!!x,m=R(E?g.substring(0,x):g);if(!m){if(!E){l=v+(l.length>0?" "+l:l);continue}if(m=R(g),!m){l=v+(l.length>0?" "+l:l);continue}E=!1}const o=bv(S).join(":"),a=h?o+ff:o,n=a+m;if(j.includes(n))continue;j.push(n);const u=A(m,E);for(let _=0;_<u.length;++_){const k=u[_];j.push(a+k)}l=v+(l.length>0?" "+l:l)}return l};function Lv(){let i=0,c,p,R="";for(;i<arguments.length;)(c=arguments[i++])&&(p=pf(c))&&(R&&(R+=" "),R+=p);return R}const pf=i=>{if(typeof i=="string")return i;let c,p="";for(let R=0;R<i.length;R++)i[R]&&(c=pf(i[R]))&&(p&&(p+=" "),p+=c);return p};function Dv(i,...c){let p,R,A,j=I;function I(d){const v=c.reduce((S,h)=>h(S),i());return p=kv(v),R=p.cache.get,A=p.cache.set,j=l,l(d)}function l(d){const v=R(d);if(v)return v;const S=Rv(d,p);return A(d,S),S}return function(){return j(Lv.apply(null,arguments))}}const $e=i=>{const c=p=>p[i]||[];return c.isThemeGetter=!0,c},mf=/^\[(?:([a-z-]+):)?(.+)\]$/i,Pv=/^\d+\/\d+$/,Tv=new Set(["px","full","screen"]),Mv=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Av=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Nv=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ov=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jv=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xr=i=>ui(i)||Tv.has(i)||Pv.test(i),Jr=i=>bi(i,"length",$v),ui=i=>!!i&&!Number.isNaN(Number(i)),zl=i=>bi(i,"number",ui),cn=i=>!!i&&Number.isInteger(Number(i)),Iv=i=>i.endsWith("%")&&ui(i.slice(0,-1)),Ee=i=>mf.test(i),Yr=i=>Mv.test(i),Bv=new Set(["length","size","percentage"]),Fv=i=>bi(i,Bv,_f),Hv=i=>bi(i,"position",_f),zv=new Set(["image","url"]),Uv=i=>bi(i,zv,Kv),Wv=i=>bi(i,"",qv),un=()=>!0,bi=(i,c,p)=>{const R=mf.exec(i);return R?R[1]?typeof c=="string"?R[1]===c:c.has(R[1]):p(R[2]):!1},$v=i=>Av.test(i)&&!Nv.test(i),_f=()=>!1,qv=i=>Ov.test(i),Kv=i=>jv.test(i),Vv=()=>{const i=$e("colors"),c=$e("spacing"),p=$e("blur"),R=$e("brightness"),A=$e("borderColor"),j=$e("borderRadius"),I=$e("borderSpacing"),l=$e("borderWidth"),d=$e("contrast"),v=$e("grayscale"),S=$e("hueRotate"),h=$e("invert"),g=$e("gap"),x=$e("gradientColorStops"),E=$e("gradientColorStopPositions"),m=$e("inset"),o=$e("margin"),a=$e("opacity"),n=$e("padding"),u=$e("saturate"),_=$e("scale"),k=$e("sepia"),b=$e("skew"),L=$e("space"),C=$e("translate"),T=()=>["auto","contain","none"],H=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",Ee,c],W=()=>[Ee,c],F=()=>["",xr,Jr],G=()=>["auto",ui,Ee],re=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ne=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",Ee],O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>[ui,Ee];return{cacheSize:500,separator:":",theme:{colors:[un],spacing:[xr,Jr],blur:["none","",Yr,Ee],brightness:P(),borderColor:[i],borderRadius:["none","","full",Yr,Ee],borderSpacing:W(),borderWidth:F(),contrast:P(),grayscale:D(),hueRotate:P(),invert:D(),gap:W(),gradientColorStops:[i],gradientColorStopPositions:[Iv,Jr],inset:U(),margin:U(),opacity:P(),padding:W(),saturate:P(),scale:P(),sepia:D(),skew:P(),space:W(),translate:W()},classGroups:{aspect:[{aspect:["auto","square","video",Ee]}],container:["container"],columns:[{columns:[Yr]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...re(),Ee]}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",cn,Ee]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ee]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",cn,Ee]}],"grid-cols":[{"grid-cols":[un]}],"col-start-end":[{col:["auto",{span:["full",cn,Ee]},Ee]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[un]}],"row-start-end":[{row:["auto",{span:[cn,Ee]},Ee]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ee]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ee]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...X()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...X(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...X(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[n]}],px:[{px:[n]}],py:[{py:[n]}],ps:[{ps:[n]}],pe:[{pe:[n]}],pt:[{pt:[n]}],pr:[{pr:[n]}],pb:[{pb:[n]}],pl:[{pl:[n]}],m:[{m:[o]}],mx:[{mx:[o]}],my:[{my:[o]}],ms:[{ms:[o]}],me:[{me:[o]}],mt:[{mt:[o]}],mr:[{mr:[o]}],mb:[{mb:[o]}],ml:[{ml:[o]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ee,c]}],"min-w":[{"min-w":[Ee,c,"min","max","fit"]}],"max-w":[{"max-w":[Ee,c,"none","full","min","max","fit","prose",{screen:[Yr]},Yr]}],h:[{h:[Ee,c,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ee,c,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ee,c,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ee,c,"auto","min","max","fit"]}],"font-size":[{text:["base",Yr,Jr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",zl]}],"font-family":[{font:[un]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ee]}],"line-clamp":[{"line-clamp":["none",ui,zl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",xr,Ee]}],"list-image":[{"list-image":["none",Ee]}],"list-style-type":[{list:["none","disc","decimal",Ee]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[i]}],"placeholder-opacity":[{"placeholder-opacity":[a]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[i]}],"text-opacity":[{"text-opacity":[a]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",xr,Jr]}],"underline-offset":[{"underline-offset":["auto",xr,Ee]}],"text-decoration-color":[{decoration:[i]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:W()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[a]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...re(),Hv]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Fv]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Uv]}],"bg-color":[{bg:[i]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[j]}],"rounded-s":[{"rounded-s":[j]}],"rounded-e":[{"rounded-e":[j]}],"rounded-t":[{"rounded-t":[j]}],"rounded-r":[{"rounded-r":[j]}],"rounded-b":[{"rounded-b":[j]}],"rounded-l":[{"rounded-l":[j]}],"rounded-ss":[{"rounded-ss":[j]}],"rounded-se":[{"rounded-se":[j]}],"rounded-ee":[{"rounded-ee":[j]}],"rounded-es":[{"rounded-es":[j]}],"rounded-tl":[{"rounded-tl":[j]}],"rounded-tr":[{"rounded-tr":[j]}],"rounded-br":[{"rounded-br":[j]}],"rounded-bl":[{"rounded-bl":[j]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[a]}],"border-style":[{border:[...ne(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[a]}],"divide-style":[{divide:ne()}],"border-color":[{border:[A]}],"border-color-x":[{"border-x":[A]}],"border-color-y":[{"border-y":[A]}],"border-color-s":[{"border-s":[A]}],"border-color-e":[{"border-e":[A]}],"border-color-t":[{"border-t":[A]}],"border-color-r":[{"border-r":[A]}],"border-color-b":[{"border-b":[A]}],"border-color-l":[{"border-l":[A]}],"divide-color":[{divide:[A]}],"outline-style":[{outline:["",...ne()]}],"outline-offset":[{"outline-offset":[xr,Ee]}],"outline-w":[{outline:[xr,Jr]}],"outline-color":[{outline:[i]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[i]}],"ring-opacity":[{"ring-opacity":[a]}],"ring-offset-w":[{"ring-offset":[xr,Jr]}],"ring-offset-color":[{"ring-offset":[i]}],shadow:[{shadow:["","inner","none",Yr,Wv]}],"shadow-color":[{shadow:[un]}],opacity:[{opacity:[a]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[p]}],brightness:[{brightness:[R]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Yr,Ee]}],grayscale:[{grayscale:[v]}],"hue-rotate":[{"hue-rotate":[S]}],invert:[{invert:[h]}],saturate:[{saturate:[u]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[p]}],"backdrop-brightness":[{"backdrop-brightness":[R]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[v]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[S]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[a]}],"backdrop-saturate":[{"backdrop-saturate":[u]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[I]}],"border-spacing-x":[{"border-spacing-x":[I]}],"border-spacing-y":[{"border-spacing-y":[I]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ee]}],duration:[{duration:P()}],ease:[{ease:["linear","in","out","in-out",Ee]}],delay:[{delay:P()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ee]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[cn,Ee]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[b]}],"skew-y":[{"skew-y":[b]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ee]}],accent:[{accent:["auto",i]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ee]}],"caret-color":[{caret:[i]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":W()}],"scroll-mx":[{"scroll-mx":W()}],"scroll-my":[{"scroll-my":W()}],"scroll-ms":[{"scroll-ms":W()}],"scroll-me":[{"scroll-me":W()}],"scroll-mt":[{"scroll-mt":W()}],"scroll-mr":[{"scroll-mr":W()}],"scroll-mb":[{"scroll-mb":W()}],"scroll-ml":[{"scroll-ml":W()}],"scroll-p":[{"scroll-p":W()}],"scroll-px":[{"scroll-px":W()}],"scroll-py":[{"scroll-py":W()}],"scroll-ps":[{"scroll-ps":W()}],"scroll-pe":[{"scroll-pe":W()}],"scroll-pt":[{"scroll-pt":W()}],"scroll-pr":[{"scroll-pr":W()}],"scroll-pb":[{"scroll-pb":W()}],"scroll-pl":[{"scroll-pl":W()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ee]}],fill:[{fill:[i,"none"]}],"stroke-w":[{stroke:[xr,Jr,zl]}],stroke:[{stroke:[i,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Qv=Dv(Vv);function Fe(...i){return Qv(_v(i))}function ci(i,c=1){if(i===0)return"0 B";const p=1024,R=["B","KB","MB","GB","TB"],A=Math.floor(Math.log(i)/Math.log(p));return`${parseFloat((i/Math.pow(p,A)).toFixed(c))} ${R[A]}`}function Gv(i){const c=Math.floor(i/86400),p=Math.floor(i%86400/3600),R=Math.floor(i%3600/60);return c>0?`${c}d ${p}h`:p>0?`${p}h ${R}m`:`${R}m`}function _n(i){const c=typeof i=="string"?new Date(i):i,R=new Date().getTime()-c.getTime(),A=Math.floor(R/1e3),j=Math.floor(A/60),I=Math.floor(j/60),l=Math.floor(I/24);return l>0?`${l}d ago`:I>0?`${I}h ago`:j>0?`${j}m ago`:"just now"}function Ul(i,c=20){const p=Math.round(i/100*c),R=c-p;return{filled:"".repeat(p),empty:"".repeat(R)}}function Xv(i){return i>=80?"hot":i>=60?"warm":"cool"}function Jv(i,c=40){if(i.length<=c)return i;const p=i.split("/");return p.length<=2?"..."+i.slice(-c+3):".../"+p.slice(-2).join("/")}function Yv(){const{sessions:i,currentSession:c,setCurrentSession:p}=jt(),{setViewMode:R}=St(),A=j=>{p(j),R("terminal")};return i.length===0?null:w.jsx("div",{className:"flex items-center gap-1 overflow-x-auto max-w-[40%] flex-shrink scrollbar-none",children:i.map((j,I)=>w.jsxs("button",{className:Fe("ss-btn bg-surface-2 text-text-dim border-none py-1 px-2 text-[11px] font-semibold cursor-pointer whitespace-nowrap flex-shrink-0 flex items-center gap-1 transition-all max-w-[120px] overflow-hidden",c===j.name&&"bg-accent text-white",!j.alive&&"opacity-40"),onClick:()=>A(j.name),"data-index":I+1,children:[w.jsx("span",{className:Fe("w-1.5 h-1.5 rounded-full flex-shrink-0",j.alive?"bg-success":"bg-danger",c===j.name&&j.alive&&"bg-success")}),w.jsx("span",{className:"truncate ss-name",children:j.name})]},j.id))})}function Zv(){const{ports:i}=jt(),{previewPort:c,setPreviewPort:p,setPreviewUrl:R,setViewMode:A}=St(),j=i.filter(l=>l.port>=3e3&&l.port<=9e3&&l.port!==3131);if(j.length===0)return null;const I=l=>{c===l?(p(null),R("")):(p(l),R(pc(l)),A("preview"))};return w.jsx("div",{className:"flex items-center gap-1",children:j.slice(0,5).map(l=>w.jsx("button",{className:Fe("bg-surface-2 text-[11px] py-1 px-2 font-mono font-semibold cursor-pointer border-none transition-colors",c===l.port&&"bg-accent text-white"),onClick:()=>I(l.port),title:`${l.process} (PID: ${l.pid})`,children:l.port},l.port))})}function eg(){const i=hr(g=>g.token),[c,p]=ie.useState(null),[R,A]=ie.useState(!1),[j,I]=ie.useState("idle"),[l,d]=ie.useState(""),v=()=>{const g={};return i&&(g.Authorization=`Bearer ${i}`),g};ie.useEffect(()=>{S();const g=setInterval(S,3600*1e3);return()=>clearInterval(g)},[i]);const S=async()=>{try{const x=await(await fetch("/api/system/version",{headers:v()})).json();x.success&&p(x.data)}catch(g){console.error("Failed to check version:",g)}},h=async()=>{I("updating"),d("Updating...");try{const x=await(await fetch("/api/system/update",{method:"POST",headers:v()})).json();x.success?(I("success"),d(x.data.message),x.data.needsRestart&&(d(x.data.message+" - Restarting server..."),setTimeout(()=>{window.location.reload()},5e3))):(I("error"),d(x.error||"Update failed"))}catch{I("error"),d("Failed to connect to server")}};return c!=null&&c.updateAvailable?w.jsxs(w.Fragment,{children:[w.jsxs("button",{onClick:()=>A(!0),className:"relative flex items-center gap-1 px-2 py-1 text-[11px] bg-accent/20 text-accent rounded hover:bg-accent/30 transition-colors",title:`Update available: v${c.latest}`,children:[w.jsx(Rd,{className:"w-3.5 h-3.5"}),w.jsx("span",{className:"hidden sm:inline",children:"Update"}),w.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-accent rounded-full animate-pulse"})]}),R&&w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:w.jsxs("div",{className:"bg-surface rounded-lg shadow-xl p-5 max-w-md w-full mx-4",children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Update Available"}),w.jsx("button",{onClick:()=>A(!1),className:"text-text-dim hover:text-text-primary",disabled:j==="updating",children:w.jsx(us,{className:"w-5 h-5"})})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-center justify-between text-[13px]",children:[w.jsx("span",{className:"text-text-dim",children:"Current version:"}),w.jsxs("span",{className:"font-mono text-text-primary",children:["v",c.current]})]}),w.jsxs("div",{className:"flex items-center justify-between text-[13px]",children:[w.jsx("span",{className:"text-text-dim",children:"Latest version:"}),w.jsxs("span",{className:"font-mono text-accent",children:["v",c.latest]})]}),j!=="idle"&&w.jsx("div",{className:`p-3 rounded text-[13px] ${j==="error"?"bg-red-500/10 text-red-400":j==="success"?"bg-green-500/10 text-green-400":"bg-accent/10 text-accent"}`,children:w.jsxs("div",{className:"flex items-center gap-2",children:[j==="updating"&&w.jsx(Wo,{className:"w-4 h-4 animate-spin"}),j==="success"&&w.jsx(Ed,{className:"w-4 h-4"}),j==="error"&&w.jsx(us,{className:"w-4 h-4"}),w.jsx("span",{children:l})]})}),w.jsxs("div",{className:"flex gap-3 pt-2",children:[w.jsx("button",{onClick:()=>A(!1),className:"flex-1 px-4 py-2 text-[13px] text-text-dim hover:text-text-primary border border-border rounded transition-colors",disabled:j==="updating",children:"Cancel"}),w.jsx("button",{onClick:h,disabled:j==="updating"||j==="success",className:"flex-1 px-4 py-2 text-[13px] bg-accent text-white rounded hover:bg-accent/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:j==="updating"?w.jsxs(w.Fragment,{children:[w.jsx(Wo,{className:"w-4 h-4 animate-spin"}),"Updating..."]}):j==="success"?w.jsxs(w.Fragment,{children:[w.jsx(Ed,{className:"w-4 h-4"}),"Updated!"]}):w.jsxs(w.Fragment,{children:[w.jsx(Rd,{className:"w-4 h-4"}),"Update Now"]})})]}),w.jsx("p",{className:"text-[11px] text-text-dim text-center",children:"The server will restart automatically after updating."})]})]})})]}):null}const tg={lastOutputAt:Date.now(),activityState:"active"};function vf(){const i=$o(),{addSession:c,removeSession:p,updateSession:R,setCurrentSession:A}=jt(),j=gt({mutationFn:v=>fn.create(v),onSuccess:v=>{c({...v,activity:tg}),A(v.name),i.invalidateQueries({queryKey:["sessions"]})}}),I=gt({mutationFn:v=>fn.delete(v),onSuccess:(v,S)=>{p(S),i.invalidateQueries({queryKey:["sessions"]})}}),l=gt({mutationFn:v=>fn.stop(v),onSuccess:(v,S)=>{R(S,{alive:!1}),i.invalidateQueries({queryKey:["sessions"]})}}),d=gt({mutationFn:v=>fn.revive(v),onSuccess:v=>{R(v.name,{alive:!0}),i.invalidateQueries({queryKey:["sessions"]})}});return{create:j.mutateAsync,delete:I.mutateAsync,stop:l.mutateAsync,revive:d.mutateAsync,isCreating:j.isPending,isDeleting:I.isPending,isStopping:l.isPending,isReviving:d.isPending}}function gf({open:i,onClose:c}){const[p,R]=ie.useState(""),[A,j]=ie.useState(""),[I,l]=ie.useState("auto"),[d,v]=ie.useState(!1),[S,h]=ie.useState(""),[g,x]=ie.useState(""),{create:E,isCreating:m}=vf(),{data:o=[]}=u_({queryKey:["browse",S],queryFn:()=>x_.list(S||void 0),enabled:d}),a=async b=>{if(b.preventDefault(),x(""),!p.trim()){x("Name is required");return}if(!A.trim()){x("Project path is required");return}try{await E({name:p.trim(),projectPath:A.trim(),shell:I}),c(),n()}catch(L){x(String(L))}},n=()=>{R(""),j(""),l("auto"),v(!1),h(""),x("")},u=b=>{b.isDirectory&&h(b.path)},_=()=>{if(j(S),!p.trim()){const b=S.split("/").filter(Boolean).pop()||"";R(b)}v(!1)},k=()=>{const b=S.split("/").filter(Boolean);b.pop(),h("/"+b.join("/"))};return i?w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-[2px] flex items-center justify-center z-[1000] p-4",onClick:c,children:w.jsxs("div",{className:"bg-surface w-full max-w-md max-h-[85vh] overflow-hidden flex flex-col",onClick:b=>b.stopPropagation(),children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-surface-2",children:[w.jsx("h2",{className:"text-[15px] font-semibold text-text-primary",children:d?"Select Project Folder":"New Session"}),w.jsx("button",{className:"text-text-dim hover:text-text-primary transition-colors",onClick:c,children:w.jsx(us,{className:"w-5 h-5"})})]}),d?w.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[w.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-surface-2 text-[12px] font-mono",children:[w.jsx("button",{className:"text-text-dim hover:text-text-primary",onClick:k,disabled:!S||S==="/",children:w.jsx(D_,{className:"w-4 h-4"})}),w.jsx("span",{className:"truncate text-text-dim",children:S||"~"})]}),w.jsx("div",{className:"flex-1 overflow-y-auto",children:o.map(b=>w.jsxs("div",{className:Fe("flex items-center gap-2 px-4 py-2 cursor-pointer hover:bg-surface-2",b.isDirectory?"text-text-primary":"text-text-dim"),onClick:()=>u(b),children:[b.isDirectory?w.jsx(Ld,{className:"w-4 h-4 text-accent"}):w.jsx("div",{className:"w-4 h-4"}),w.jsx("span",{className:"flex-1 truncate text-[13px]",children:b.name}),b.isDirectory&&w.jsx(T_,{className:"w-4 h-4 text-text-dim"})]},b.path))}),w.jsxs("div",{className:"flex gap-2 p-4 border-t border-surface-2",children:[w.jsx("button",{className:"btn flex-1",onClick:()=>v(!1),children:"Cancel"}),w.jsx("button",{className:"btn btn-primary flex-1",onClick:_,children:"Select This Folder"})]})]}):w.jsxs("form",{onSubmit:a,className:"p-4 flex flex-col gap-4",children:[w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Session Name"}),w.jsx("input",{type:"text",className:"input w-full py-2.5 px-3 bg-surface-2",placeholder:"my-project",value:p,onChange:b=>R(b.target.value),autoFocus:!0})]}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Project Path"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{type:"text",className:"input flex-1 py-2.5 px-3 bg-surface-2",placeholder:"/home/user/projects/my-project",value:A,onChange:b=>j(b.target.value)}),w.jsx("button",{type:"button",className:"btn px-3",onClick:()=>{h(A||""),v(!0)},children:w.jsx(Ld,{className:"w-4 h-4"})})]})]}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Shell / Agent"}),w.jsx("div",{className:"flex gap-2",children:["auto","opencode","claude","kimi","bash"].map(b=>w.jsx("button",{type:"button",className:Fe("btn flex-1 capitalize",I===b&&"btn-primary"),onClick:()=>l(b),children:b},b))})]}),g&&w.jsx("div",{className:"text-[12px] text-danger bg-danger/10 px-3 py-2",children:g}),w.jsx("button",{type:"submit",className:"btn btn-primary w-full py-2.5",disabled:m,children:m?"Creating...":"Create Session"})]})]})}):null}function rg(){const{theme:i,toggleTheme:c}=St(),{currentSession:p,sessions:R}=jt(),[A,j]=ie.useState(!1),I=R.find(l=>l.name===p);return w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-surface flex-shrink-0",children:[w.jsxs("div",{className:"flex items-center gap-1.5 mr-1",children:[w.jsx("img",{src:"https://claraverse.app/favicon.ico",alt:"VibeManager",className:"w-[22px] h-[22px] rounded-full"}),w.jsx("span",{className:"text-[13px] font-bold text-text-primary tracking-tight hidden sm:block",children:"VibeManager"})]}),w.jsx("button",{className:"btn",onClick:()=>j(!0),title:"New Session",children:w.jsx(Uo,{className:"w-4 h-4"})}),w.jsx(Yv,{}),I&&w.jsx("span",{className:"flex-1 text-[12px] text-text-dim font-mono truncate min-w-[40px]",children:I.projectPath}),w.jsx(Zv,{}),w.jsx(eg,{}),w.jsx("button",{className:"btn",onClick:c,title:`Switch to ${i==="dark"?"light":"dark"} mode`,children:i==="dark"?w.jsx(hv,{className:"w-4 h-4"}):w.jsx(ev,{className:"w-4 h-4"})})]}),w.jsx(gf,{open:A,onClose:()=>j(!1)})]})}const sg=[{mode:"dashboard",label:"Dashboard"},{mode:"terminal",label:"Terminal"},{mode:"code",label:"Code"},{mode:"preview",label:"Preview"},{mode:"split",label:"Split"}];function ig(){const{viewMode:i,setViewMode:c}=St();return w.jsx("div",{className:"flex gap-0.5 px-3 py-1 bg-surface flex-shrink-0",children:sg.map(({mode:p,label:R})=>w.jsx("button",{className:Fe("view-tab",i===p&&"active"),onClick:()=>c(p),children:R},p))})}const ng={active:{label:"Active",dotClass:"bg-success",animate:"animate-pulse-fast"},idle:{label:"Idle",dotClass:"bg-warn"},waiting_for_input:{label:"Waiting",dotClass:"bg-accent",animate:"animate-pulse-slow"}};function og({activity:i,alive:c}){if(!c)return w.jsxs("div",{className:"flex items-center gap-1.5",children:[w.jsx("div",{className:"status-dot dead"}),w.jsx("span",{className:"text-[10px] text-text-dim uppercase tracking-wider",children:"Stopped"})]});const p=ng[i.activityState];return w.jsxs("div",{className:"flex items-center gap-1.5",children:[w.jsx("div",{className:Fe("status-dot",p.dotClass,p.animate)}),w.jsx("span",{className:"text-[10px] text-text-dim uppercase tracking-wider",children:p.label})]})}function ag({session:i}){const{setCurrentSession:c}=jt(),{setViewMode:p}=St(),{stop:R,revive:A,delete:j,isStopping:I,isReviving:l,isDeleting:d}=vf(),v=()=>{c(i.name),p("terminal")},S=async x=>{x.stopPropagation(),await R(i.name)},h=async x=>{x.stopPropagation(),await A(i.name)},g=async x=>{x.stopPropagation(),confirm(`Delete session "${i.name}"?`)&&await j(i.name)};return w.jsxs("div",{className:Fe("card flex flex-col gap-2.5 cursor-pointer",!i.alive&&"opacity-60"),onClick:v,children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(og,{activity:i.activity,alive:i.alive}),w.jsx("span",{className:"text-[15px] font-semibold text-text-primary",children:i.name})]}),w.jsx("div",{className:"text-[11px] text-text-dim font-mono truncate",children:Jv(i.projectPath)}),w.jsxs("div",{className:"text-[11px] text-text-dim flex gap-3",children:[w.jsx("span",{children:i.shell}),w.jsx("span",{children:_n(i.lastAccessedAt)})]}),w.jsxs("div",{className:"flex gap-2 mt-auto",children:[w.jsxs("button",{className:"btn btn-primary flex-1 flex items-center justify-center gap-1.5",onClick:v,children:[w.jsx(zo,{className:"w-3.5 h-3.5"}),"Attach"]}),i.alive?w.jsx("button",{className:"btn btn-danger flex-0 px-2.5",onClick:S,disabled:I,title:"Stop session",children:w.jsx(bn,{className:"w-3.5 h-3.5"})}):w.jsx("button",{className:"btn btn-success flex-0 px-2.5",onClick:h,disabled:l,title:"Revive session",children:w.jsx(Wo,{className:"w-3.5 h-3.5"})}),w.jsx("button",{className:"btn btn-danger flex-0 px-2.5",onClick:g,disabled:d,title:"Delete session",children:w.jsx(vc,{className:"w-3.5 h-3.5"})})]})]})}function yf(){const i=$o(),{addTask:c,updateTask:p,removeTask:R}=mc(),A=gt({mutationFn:m=>Zt.create(m),onSuccess:m=>{c(m),i.invalidateQueries({queryKey:["tasks"]})}}),j=gt({mutationFn:m=>Zt.createWithFreshSession(m),onSuccess:m=>{c(m),i.invalidateQueries({queryKey:["tasks"]}),i.invalidateQueries({queryKey:["sessions"]})}}),I=gt({mutationFn:({id:m,input:o})=>Zt.update(m,o),onSuccess:m=>{m&&p(m.id,m),i.invalidateQueries({queryKey:["tasks"]})}}),l=gt({mutationFn:m=>Zt.delete(m),onSuccess:(m,o)=>{R(o),i.invalidateQueries({queryKey:["tasks"]})}}),d=gt({mutationFn:m=>Zt.start(m),onSuccess:m=>{m&&p(m.id,m),i.invalidateQueries({queryKey:["tasks"]})}}),v=gt({mutationFn:m=>Zt.pause(m),onSuccess:m=>{m&&p(m.id,m),i.invalidateQueries({queryKey:["tasks"]})}}),S=gt({mutationFn:m=>Zt.resume(m),onSuccess:m=>{m&&p(m.id,m),i.invalidateQueries({queryKey:["tasks"]})}}),h=gt({mutationFn:({id:m,force:o=!1})=>Zt.cancel(m,o),onSuccess:m=>{m&&p(m.id,m),i.invalidateQueries({queryKey:["tasks"]})}}),g=gt({mutationFn:({id:m,result:o})=>Zt.complete(m,o),onSuccess:m=>{m&&p(m.id,m),i.invalidateQueries({queryKey:["tasks"]})}}),x=gt({mutationFn:m=>Zt.queue(m),onSuccess:m=>{m&&p(m.id,m),i.invalidateQueries({queryKey:["tasks"]})}}),E=gt({mutationFn:m=>Zt.unqueue(m),onSuccess:m=>{m&&p(m.id,m),i.invalidateQueries({queryKey:["tasks"]})}});return{createTask:A,createTaskWithFreshSession:j,updateTask:I,deleteTask:l,startTask:d,pauseTask:v,resumeTask:S,cancelTask:h,completeTask:g,queueTask:x,unqueueTask:E}}function lg(i){switch(i){case"pending":return w.jsx(_c,{className:"w-4 h-4 text-text-dim"});case"queued":return w.jsx(cf,{className:"w-4 h-4 text-accent-purple"});case"running":return w.jsx(mn,{className:"w-4 h-4 text-accent-blue animate-spin"});case"paused":return w.jsx(uf,{className:"w-4 h-4 text-accent-yellow"});case"completed":return w.jsx(Cn,{className:"w-4 h-4 text-accent-green"});case"failed":return w.jsx(lf,{className:"w-4 h-4 text-accent-red"});case"cancelled":return w.jsx(bn,{className:"w-4 h-4 text-text-dim"})}}function cg(i){switch(i){case"pending":return"Pending";case"queued":return"Queued";case"running":return"Running";case"paused":return"Paused";case"completed":return"Completed";case"failed":return"Failed";case"cancelled":return"Cancelled"}}function ug(i){switch(i){case"ralph":return"Ralph Loop";case"simple":return"Simple";case"manual":return"Manual"}}function hg({task:i}){const{startTask:c,pauseTask:p,resumeTask:R,cancelTask:A,deleteTask:j,completeTask:I,queueTask:l,unqueueTask:d}=yf(),v=i.status==="running"||i.status==="paused",S=i.status==="pending",h=i.status==="pending",g=i.status==="queued",x=i.status==="running"&&i.runnerType==="ralph",E=i.status==="paused",m=v,o=i.status==="running"&&i.runnerType==="manual",a=!v&&i.status!=="queued",n=U=>{U.stopPropagation(),c.mutate(i.id)},u=U=>{U.stopPropagation(),p.mutate(i.id)},_=U=>{U.stopPropagation(),R.mutate(i.id)},k=U=>{U.stopPropagation(),confirm(`Cancel task "${i.name}"?`)&&A.mutate({id:i.id},{onError:W=>{var F,G;(F=W.message)!=null&&F.includes("not actually running")||(G=W.message)!=null&&G.includes("not running")?confirm(`Task appears stuck. Force cancel "${i.name}"?`)&&A.mutate({id:i.id,force:!0}):alert(`Failed to cancel: ${W.message}`)}})},b=U=>{U.stopPropagation(),confirm(`Delete task "${i.name}"?`)&&j.mutate(i.id)},L=U=>{U.stopPropagation(),I.mutate({id:i.id,result:"Manually completed"})},C=U=>{U.stopPropagation(),l.mutate(i.id)},T=U=>{U.stopPropagation(),d.mutate(i.id)},H=i.maxIterations>0?Math.round(i.currentIteration/i.maxIterations*100):0;return w.jsxs("div",{className:Fe("card flex flex-col gap-2.5",i.status==="failed"&&"border-accent-red/30",i.status==="completed"&&"border-accent-green/30",i.status==="queued"&&"border-purple-500/30"),children:[w.jsxs("div",{className:"flex items-center gap-2",children:[lg(i.status),w.jsx("span",{className:"text-[15px] font-semibold text-text-primary truncate flex-1",children:i.name}),w.jsx("span",{className:"text-[11px] text-text-dim",children:ug(i.runnerType)})]}),w.jsx("div",{className:"text-[12px] text-text-secondary line-clamp-2",children:i.prompt}),i.runnerType!=="manual"&&v&&w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"flex-1 h-1.5 bg-bg-tertiary rounded-full overflow-hidden",children:w.jsx("div",{className:"h-full bg-accent-blue transition-all duration-300",style:{width:`${H}%`}})}),w.jsxs("span",{className:"text-[11px] text-text-dim font-mono",children:[i.currentIteration,"/",i.maxIterations]})]}),w.jsx("div",{className:"text-[11px] text-accent-blue bg-accent-blue/10 rounded px-2 py-1 truncate",children:i.statusMessage||(i.status==="paused"?"Paused":`Iteration ${i.currentIteration} running...`)})]}),w.jsxs("div",{className:"text-[11px] text-text-dim flex gap-3 flex-wrap",children:[w.jsx("span",{children:cg(i.status)}),i.status==="queued"&&i.queuePosition&&w.jsxs("span",{className:"text-accent-purple",children:["Position #",i.queuePosition]}),i.startedAt&&w.jsxs("span",{children:["Started ",_n(i.startedAt)]}),i.completedAt&&w.jsxs("span",{children:["Ended ",_n(i.completedAt)]})]}),i.error&&w.jsx("div",{className:"text-[11px] text-accent-red bg-accent-red/10 rounded px-2 py-1 truncate",children:i.error}),w.jsxs("div",{className:"flex gap-2 mt-auto",children:[S&&w.jsxs("button",{className:"btn btn-primary flex-1 flex items-center justify-center gap-1.5",onClick:n,disabled:c.isPending,children:[w.jsx(zo,{className:"w-3.5 h-3.5"}),"Start"]}),h&&w.jsxs("button",{className:"btn btn-secondary flex-1 flex items-center justify-center gap-1.5",onClick:C,disabled:l.isPending,title:"Add to queue - will auto-start after current task",children:[w.jsx(cf,{className:"w-3.5 h-3.5"}),"Queue"]}),g&&w.jsxs("button",{className:"btn btn-secondary flex-1 flex items-center justify-center gap-1.5",onClick:T,disabled:d.isPending,title:"Remove from queue",children:[w.jsx(us,{className:"w-3.5 h-3.5"}),"Unqueue"]}),x&&w.jsxs("button",{className:"btn btn-secondary flex-1 flex items-center justify-center gap-1.5",onClick:u,disabled:p.isPending,children:[w.jsx(uf,{className:"w-3.5 h-3.5"}),"Pause"]}),E&&w.jsxs("button",{className:"btn btn-primary flex-1 flex items-center justify-center gap-1.5",onClick:_,disabled:R.isPending,children:[w.jsx(zo,{className:"w-3.5 h-3.5"}),"Resume"]}),o&&w.jsxs("button",{className:"btn btn-success flex-1 flex items-center justify-center gap-1.5",onClick:L,disabled:I.isPending,children:[w.jsx(Cn,{className:"w-3.5 h-3.5"}),"Complete"]}),m&&w.jsx("button",{className:"btn btn-danger flex-0 px-2.5",onClick:k,disabled:A.isPending,title:"Cancel task",children:w.jsx(bn,{className:"w-3.5 h-3.5"})}),a&&w.jsx("button",{className:"btn btn-danger flex-0 px-2.5",onClick:b,disabled:j.isPending,title:"Delete task",children:w.jsx(vc,{className:"w-3.5 h-3.5"})})]})]})}function dg({open:i,onClose:c,sessionId:p}){var te;const[R,A]=ie.useState(""),[j,I]=ie.useState(""),[l,d]=ie.useState("ralph"),[v,S]=ie.useState(10),[h,g]=ie.useState(""),[x,E]=ie.useState(!1),[m,o]=ie.useState(""),[a,n]=ie.useState(!1),[u,_]=ie.useState(""),[k,b]=ie.useState(""),[L,C]=ie.useState("claude"),[T,H]=ie.useState(!1),[U,W]=ie.useState(""),{createTask:F,createTaskWithFreshSession:G}=yf(),{sessions:re,currentSession:ne}=jt(),[le,X]=ie.useState(p||""),D=p||le||((te=re.find(Y=>Y.name===ne))==null?void 0:te.id)||"",O=async Y=>{if(Y.preventDefault(),o(""),!R.trim()){o("Name is required");return}if(!j.trim()){o("Prompt is required");return}if(a){if(!u.trim()){o("Session name is required for fresh session");return}if(!k.trim()){o("Project path is required for fresh session");return}H(!0),W("Creating fresh session...");try{await G.mutateAsync({task:{name:R.trim(),prompt:j.trim(),runnerType:l,maxIterations:v,verificationPrompt:h.trim()||null},session:{name:u.trim(),projectPath:k.trim(),shell:L}}),c(),P()}catch(ue){o(String(ue))}finally{H(!1),W("")}return}if(!D){o("Please select a session");return}try{await F.mutateAsync({sessionId:D,name:R.trim(),prompt:j.trim(),runnerType:l,maxIterations:v,verificationPrompt:h.trim()||null,autoStart:x}),c(),P()}catch(ue){o(String(ue))}},P=()=>{A(""),I(""),d("ralph"),S(10),g(""),E(!1),o(""),n(!1),_(""),b(""),C("claude"),W(""),p||X("")};if(!i)return null;const B=re.filter(Y=>Y.alive);return w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-[2px] flex items-center justify-center z-[1000] p-4",onClick:c,children:w.jsxs("div",{className:"bg-surface w-full max-w-md max-h-[85vh] overflow-hidden flex flex-col",onClick:Y=>Y.stopPropagation(),children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-surface-2",children:[w.jsx("h2",{className:"text-[15px] font-semibold text-text-primary",children:"New Task"}),w.jsx("button",{className:"text-text-dim hover:text-text-primary transition-colors",onClick:c,children:w.jsx(us,{className:"w-5 h-5"})})]}),w.jsxs("form",{onSubmit:O,className:"p-4 flex flex-col gap-4 overflow-y-auto",children:[!p&&w.jsxs("div",{className:"flex flex-col gap-3",children:[w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{type:"button",className:Fe("btn flex-1 flex items-center justify-center gap-2",!a&&"btn-primary"),onClick:()=>n(!1),children:"Use Existing Session"}),w.jsxs("button",{type:"button",className:Fe("btn flex-1 flex items-center justify-center gap-2",a&&"btn-primary"),onClick:()=>n(!0),children:[w.jsx(Uo,{className:"w-3.5 h-3.5"}),"Fresh Session"]})]}),a&&w.jsx("div",{className:"text-[11px] text-accent-blue bg-accent-blue/10 px-3 py-2 rounded",children:"A new session will be created and Claude/OpenCode will be given time to fully load before starting the task."})]}),!p&&!a&&w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Session"}),w.jsxs("select",{className:"input w-full py-2.5 px-3 bg-surface-2",value:le,onChange:Y=>X(Y.target.value),children:[w.jsx("option",{value:"",children:"Select a session..."}),B.map(Y=>w.jsx("option",{value:Y.id,children:Y.name},Y.id))]}),B.length===0&&w.jsx("span",{className:"text-[11px] text-warn",children:'No active sessions. Use "Fresh Session" to create one.'})]}),!p&&a&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"New Session Name"}),w.jsx("input",{type:"text",className:"input w-full py-2.5 px-3 bg-surface-2",placeholder:"my-new-session",value:u,onChange:Y=>_(Y.target.value)})]}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Project Path"}),w.jsx("input",{type:"text",className:"input w-full py-2.5 px-3 bg-surface-2",placeholder:"/home/user/my-project",value:k,onChange:Y=>b(Y.target.value)})]}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Shell / Agent"}),w.jsx("div",{className:"flex gap-2",children:["claude","opencode","bash"].map(Y=>w.jsx("button",{type:"button",className:Fe("btn flex-1 capitalize",L===Y&&"btn-primary"),onClick:()=>C(Y),children:Y==="opencode"?"OpenCode":Y},Y))})]})]}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Task Name"}),w.jsx("input",{type:"text",className:"input w-full py-2.5 px-3 bg-surface-2",placeholder:"Fix login bug",value:R,onChange:Y=>A(Y.target.value),autoFocus:!0})]}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Prompt"}),w.jsx("textarea",{className:"input w-full py-2.5 px-3 bg-surface-2 min-h-[100px] resize-y",placeholder:"The login form is not validating email addresses correctly...",value:j,onChange:Y=>I(Y.target.value)})]}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Runner Type"}),w.jsx("div",{className:"flex gap-2",children:["ralph","simple","manual"].map(Y=>w.jsx("button",{type:"button",className:Fe("btn flex-1 capitalize",l===Y&&"btn-primary"),onClick:()=>d(Y),children:Y==="ralph"?"Ralph Loop":Y},Y))}),w.jsxs("span",{className:"text-[11px] text-text-dim",children:[l==="ralph"&&"Automated loop with LLM verification",l==="simple"&&"Single execution, no verification",l==="manual"&&"Task tracking only, manual control"]})]}),l!=="manual"&&w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Max Iterations"}),w.jsx("input",{type:"number",className:"input w-full py-2.5 px-3 bg-surface-2",min:1,max:100,value:v,onChange:Y=>S(parseInt(Y.target.value)||10)})]}),l==="ralph"&&w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Verification Criteria (Optional)"}),w.jsx("textarea",{className:"input w-full py-2.5 px-3 bg-surface-2 min-h-[60px] resize-y",placeholder:"The task is complete when tests pass and no TypeScript errors...",value:h,onChange:Y=>g(Y.target.value)})]}),!a&&w.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[w.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-surface-2 bg-surface-2",checked:x,onChange:Y=>E(Y.target.checked)}),w.jsx("span",{className:"text-[13px] text-text-secondary",children:"Start task immediately"})]}),a&&w.jsxs("div",{className:"text-[11px] text-text-dim bg-surface-2 px-3 py-2 rounded",children:[w.jsx("strong",{children:"What happens:"}),w.jsxs("ol",{className:"list-decimal ml-4 mt-1 space-y-0.5",children:[w.jsx("li",{children:"New session will be created"}),w.jsxs("li",{children:["Wait for ",L==="bash"?"shell":L," to fully load (~10-15s)"]}),w.jsx("li",{children:"Task will auto-start once ready"})]})]}),T&&U&&w.jsxs("div",{className:"flex items-center gap-2 text-[12px] text-accent bg-accent/10 px-3 py-2 rounded",children:[w.jsx(mn,{className:"w-4 h-4 animate-spin"}),U]}),m&&w.jsx("div",{className:"text-[12px] text-danger bg-danger/10 px-3 py-2",children:m}),w.jsx("button",{type:"submit",className:"btn btn-primary w-full py-2.5 flex items-center justify-center gap-2",disabled:F.isPending||G.isPending||T,children:F.isPending||G.isPending||T?w.jsxs(w.Fragment,{children:[w.jsx(mn,{className:"w-4 h-4 animate-spin"}),a?"Creating Session & Task...":"Creating..."]}):a?"Create Session & Start Task":"Create Task"})]})]})})}function fg(i){switch(i){case"completed":return w.jsx(Cn,{className:"w-5 h-5 text-accent-green"});case"failed":return w.jsx(lf,{className:"w-5 h-5 text-accent-red"});case"cancelled":return w.jsx(bn,{className:"w-5 h-5 text-text-dim"});default:return w.jsx(_c,{className:"w-5 h-5 text-text-dim"})}}function pg({task:i,onClose:c}){return i?w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-[2px] flex items-center justify-center z-[1000] p-4",onClick:c,children:w.jsxs("div",{className:"bg-surface w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col",onClick:p=>p.stopPropagation(),children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-surface-2",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[fg(i.status),w.jsx("h2",{className:"text-[15px] font-semibold text-text-primary",children:i.name})]}),w.jsx("button",{className:"text-text-dim hover:text-text-primary transition-colors",onClick:c,children:w.jsx(us,{className:"w-5 h-5"})})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4",children:[w.jsxs("div",{className:"flex gap-4 text-[12px] text-text-dim flex-wrap",children:[w.jsxs("span",{children:["Status: ",w.jsx("span",{className:"text-text-primary capitalize",children:i.status})]}),w.jsxs("span",{children:["Iterations: ",i.currentIteration,"/",i.maxIterations]}),i.startedAt&&w.jsxs("span",{children:["Started: ",_n(i.startedAt)]}),i.completedAt&&w.jsxs("span",{children:["Ended: ",_n(i.completedAt)]})]}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Original Prompt"}),w.jsx("div",{className:"bg-surface-2 rounded p-3 text-[13px] text-text-secondary whitespace-pre-wrap",children:i.prompt})]}),i.error&&w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-accent-red font-semibold",children:"Error"}),w.jsx("div",{className:"bg-accent-red/10 text-accent-red rounded p-3 text-[13px] whitespace-pre-wrap",children:i.error})]}),i.lastVerificationResult&&w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Last Verification"}),w.jsx("div",{className:"bg-surface-2 rounded p-3 text-[13px] text-text-secondary whitespace-pre-wrap font-mono",children:(()=>{try{const p=JSON.parse(i.lastVerificationResult);return`Passed: ${p.passed}
Feedback: ${p.feedback}
Confidence: ${p.confidence}`}catch{return i.lastVerificationResult}})()})]}),i.result&&w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Terminal Output (Last captured)"}),w.jsx("div",{className:"bg-black/50 rounded p-3 text-[12px] text-green-400 whitespace-pre-wrap font-mono max-h-[300px] overflow-y-auto",children:i.result})]})]}),w.jsx("div",{className:"flex justify-end p-4 border-t border-surface-2",children:w.jsx("button",{className:"btn btn-primary",onClick:c,children:"Close"})})]})}):null}function mg({open:i,onClose:c}){const[p,R]=ie.useState({enabled:!1,apiUrl:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o-mini",maxTokens:1024,hasApiKey:!1}),[A,j]=ie.useState(!0),[I,l]=ie.useState(!1),[d,v]=ie.useState(!1),[S,h]=ie.useState(null),[g,x]=ie.useState("");ie.useEffect(()=>{i&&E()},[i]);const E=async()=>{j(!0),x("");try{const a=await Hl.getVerifier();R(a)}catch(a){x(String(a))}finally{j(!1)}},m=async()=>{l(!0),x(""),h(null);try{const a=await Hl.updateVerifier({enabled:p.enabled,apiUrl:p.apiUrl,apiKey:p.apiKey,model:p.model,maxTokens:p.maxTokens});R(a)}catch(a){x(String(a))}finally{l(!1)}},o=async()=>{v(!0),h(null),x("");try{const a=await Hl.testVerifier();h({success:!0,message:a.message})}catch(a){h({success:!1,message:String(a)})}finally{v(!1)}};return i?w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-[2px] flex items-center justify-center z-[1000] p-4",onClick:c,children:w.jsxs("div",{className:"bg-surface w-full max-w-lg max-h-[85vh] overflow-hidden flex flex-col",onClick:a=>a.stopPropagation(),children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-surface-2",children:[w.jsx("h2",{className:"text-[15px] font-semibold text-text-primary",children:"Task Verifier Settings"}),w.jsx("button",{className:"text-text-dim hover:text-text-primary transition-colors",onClick:c,children:w.jsx(us,{className:"w-5 h-5"})})]}),w.jsx("div",{className:"p-4 flex flex-col gap-4 overflow-y-auto",children:A?w.jsx("div",{className:"flex items-center justify-center py-8",children:w.jsx(mn,{className:"w-6 h-6 animate-spin text-text-dim"})}):w.jsxs(w.Fragment,{children:[w.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[w.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded",checked:p.enabled,onChange:a=>R({...p,enabled:a.target.checked})}),w.jsxs("div",{children:[w.jsx("div",{className:"text-[14px] text-text-primary font-medium",children:"Enable LLM Verification"}),w.jsx("div",{className:"text-[11px] text-text-dim",children:"Use AI to verify if tasks completed successfully"})]})]}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"API URL (OpenAI Compatible)"}),w.jsx("input",{type:"text",className:"input w-full py-2.5 px-3 bg-surface-2",placeholder:"https://api.openai.com/v1",value:p.apiUrl,onChange:a=>R({...p,apiUrl:a.target.value})}),w.jsx("span",{className:"text-[10px] text-text-dim",children:"Works with OpenAI, OpenRouter, local LLMs, etc."})]}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"API Key"}),w.jsx("input",{type:"password",className:"input w-full py-2.5 px-3 bg-surface-2 font-mono",placeholder:p.hasApiKey?"":"sk-...",value:p.apiKey,onChange:a=>R({...p,apiKey:a.target.value})})]}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Model"}),w.jsx("input",{type:"text",className:"input w-full py-2.5 px-3 bg-surface-2",placeholder:"gpt-4o-mini",value:p.model,onChange:a=>R({...p,model:a.target.value})}),w.jsx("span",{className:"text-[10px] text-text-dim",children:"e.g., gpt-4o-mini, gpt-4o, claude-3-haiku, etc."})]}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[11px] uppercase tracking-wider text-text-dim font-semibold",children:"Max Tokens"}),w.jsx("input",{type:"number",className:"input w-full py-2.5 px-3 bg-surface-2",min:100,max:4096,value:p.maxTokens,onChange:a=>R({...p,maxTokens:parseInt(a.target.value)||1024})})]}),S&&w.jsxs("div",{className:`flex items-start gap-2 p-3 rounded text-[12px] ${S.success?"bg-accent-green/10 text-accent-green":"bg-accent-red/10 text-accent-red"}`,children:[S.success?w.jsx(Cn,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}):w.jsx(af,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),w.jsx("span",{children:S.message})]}),g&&w.jsx("div",{className:"text-[12px] text-accent-red bg-accent-red/10 px-3 py-2 rounded",children:g})]})}),w.jsxs("div",{className:"flex gap-2 p-4 border-t border-surface-2",children:[w.jsx("button",{className:"btn flex-1",onClick:o,disabled:d||!p.enabled||!p.apiKey,children:d?w.jsxs(w.Fragment,{children:[w.jsx(mn,{className:"w-4 h-4 animate-spin"}),"Testing..."]}):"Test Connection"}),w.jsx("button",{className:"btn btn-primary flex-1",onClick:m,disabled:I,children:I?"Saving...":"Save Settings"})]})]})}):null}function _g(){const{systemStats:i}=jt();if(!i)return null;const c=Ul(i.cpu.percent),p=Ul(i.memory.percent),R=Ul(i.disk.percent),A=Xv(i.temperature);return w.jsxs("div",{className:"bg-surface p-4 flex-shrink-0 mt-auto",children:[w.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wider text-text-dim mb-3",children:"System Monitor"}),w.jsxs("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(200px,1fr))] gap-3",children:[w.jsxs("div",{className:"flex flex-col gap-1",children:[w.jsxs("div",{className:"flex justify-between items-center text-[11px] text-text-dim",children:[w.jsx("span",{children:"CPU"}),w.jsxs("span",{className:"font-mono font-semibold text-text-primary",children:[i.cpu.percent.toFixed(1),"%"]})]}),w.jsxs("div",{className:Fe("sysmon-bar",i.cpu.percent>80?"hot":i.cpu.percent>60?"warm":"cool"),children:[w.jsx("span",{className:"filled",children:c.filled}),w.jsx("span",{className:"empty",children:c.empty})]})]}),w.jsxs("div",{className:"flex flex-col gap-1",children:[w.jsxs("div",{className:"flex justify-between items-center text-[11px] text-text-dim",children:[w.jsx("span",{children:"Memory"}),w.jsxs("span",{className:"font-mono font-semibold text-text-primary",children:[ci(i.memory.used)," / ",ci(i.memory.total)]})]}),w.jsxs("div",{className:Fe("sysmon-bar",i.memory.percent>80?"hot":i.memory.percent>60?"warm":"cool"),children:[w.jsx("span",{className:"filled",children:p.filled}),w.jsx("span",{className:"empty",children:p.empty})]})]}),w.jsxs("div",{className:"flex flex-col gap-1",children:[w.jsxs("div",{className:"flex justify-between items-center text-[11px] text-text-dim",children:[w.jsx("span",{children:"Disk"}),w.jsxs("span",{className:"font-mono font-semibold text-text-primary",children:[ci(i.disk.used)," / ",ci(i.disk.total)]})]}),w.jsxs("div",{className:Fe("sysmon-bar",i.disk.percent>90?"hot":i.disk.percent>75?"warm":"cool"),children:[w.jsx("span",{className:"filled",children:R.filled}),w.jsx("span",{className:"empty",children:R.empty})]})]}),w.jsxs("div",{className:"flex flex-col gap-1",children:[w.jsx("div",{className:"text-[11px] text-text-dim",children:"Load Average"}),w.jsxs("div",{className:"font-mono text-[12px] text-text-primary flex gap-2.5",children:[w.jsx("span",{children:i.load[0].toFixed(2)}),w.jsx("span",{children:i.load[1].toFixed(2)}),w.jsx("span",{children:i.load[2].toFixed(2)})]})]}),w.jsxs("div",{className:"flex flex-col gap-1",children:[w.jsx("div",{className:"text-[11px] text-text-dim",children:"Network"}),w.jsxs("div",{className:"font-mono text-[11px] flex gap-3",children:[w.jsxs("span",{className:"text-success",children:[" ",ci(i.network.rx),"/s"]}),w.jsxs("span",{className:"text-accent",children:[" ",ci(i.network.tx),"/s"]})]})]}),i.temperature>0&&w.jsxs("div",{className:"flex flex-col gap-1",children:[w.jsx("div",{className:"text-[11px] text-text-dim",children:"Temperature"}),w.jsxs("div",{className:Fe("font-mono text-[20px] font-bold",{"text-success":A==="cool","text-warn":A==="warm","text-danger":A==="hot"}),children:[i.temperature,"C"]})]})]})]})}function vg(){const[i,c]=ie.useState([]),[p,R]=ie.useState(!1),A=ie.useRef(null),j=hr(l=>l.token),I=ie.useCallback(()=>{c([])},[]);return ie.useEffect(()=>{if(!j)return;const l=window.location.protocol==="https:"?"wss:":"ws:",d=window.location.hostname,v=window.location.port,S=`${l}//${d}:${v}/logs?token=${encodeURIComponent(j)}`,h=new WebSocket(S);return A.current=h,h.onopen=()=>{R(!0)},h.onmessage=g=>{try{const x=JSON.parse(g.data);x.type==="initial"?c(x.data):x.type==="log"&&c(E=>[...E.slice(-499),x.data])}catch(x){console.error("Failed to parse log message:",x)}},h.onclose=()=>{R(!1)},h.onerror=()=>{R(!1)},()=>{h.close(),A.current=null}},[j]),{logs:i,connected:p,clearLogs:I}}const gg={debug:"text-text-dim",info:"text-blue-400",warn:"text-yellow-400",error:"text-red-400"},yg={task:"bg-purple-500/20 text-purple-400",session:"bg-green-500/20 text-green-400",llm:"bg-blue-500/20 text-blue-400",activity:"bg-yellow-500/20 text-yellow-400",system:"bg-gray-500/20 text-gray-400"};function Sg({entry:i}){const c=new Date(i.timestamp).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});return w.jsxs("div",{className:"flex items-start gap-2 py-1 px-2 hover:bg-surface/50 font-mono text-[11px]",children:[w.jsx("span",{className:"text-text-dim shrink-0",children:c}),w.jsxs("span",{className:Fe("uppercase w-12 shrink-0",gg[i.level]),children:["[",i.level,"]"]}),w.jsx("span",{className:Fe("px-1.5 py-0.5 rounded text-[10px] shrink-0",yg[i.category]),children:i.category}),w.jsx("span",{className:"text-text-primary flex-1 break-all",children:i.message}),i.data&&w.jsx("span",{className:"text-text-dim shrink-0 max-w-[200px] truncate",title:JSON.stringify(i.data),children:JSON.stringify(i.data)})]})}function xg(){const{logs:i,connected:c,clearLogs:p}=vg(),R=ie.useRef(null),[A,j]=ie.useState(!0),[I,l]=ie.useState("all"),[d,v]=ie.useState("all");ie.useEffect(()=>{A&&R.current&&(R.current.scrollTop=R.current.scrollHeight)},[i,A]);const S=()=>{if(!R.current)return;const{scrollTop:g,scrollHeight:x,clientHeight:E}=R.current,m=x-g-E<50;j(m)},h=i.filter(g=>!(I!=="all"&&g.level!==I||d!=="all"&&g.category!==d));return w.jsxs("div",{className:"flex flex-col h-full bg-bg border border-surface-3 rounded-lg overflow-hidden",children:[w.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-surface-3 bg-surface",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(F_,{className:Fe("w-2 h-2",c?"fill-green-500 text-green-500":"fill-red-500 text-red-500")}),w.jsx("span",{className:"text-[13px] font-medium text-text-primary",children:"Live Logs"}),w.jsxs("span",{className:"text-[11px] text-text-dim",children:["(",h.length,")"]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("select",{value:I,onChange:g=>l(g.target.value),className:"text-[11px] bg-surface-2 border border-surface-3 rounded px-2 py-1 text-text-primary cursor-pointer focus:outline-none focus:ring-1 focus:ring-accent",children:[w.jsx("option",{value:"all",children:"All Levels"}),w.jsx("option",{value:"debug",children:"Debug"}),w.jsx("option",{value:"info",children:"Info"}),w.jsx("option",{value:"warn",children:"Warn"}),w.jsx("option",{value:"error",children:"Error"})]}),w.jsxs("select",{value:d,onChange:g=>v(g.target.value),className:"text-[11px] bg-surface-2 border border-surface-3 rounded px-2 py-1 text-text-primary cursor-pointer focus:outline-none focus:ring-1 focus:ring-accent",children:[w.jsx("option",{value:"all",children:"All Categories"}),w.jsx("option",{value:"task",children:"Task"}),w.jsx("option",{value:"session",children:"Session"}),w.jsx("option",{value:"llm",children:"LLM"}),w.jsx("option",{value:"activity",children:"Activity"}),w.jsx("option",{value:"system",children:"System"})]}),w.jsx("button",{onClick:p,className:"p-1 hover:bg-surface-2 rounded text-text-dim hover:text-text-primary transition-colors",title:"Clear logs",children:w.jsx(vc,{className:"w-3.5 h-3.5"})})]})]}),w.jsx("div",{ref:R,onScroll:S,className:"flex-1 overflow-y-auto overflow-x-hidden",children:h.length===0?w.jsx("div",{className:"flex items-center justify-center h-full text-text-dim text-[12px]",children:"No logs yet..."}):h.map((g,x)=>w.jsx(Sg,{entry:g},x))}),!A&&w.jsx("button",{onClick:()=>{j(!0),R.current&&(R.current.scrollTop=R.current.scrollHeight)},className:"absolute bottom-4 right-4 px-2 py-1 bg-accent text-white text-[11px] rounded shadow-lg",children:"Scroll to bottom"})]})}function wg(){const{sessions:i,systemStats:c}=jt(),{tasks:p}=mc(),{showToast:R}=St(),[A,j]=ie.useState(!1),[I,l]=ie.useState(!1),[d,v]=ie.useState(!1),[S,h]=ie.useState(null),[g,x]=ie.useState(!1),E=i.filter(n=>n.alive),m=i.filter(n=>!n.alive),o=()=>{if(E.length===0){R("Create a session first to add tasks","warning");return}l(!0)},a=p.filter(n=>n.status==="running"||n.status==="paused");return w.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto p-4 gap-4 scrollbar-touch",children:[w.jsxs("div",{className:"flex items-center justify-between flex-shrink-0",children:[w.jsx("h1",{className:"text-[18px] font-semibold text-text-primary",children:"Dashboard"}),w.jsxs("button",{className:"btn btn-primary flex items-center gap-1.5",onClick:()=>j(!0),children:[w.jsx(Uo,{className:"w-4 h-4"}),"New Project"]})]}),w.jsxs("div",{className:"flex gap-4 flex-shrink-0 flex-wrap",children:[w.jsxs("div",{className:"stat-item running flex items-center gap-2 px-4 py-2.5 bg-surface flex-1 min-w-[100px]",children:[w.jsx(zo,{className:"w-4 h-4 text-success"}),w.jsxs("div",{children:[w.jsx("div",{className:"text-[22px] font-bold font-mono text-success",children:E.length}),w.jsx("div",{className:"text-[11px] text-text-dim uppercase tracking-wider",children:"Running"})]})]}),w.jsxs("div",{className:"stat-item stopped flex items-center gap-2 px-4 py-2.5 bg-surface flex-1 min-w-[100px]",children:[w.jsx(bn,{className:"w-4 h-4 text-text-dim"}),w.jsxs("div",{children:[w.jsx("div",{className:"text-[22px] font-bold font-mono text-text-dim",children:m.length}),w.jsx("div",{className:"text-[11px] text-text-dim uppercase tracking-wider",children:"Stopped"})]})]}),w.jsxs("div",{className:"stat-item total flex items-center gap-2 px-4 py-2.5 bg-surface flex-1 min-w-[100px]",children:[w.jsx(V_,{className:"w-4 h-4 text-accent"}),w.jsxs("div",{children:[w.jsx("div",{className:"text-[22px] font-bold font-mono text-accent",children:i.length}),w.jsx("div",{className:"text-[11px] text-text-dim uppercase tracking-wider",children:"Total"})]})]}),w.jsxs("div",{className:"stat-item tasks flex items-center gap-2 px-4 py-2.5 bg-surface flex-1 min-w-[100px]",children:[w.jsx(Dd,{className:"w-4 h-4 text-accent-blue"}),w.jsxs("div",{children:[w.jsx("div",{className:"text-[22px] font-bold font-mono text-accent-blue",children:a.length}),w.jsx("div",{className:"text-[11px] text-text-dim uppercase tracking-wider",children:"Tasks"})]})]}),c&&w.jsxs("div",{className:"stat-item uptime flex items-center gap-2 px-4 py-2.5 bg-surface flex-1 min-w-[100px]",children:[w.jsx(_c,{className:"w-4 h-4 text-warn"}),w.jsxs("div",{children:[w.jsx("div",{className:"text-[16px] font-bold font-mono text-warn",children:Gv(c.uptime)}),w.jsx("div",{className:"text-[11px] text-text-dim uppercase tracking-wider",children:"Uptime"})]})]})]}),i.length>0?w.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-3",children:i.map(n=>w.jsx(ag,{session:n},n.id))}):w.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-16 text-text-dim text-center",children:[w.jsx("div",{className:"text-[40px] opacity-30",children:""}),w.jsx("p",{className:"text-[14px]",children:"No sessions yet"}),w.jsx("p",{className:"text-[12px] opacity-60",children:"Create a new session to get started with your AI coding agent"})]}),(p.length>0||E.length>0)&&w.jsxs("div",{className:"flex flex-col gap-3",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("h2",{className:"text-[15px] font-semibold text-text-primary flex items-center gap-2",children:[w.jsx(Dd,{className:"w-4 h-4"}),"Tasks",a.length>0&&w.jsxs("span",{className:"text-[11px] bg-accent-blue/20 text-accent-blue px-2 py-0.5 rounded",children:[a.length," running"]})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{className:"btn flex items-center gap-1.5 text-[12px] px-2.5",onClick:()=>v(!0),title:"Task verifier settings",children:w.jsx(lv,{className:"w-3.5 h-3.5"})}),w.jsxs("button",{className:"btn btn-secondary flex items-center gap-1.5 text-[12px]",onClick:o,title:"Create a new task",children:[w.jsx(Uo,{className:"w-3.5 h-3.5"}),"New Task"]})]})]}),p.length>0?w.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-3",children:p.map(n=>w.jsx("div",{onClick:()=>h(n),className:"cursor-pointer",children:w.jsx(hg,{task:n})},n.id))}):w.jsx("div",{className:"text-[12px] text-text-dim bg-surface px-4 py-3 rounded",children:"No tasks yet. Create a task to automate work in your sessions."})]}),c&&w.jsx(_g,{}),w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsxs("button",{onClick:()=>x(!g),className:"flex items-center gap-2 text-[13px] text-text-secondary hover:text-text-primary transition-colors",children:[w.jsx(ov,{className:"w-4 h-4"}),w.jsx("span",{children:"Live Logs"}),g?w.jsx(A_,{className:"w-4 h-4"}):w.jsx(R_,{className:"w-4 h-4"})]}),g&&w.jsx("div",{className:"h-[300px] relative",children:w.jsx(xg,{})})]}),w.jsx(gf,{open:A,onClose:()=>j(!1)}),w.jsx(dg,{open:I,onClose:()=>l(!1)}),w.jsx(mg,{open:d,onClose:()=>v(!1)}),w.jsx(pg,{task:S,onClose:()=>h(null)})]})}var Wl={exports:{}},Md;function Cg(){return Md||(Md=1,(function(i,c){(function(p,R){i.exports=R()})(globalThis,(()=>(()=>{var p={4567:function(I,l,d){var v=this&&this.__decorate||function(n,u,_,k){var b,L=arguments.length,C=L<3?u:k===null?k=Object.getOwnPropertyDescriptor(u,_):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,u,_,k);else for(var T=n.length-1;T>=0;T--)(b=n[T])&&(C=(L<3?b(C):L>3?b(u,_,C):b(u,_))||C);return L>3&&C&&Object.defineProperty(u,_,C),C},S=this&&this.__param||function(n,u){return function(_,k){u(_,k,n)}};Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;const h=d(9042),g=d(9924),x=d(844),E=d(4725),m=d(2585),o=d(3656);let a=l.AccessibilityManager=class extends x.Disposable{constructor(n,u,_,k){super(),this._terminal=n,this._coreBrowserService=_,this._renderService=k,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let b=0;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);if(this._topBoundaryFocusListener=b=>this._handleBoundaryFocus(b,0),this._bottomBoundaryFocusListener=b=>this._handleBoundaryFocus(b,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new g.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((b=>this._handleResize(b.rows)))),this.register(this._terminal.onRender((b=>this._refreshRows(b.start,b.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((b=>this._handleChar(b)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((b=>this._handleTab(b)))),this.register(this._terminal.onKey((b=>this._handleKey(b.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,o.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,x.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(n){for(let u=0;u<n;u++)this._handleChar(" ")}_handleChar(n){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==n&&(this._charsToAnnounce+=n):this._charsToAnnounce+=n,n===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(n){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(n)||this._charsToConsume.push(n)}_refreshRows(n,u){this._liveRegionDebouncer.refresh(n,u,this._terminal.rows)}_renderRows(n,u){const _=this._terminal.buffer,k=_.lines.length.toString();for(let b=n;b<=u;b++){const L=_.lines.get(_.ydisp+b),C=[],T=(L==null?void 0:L.translateToString(!0,void 0,void 0,C))||"",H=(_.ydisp+b+1).toString(),U=this._rowElements[b];U&&(T.length===0?(U.innerText="",this._rowColumns.set(U,[0,1])):(U.textContent=T,this._rowColumns.set(U,C)),U.setAttribute("aria-posinset",H),U.setAttribute("aria-setsize",k))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(n,u){const _=n.target,k=this._rowElements[u===0?1:this._rowElements.length-2];if(_.getAttribute("aria-posinset")===(u===0?"1":`${this._terminal.buffer.lines.length}`)||n.relatedTarget!==k)return;let b,L;if(u===0?(b=_,L=this._rowElements.pop(),this._rowContainer.removeChild(L)):(b=this._rowElements.shift(),L=_,this._rowContainer.removeChild(b)),b.removeEventListener("focus",this._topBoundaryFocusListener),L.removeEventListener("focus",this._bottomBoundaryFocusListener),u===0){const C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else{const C=this._createAccessibilityTreeNode();this._rowElements.push(C),this._rowContainer.appendChild(C)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(u===0?-1:1),this._rowElements[u===0?1:this._rowElements.length-2].focus(),n.preventDefault(),n.stopImmediatePropagation()}_handleSelectionChange(){var T;if(this._rowElements.length===0)return;const n=document.getSelection();if(!n)return;if(n.isCollapsed)return void(this._rowContainer.contains(n.anchorNode)&&this._terminal.clearSelection());if(!n.anchorNode||!n.focusNode)return void console.error("anchorNode and/or focusNode are null");let u={node:n.anchorNode,offset:n.anchorOffset},_={node:n.focusNode,offset:n.focusOffset};if((u.node.compareDocumentPosition(_.node)&Node.DOCUMENT_POSITION_PRECEDING||u.node===_.node&&u.offset>_.offset)&&([u,_]=[_,u]),u.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(u={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(u.node))return;const k=this._rowElements.slice(-1)[0];if(_.node.compareDocumentPosition(k)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(_={node:k,offset:((T=k.textContent)==null?void 0:T.length)??0}),!this._rowContainer.contains(_.node))return;const b=({node:H,offset:U})=>{const W=H instanceof Text?H.parentNode:H;let F=parseInt(W==null?void 0:W.getAttribute("aria-posinset"),10)-1;if(isNaN(F))return console.warn("row is invalid. Race condition?"),null;const G=this._rowColumns.get(W);if(!G)return console.warn("columns is null. Race condition?"),null;let re=U<G.length?G[U]:G.slice(-1)[0]+1;return re>=this._terminal.cols&&(++F,re=0),{row:F,column:re}},L=b(u),C=b(_);if(L&&C){if(L.row>C.row||L.row===C.row&&L.column>=C.column)throw new Error("invalid range");this._terminal.select(L.column,L.row,(C.row-L.row)*this._terminal.cols-L.column+C.column)}}_handleResize(n){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let u=this._rowContainer.children.length;u<this._terminal.rows;u++)this._rowElements[u]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[u]);for(;this._rowElements.length>n;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const n=this._coreBrowserService.mainDocument.createElement("div");return n.setAttribute("role","listitem"),n.tabIndex=-1,this._refreshRowDimensions(n),n}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let n=0;n<this._terminal.rows;n++)this._refreshRowDimensions(this._rowElements[n])}}_refreshRowDimensions(n){n.style.height=`${this._renderService.dimensions.css.cell.height}px`}};l.AccessibilityManager=a=v([S(1,m.IInstantiationService),S(2,E.ICoreBrowserService),S(3,E.IRenderService)],a)},3614:(I,l)=>{function d(g){return g.replace(/\r?\n/g,"\r")}function v(g,x){return x?"\x1B[200~"+g+"\x1B[201~":g}function S(g,x,E,m){g=v(g=d(g),E.decPrivateModes.bracketedPasteMode&&m.rawOptions.ignoreBracketedPasteMode!==!0),E.triggerDataEvent(g,!0),x.value=""}function h(g,x,E){const m=E.getBoundingClientRect(),o=g.clientX-m.left-10,a=g.clientY-m.top-10;x.style.width="20px",x.style.height="20px",x.style.left=`${o}px`,x.style.top=`${a}px`,x.style.zIndex="1000",x.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=d,l.bracketTextForPaste=v,l.copyHandler=function(g,x){g.clipboardData&&g.clipboardData.setData("text/plain",x.selectionText),g.preventDefault()},l.handlePasteEvent=function(g,x,E,m){g.stopPropagation(),g.clipboardData&&S(g.clipboardData.getData("text/plain"),x,E,m)},l.paste=S,l.moveTextAreaUnderMouseCursor=h,l.rightClickHandler=function(g,x,E,m,o){h(g,x,E),o&&m.rightClickSelect(g),x.value=m.selectionText,x.select()}},7239:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;const v=d(1505);l.ColorContrastCache=class{constructor(){this._color=new v.TwoKeyMap,this._css=new v.TwoKeyMap}setCss(S,h,g){this._css.set(S,h,g)}getCss(S,h){return this._css.get(S,h)}setColor(S,h,g){this._color.set(S,h,g)}getColor(S,h){return this._color.get(S,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(d,v,S,h){d.addEventListener(v,S,h);let g=!1;return{dispose:()=>{g||(g=!0,d.removeEventListener(v,S,h))}}}},3551:function(I,l,d){var v=this&&this.__decorate||function(a,n,u,_){var k,b=arguments.length,L=b<3?n:_===null?_=Object.getOwnPropertyDescriptor(n,u):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(a,n,u,_);else for(var C=a.length-1;C>=0;C--)(k=a[C])&&(L=(b<3?k(L):b>3?k(n,u,L):k(n,u))||L);return b>3&&L&&Object.defineProperty(n,u,L),L},S=this&&this.__param||function(a,n){return function(u,_){n(u,_,a)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier=void 0;const h=d(3656),g=d(8460),x=d(844),E=d(2585),m=d(4725);let o=l.Linkifier=class extends x.Disposable{get currentLink(){return this._currentLink}constructor(a,n,u,_,k){super(),this._element=a,this._mouseService=n,this._renderService=u,this._bufferService=_,this._linkProviderService=k,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,x.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,x.toDisposable)((()=>{var b;this._lastMouseEvent=void 0,(b=this._activeProviderReplies)==null||b.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){this._lastMouseEvent=a;const n=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!n)return;this._isMouseOut=!1;const u=a.composedPath();for(let _=0;_<u.length;_++){const k=u[_];if(k.classList.contains("xterm"))break;if(k.classList.contains("xterm-hover"))return}this._lastBufferCell&&n.x===this._lastBufferCell.x&&n.y===this._lastBufferCell.y||(this._handleHover(n),this._lastBufferCell=n)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,n){var _,k;this._activeProviderReplies&&n||((_=this._activeProviderReplies)==null||_.forEach((b=>{b==null||b.forEach((L=>{L.link.dispose&&L.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=a.y);let u=!1;for(const[b,L]of this._linkProviderService.linkProviders.entries())n?(k=this._activeProviderReplies)!=null&&k.get(b)&&(u=this._checkLinkProviderResult(b,a,u)):L.provideLinks(a.y,(C=>{var H,U;if(this._isMouseOut)return;const T=C==null?void 0:C.map((W=>({link:W})));(H=this._activeProviderReplies)==null||H.set(b,T),u=this._checkLinkProviderResult(b,a,u),((U=this._activeProviderReplies)==null?void 0:U.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)}))}_removeIntersectingLinks(a,n){const u=new Set;for(let _=0;_<n.size;_++){const k=n.get(_);if(k)for(let b=0;b<k.length;b++){const L=k[b],C=L.link.range.start.y<a?0:L.link.range.start.x,T=L.link.range.end.y>a?this._bufferService.cols:L.link.range.end.x;for(let H=C;H<=T;H++){if(u.has(H)){k.splice(b--,1);break}u.add(H)}}}}_checkLinkProviderResult(a,n,u){var b;if(!this._activeProviderReplies)return u;const _=this._activeProviderReplies.get(a);let k=!1;for(let L=0;L<a;L++)this._activeProviderReplies.has(L)&&!this._activeProviderReplies.get(L)||(k=!0);if(!k&&_){const L=_.find((C=>this._linkAtPosition(C.link,n)));L&&(u=!0,this._handleNewLink(L))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!u)for(let L=0;L<this._activeProviderReplies.size;L++){const C=(b=this._activeProviderReplies.get(L))==null?void 0:b.find((T=>this._linkAtPosition(T.link,n)));if(C){u=!0,this._handleNewLink(C);break}}return u}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._currentLink)return;const n=this._positionFromMouseEvent(a,this._element,this._mouseService);n&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,n)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,n){this._currentLink&&this._lastMouseEvent&&(!a||!n||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=n)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,x.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._lastMouseEvent)return;const n=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);n&&this._linkAtPosition(a.link,n)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>{var u,_;return(_=(u=this._currentLink)==null?void 0:u.state)==null?void 0:_.decorations.pointerCursor},set:u=>{var _;(_=this._currentLink)!=null&&_.state&&this._currentLink.state.decorations.pointerCursor!==u&&(this._currentLink.state.decorations.pointerCursor=u,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",u))}},underline:{get:()=>{var u,_;return(_=(u=this._currentLink)==null?void 0:u.state)==null?void 0:_.decorations.underline},set:u=>{var _,k,b;(_=this._currentLink)!=null&&_.state&&((b=(k=this._currentLink)==null?void 0:k.state)==null?void 0:b.decorations.underline)!==u&&(this._currentLink.state.decorations.underline=u,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,u))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((u=>{if(!this._currentLink)return;const _=u.start===0?0:u.start+1+this._bufferService.buffer.ydisp,k=this._bufferService.buffer.ydisp+1+u.end;if(this._currentLink.link.range.start.y>=_&&this._currentLink.link.range.end.y<=k&&(this._clearCurrentLink(_,k),this._lastMouseEvent)){const b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._askForLink(b,!1)}}))))}_linkHover(a,n,u){var _;(_=this._currentLink)!=null&&_.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),n.hover&&n.hover(u,n.text)}_fireUnderlineEvent(a,n){const u=a.range,_=this._bufferService.buffer.ydisp,k=this._createLinkUnderlineEvent(u.start.x-1,u.start.y-_-1,u.end.x,u.end.y-_-1,void 0);(n?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(k)}_linkLeave(a,n,u){var _;(_=this._currentLink)!=null&&_.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),n.leave&&n.leave(u,n.text)}_linkAtPosition(a,n){const u=a.range.start.y*this._bufferService.cols+a.range.start.x,_=a.range.end.y*this._bufferService.cols+a.range.end.x,k=n.y*this._bufferService.cols+n.x;return u<=k&&k<=_}_positionFromMouseEvent(a,n,u){const _=u.getCoords(a,n,this._bufferService.cols,this._bufferService.rows);if(_)return{x:_[0],y:_[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,n,u,_,k){return{x1:a,y1:n,x2:u,y2:_,cols:this._bufferService.cols,fg:k}}};l.Linkifier=o=v([S(1,m.IMouseService),S(2,m.IRenderService),S(3,E.IBufferService),S(4,m.ILinkProviderService)],o)},9042:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(I,l,d){var v=this&&this.__decorate||function(m,o,a,n){var u,_=arguments.length,k=_<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,a):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(m,o,a,n);else for(var b=m.length-1;b>=0;b--)(u=m[b])&&(k=(_<3?u(k):_>3?u(o,a,k):u(o,a))||k);return _>3&&k&&Object.defineProperty(o,a,k),k},S=this&&this.__param||function(m,o){return function(a,n){o(a,n,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkProvider=void 0;const h=d(511),g=d(2585);let x=l.OscLinkProvider=class{constructor(m,o,a){this._bufferService=m,this._optionsService=o,this._oscLinkService=a}provideLinks(m,o){var T;const a=this._bufferService.buffer.lines.get(m-1);if(!a)return void o(void 0);const n=[],u=this._optionsService.rawOptions.linkHandler,_=new h.CellData,k=a.getTrimmedLength();let b=-1,L=-1,C=!1;for(let H=0;H<k;H++)if(L!==-1||a.hasContent(H)){if(a.loadCell(H,_),_.hasExtendedAttrs()&&_.extended.urlId){if(L===-1){L=H,b=_.extended.urlId;continue}C=_.extended.urlId!==b}else L!==-1&&(C=!0);if(C||L!==-1&&H===k-1){const U=(T=this._oscLinkService.getLinkData(b))==null?void 0:T.uri;if(U){const W={start:{x:L+1,y:m},end:{x:H+(C||H!==k-1?0:1),y:m}};let F=!1;if(!(u!=null&&u.allowNonHttpProtocols))try{const G=new URL(U);["http:","https:"].includes(G.protocol)||(F=!0)}catch{F=!0}F||n.push({text:U,range:W,activate:(G,re)=>u?u.activate(G,re,W):E(0,re),hover:(G,re)=>{var ne;return(ne=u==null?void 0:u.hover)==null?void 0:ne.call(u,G,re,W)},leave:(G,re)=>{var ne;return(ne=u==null?void 0:u.leave)==null?void 0:ne.call(u,G,re,W)}})}C=!1,_.hasExtendedAttrs()&&_.extended.urlId?(L=H,b=_.extended.urlId):(L=-1,b=-1)}}o(n)}};function E(m,o){if(confirm(`Do you want to navigate to ${o}?

WARNING: This link could potentially be dangerous`)){const a=window.open();if(a){try{a.opener=null}catch{}a.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}}l.OscLinkProvider=x=v([S(0,g.IBufferService),S(1,g.IOptionsService),S(2,g.IOscLinkService)],x)},6193:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0,l.RenderDebouncer=class{constructor(d,v){this._renderCallback=d,this._coreBrowserService=v,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(d){return this._refreshCallbacks.push(d),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(d,v,S){this._rowCount=S,d=d!==void 0?d:0,v=v!==void 0?v:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,v):v,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const d=Math.max(this._rowStart,0),v=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,v),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const d of this._refreshCallbacks)d(0);this._refreshCallbacks=[]}}},3236:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const v=d(3614),S=d(3656),h=d(3551),g=d(9042),x=d(3730),E=d(1680),m=d(3107),o=d(5744),a=d(2950),n=d(1296),u=d(428),_=d(4269),k=d(5114),b=d(8934),L=d(3230),C=d(9312),T=d(4725),H=d(6731),U=d(8055),W=d(8969),F=d(8460),G=d(844),re=d(6114),ne=d(8437),le=d(2584),X=d(7399),D=d(5941),O=d(9074),P=d(2585),B=d(5435),te=d(4567),Y=d(779);class ue extends W.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(K={}){super(K),this.browser=re,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new G.MutableDisposable),this._onCursorMove=this.register(new F.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new F.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new F.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new F.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new F.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new F.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new F.EventEmitter),this._onBlur=this.register(new F.EventEmitter),this._onA11yCharEmitter=this.register(new F.EventEmitter),this._onA11yTabEmitter=this.register(new F.EventEmitter),this._onWillOpen=this.register(new F.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(O.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(Y.LinkProviderService),this._instantiationService.setService(T.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(x.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((N,se)=>this.refresh(N,se)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((N=>this._reportWindowsOptions(N)))),this.register(this._inputHandler.onColor((N=>this._handleColorEvent(N)))),this.register((0,F.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,F.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,F.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,F.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((N=>this._afterResize(N.cols,N.rows)))),this.register((0,G.toDisposable)((()=>{var N,se;this._customKeyEventHandler=void 0,(se=(N=this.element)==null?void 0:N.parentNode)==null||se.removeChild(this.element)})))}_handleColorEvent(K){if(this._themeService)for(const N of K){let se,ee="";switch(N.index){case 256:se="foreground",ee="10";break;case 257:se="background",ee="11";break;case 258:se="cursor",ee="12";break;default:se="ansi",ee="4;"+N.index}switch(N.type){case 0:const pe=U.color.toColorRGB(se==="ansi"?this._themeService.colors.ansi[N.index]:this._themeService.colors[se]);this.coreService.triggerDataEvent(`${le.C0.ESC}]${ee};${(0,D.toRgbString)(pe)}${le.C1_ESCAPED.ST}`);break;case 1:if(se==="ansi")this._themeService.modifyColors((fe=>fe.ansi[N.index]=U.channels.toColor(...N.color)));else{const fe=se;this._themeService.modifyColors((Le=>Le[fe]=U.channels.toColor(...N.color)))}break;case 2:this._themeService.restoreColor(N.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(K){K?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(te.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(K){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(le.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var K;return(K=this.textarea)==null?void 0:K.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(le.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const K=this.buffer.ybase+this.buffer.y,N=this.buffer.lines.get(K);if(!N)return;const se=Math.min(this.buffer.x,this.cols-1),ee=this._renderService.dimensions.css.cell.height,pe=N.getWidth(se),fe=this._renderService.dimensions.css.cell.width*pe,Le=this.buffer.y*this._renderService.dimensions.css.cell.height,Ie=se*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ie+"px",this.textarea.style.top=Le+"px",this.textarea.style.width=fe+"px",this.textarea.style.height=ee+"px",this.textarea.style.lineHeight=ee+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,S.addDisposableDomListener)(this.element,"copy",(N=>{this.hasSelection()&&(0,v.copyHandler)(N,this._selectionService)})));const K=N=>(0,v.handlePasteEvent)(N,this.textarea,this.coreService,this.optionsService);this.register((0,S.addDisposableDomListener)(this.textarea,"paste",K)),this.register((0,S.addDisposableDomListener)(this.element,"paste",K)),re.isFirefox?this.register((0,S.addDisposableDomListener)(this.element,"mousedown",(N=>{N.button===2&&(0,v.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,S.addDisposableDomListener)(this.element,"contextmenu",(N=>{(0,v.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),re.isLinux&&this.register((0,S.addDisposableDomListener)(this.element,"auxclick",(N=>{N.button===1&&(0,v.moveTextAreaUnderMouseCursor)(N,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,S.addDisposableDomListener)(this.textarea,"keyup",(K=>this._keyUp(K)),!0)),this.register((0,S.addDisposableDomListener)(this.textarea,"keydown",(K=>this._keyDown(K)),!0)),this.register((0,S.addDisposableDomListener)(this.textarea,"keypress",(K=>this._keyPress(K)),!0)),this.register((0,S.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,S.addDisposableDomListener)(this.textarea,"compositionupdate",(K=>this._compositionHelper.compositionupdate(K)))),this.register((0,S.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,S.addDisposableDomListener)(this.textarea,"input",(K=>this._inputEvent(K)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(K){var se;if(!K)throw new Error("Terminal requires a parent element.");if(K.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((se=this.element)==null?void 0:se.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=K.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),K.appendChild(this.element);const N=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),N.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,S.addDisposableDomListener)(this.screenElement,"mousemove",(ee=>this.updateCursorStyle(ee)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),N.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),re.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(k.CoreBrowserService,this.textarea,K.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(T.ICoreBrowserService,this._coreBrowserService),this.register((0,S.addDisposableDomListener)(this.textarea,"focus",(ee=>this._handleTextAreaFocus(ee)))),this.register((0,S.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(u.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(T.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(H.ThemeService),this._instantiationService.setService(T.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(_.CharacterJoinerService),this._instantiationService.setService(T.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(L.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(T.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((ee=>this._onRender.fire(ee)))),this.onResize((ee=>this._renderService.resize(ee.cols,ee.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(a.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(b.MouseService),this._instantiationService.setService(T.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(N);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(E.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((ee=>this.scrollLines(ee.amount,ee.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(C.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(T.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((ee=>this.scrollLines(ee.amount,ee.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((ee=>this._renderService.handleSelectionChanged(ee.start,ee.end,ee.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((ee=>{this.textarea.value=ee,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((ee=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,S.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(m.BufferDecorationRenderer,this.screenElement)),this.register((0,S.addDisposableDomListener)(this.element,"mousedown",(ee=>this._selectionService.handleMouseDown(ee)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(te.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(ee=>this._handleScreenReaderModeOptionChange(ee)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(ee=>{!this._overviewRulerRenderer&&ee&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(n.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const K=this,N=this.element;function se(fe){const Le=K._mouseService.getMouseReportCoords(fe,K.screenElement);if(!Le)return!1;let Ie,He;switch(fe.overrideType||fe.type){case"mousemove":He=32,fe.buttons===void 0?(Ie=3,fe.button!==void 0&&(Ie=fe.button<3?fe.button:3)):Ie=1&fe.buttons?0:4&fe.buttons?1:2&fe.buttons?2:3;break;case"mouseup":He=0,Ie=fe.button<3?fe.button:3;break;case"mousedown":He=1,Ie=fe.button<3?fe.button:3;break;case"wheel":if(K._customWheelEventHandler&&K._customWheelEventHandler(fe)===!1||K.viewport.getLinesScrolled(fe)===0)return!1;He=fe.deltaY<0?0:1,Ie=4;break;default:return!1}return!(He===void 0||Ie===void 0||Ie>4)&&K.coreMouseService.triggerMouseEvent({col:Le.col,row:Le.row,x:Le.x,y:Le.y,button:Ie,action:He,ctrl:fe.ctrlKey,alt:fe.altKey,shift:fe.shiftKey})}const ee={mouseup:null,wheel:null,mousedrag:null,mousemove:null},pe={mouseup:fe=>(se(fe),fe.buttons||(this._document.removeEventListener("mouseup",ee.mouseup),ee.mousedrag&&this._document.removeEventListener("mousemove",ee.mousedrag)),this.cancel(fe)),wheel:fe=>(se(fe),this.cancel(fe,!0)),mousedrag:fe=>{fe.buttons&&se(fe)},mousemove:fe=>{fe.buttons||se(fe)}};this.register(this.coreMouseService.onProtocolChange((fe=>{fe?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(fe)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&fe?ee.mousemove||(N.addEventListener("mousemove",pe.mousemove),ee.mousemove=pe.mousemove):(N.removeEventListener("mousemove",ee.mousemove),ee.mousemove=null),16&fe?ee.wheel||(N.addEventListener("wheel",pe.wheel,{passive:!1}),ee.wheel=pe.wheel):(N.removeEventListener("wheel",ee.wheel),ee.wheel=null),2&fe?ee.mouseup||(ee.mouseup=pe.mouseup):(this._document.removeEventListener("mouseup",ee.mouseup),ee.mouseup=null),4&fe?ee.mousedrag||(ee.mousedrag=pe.mousedrag):(this._document.removeEventListener("mousemove",ee.mousedrag),ee.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,S.addDisposableDomListener)(N,"mousedown",(fe=>{if(fe.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(fe))return se(fe),ee.mouseup&&this._document.addEventListener("mouseup",ee.mouseup),ee.mousedrag&&this._document.addEventListener("mousemove",ee.mousedrag),this.cancel(fe)}))),this.register((0,S.addDisposableDomListener)(N,"wheel",(fe=>{if(!ee.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(fe)===!1)return!1;if(!this.buffer.hasScrollback){const Le=this.viewport.getLinesScrolled(fe);if(Le===0)return;const Ie=le.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(fe.deltaY<0?"A":"B");let He="";for(let ot=0;ot<Math.abs(Le);ot++)He+=Ie;return this.coreService.triggerDataEvent(He,!0),this.cancel(fe,!0)}return this.viewport.handleWheel(fe)?this.cancel(fe):void 0}}),{passive:!1})),this.register((0,S.addDisposableDomListener)(N,"touchstart",(fe=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(fe),this.cancel(fe)}),{passive:!0})),this.register((0,S.addDisposableDomListener)(N,"touchmove",(fe=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(fe)?void 0:this.cancel(fe)}),{passive:!1}))}refresh(K,N){var se;(se=this._renderService)==null||se.refreshRows(K,N)}updateCursorStyle(K){var N;(N=this._selectionService)!=null&&N.shouldColumnSelect(K)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(K,N,se=0){var ee;se===1?(super.scrollLines(K,N,se),this.refresh(0,this.rows-1)):(ee=this.viewport)==null||ee.scrollLines(K)}paste(K){(0,v.paste)(K,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(K){this._customKeyEventHandler=K}attachCustomWheelEventHandler(K){this._customWheelEventHandler=K}registerLinkProvider(K){return this._linkProviderService.registerLinkProvider(K)}registerCharacterJoiner(K){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const N=this._characterJoinerService.register(K);return this.refresh(0,this.rows-1),N}deregisterCharacterJoiner(K){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(K)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(K){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+K)}registerDecoration(K){return this._decorationService.registerDecoration(K)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(K,N,se){this._selectionService.setSelection(K,N,se)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var K;(K=this._selectionService)==null||K.clearSelection()}selectAll(){var K;(K=this._selectionService)==null||K.selectAll()}selectLines(K,N){var se;(se=this._selectionService)==null||se.selectLines(K,N)}_keyDown(K){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(K)===!1)return!1;const N=this.browser.isMac&&this.options.macOptionIsMeta&&K.altKey;if(!N&&!this._compositionHelper.keydown(K))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;N||K.key!=="Dead"&&K.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const se=(0,X.evaluateKeyboardEvent)(K,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(K),se.type===3||se.type===2){const ee=this.rows-1;return this.scrollLines(se.type===2?-ee:ee),this.cancel(K,!0)}return se.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,K)||(se.cancel&&this.cancel(K,!0),!se.key||!!(K.key&&!K.ctrlKey&&!K.altKey&&!K.metaKey&&K.key.length===1&&K.key.charCodeAt(0)>=65&&K.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(se.key!==le.C0.ETX&&se.key!==le.C0.CR||(this.textarea.value=""),this._onKey.fire({key:se.key,domEvent:K}),this._showCursor(),this.coreService.triggerDataEvent(se.key,!0),!this.optionsService.rawOptions.screenReaderMode||K.altKey||K.ctrlKey?this.cancel(K,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(K,N){const se=K.isMac&&!this.options.macOptionIsMeta&&N.altKey&&!N.ctrlKey&&!N.metaKey||K.isWindows&&N.altKey&&N.ctrlKey&&!N.metaKey||K.isWindows&&N.getModifierState("AltGraph");return N.type==="keypress"?se:se&&(!N.keyCode||N.keyCode>47)}_keyUp(K){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(K)===!1||((function(N){return N.keyCode===16||N.keyCode===17||N.keyCode===18})(K)||this.focus(),this.updateCursorStyle(K),this._keyPressHandled=!1)}_keyPress(K){let N;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(K)===!1)return!1;if(this.cancel(K),K.charCode)N=K.charCode;else if(K.which===null||K.which===void 0)N=K.keyCode;else{if(K.which===0||K.charCode===0)return!1;N=K.which}return!(!N||(K.altKey||K.ctrlKey||K.metaKey)&&!this._isThirdLevelShift(this.browser,K)||(N=String.fromCharCode(N),this._onKey.fire({key:N,domEvent:K}),this._showCursor(),this.coreService.triggerDataEvent(N,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(K){if(K.data&&K.inputType==="insertText"&&(!K.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const N=K.data;return this.coreService.triggerDataEvent(N,!0),this.cancel(K),!0}return!1}resize(K,N){K!==this.cols||N!==this.rows?super.resize(K,N):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(K,N){var se,ee;(se=this._charSizeService)==null||se.measure(),(ee=this.viewport)==null||ee.syncScrollArea(!0)}clear(){var K;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let N=1;N<this.rows;N++)this.buffer.lines.push(this.buffer.getBlankLine(ne.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(K=this.viewport)==null||K.reset(),this.refresh(0,this.rows-1)}}reset(){var N,se;this.options.rows=this.rows,this.options.cols=this.cols;const K=this._customKeyEventHandler;this._setup(),super.reset(),(N=this._selectionService)==null||N.reset(),this._decorationService.reset(),(se=this.viewport)==null||se.reset(),this._customKeyEventHandler=K,this.refresh(0,this.rows-1)}clearTextureAtlas(){var K;(K=this._renderService)==null||K.clearTextureAtlas()}_reportFocus(){var K;(K=this.element)!=null&&K.classList.contains("focus")?this.coreService.triggerDataEvent(le.C0.ESC+"[I"):this.coreService.triggerDataEvent(le.C0.ESC+"[O")}_reportWindowsOptions(K){if(this._renderService)switch(K){case B.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const N=this._renderService.dimensions.css.canvas.width.toFixed(0),se=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${le.C0.ESC}[4;${se};${N}t`);break;case B.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ee=this._renderService.dimensions.css.cell.width.toFixed(0),pe=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${le.C0.ESC}[6;${pe};${ee}t`)}}cancel(K,N){if(this.options.cancelEvents||N)return K.preventDefault(),K.stopPropagation(),!1}}l.Terminal=ue},9924:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TimeBasedDebouncer=void 0,l.TimeBasedDebouncer=class{constructor(d,v=1e3){this._renderCallback=d,this._debounceThresholdMS=v,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(d,v,S){this._rowCount=S,d=d!==void 0?d:0,v=v!==void 0?v:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,v):v;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=h-this._lastRefreshMs,x=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),x)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const d=Math.max(this._rowStart,0),v=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,v)}}},1680:function(I,l,d){var v=this&&this.__decorate||function(a,n,u,_){var k,b=arguments.length,L=b<3?n:_===null?_=Object.getOwnPropertyDescriptor(n,u):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(a,n,u,_);else for(var C=a.length-1;C>=0;C--)(k=a[C])&&(L=(b<3?k(L):b>3?k(n,u,L):k(n,u))||L);return b>3&&L&&Object.defineProperty(n,u,L),L},S=this&&this.__param||function(a,n){return function(u,_){n(u,_,a)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;const h=d(3656),g=d(4725),x=d(8460),E=d(844),m=d(2585);let o=l.Viewport=class extends E.Disposable{constructor(a,n,u,_,k,b,L,C){super(),this._viewportElement=a,this._scrollArea=n,this._bufferService=u,this._optionsService=_,this._charSizeService=k,this._renderService=b,this._coreBrowserService=L,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new x.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((T=>this._activeBuffer=T.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((T=>this._renderDimensions=T))),this._handleThemeChange(C.colors),this.register(C.onChangeColors((T=>this._handleThemeChange(T)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(a){this._viewportElement.style.backgroundColor=a.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(a){if(a)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const n=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==n&&(this._lastRecordedBufferHeight=n,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._refreshAnimationFrame=null}syncScrollArea(a=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(a);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(a)}_handleScroll(a){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const n=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:n,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const a=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(a*(this._smoothScrollState.target-this._smoothScrollState.origin)),a<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(a,n){const u=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(n<0&&this._viewportElement.scrollTop!==0||n>0&&u<this._lastRecordedBufferHeight)||(a.cancelable&&a.preventDefault(),!1)}handleWheel(a){const n=this._getPixelsScrolled(a);return n!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+n:this._smoothScrollState.target+=n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=n,this._bubbleScroll(a,n))}scrollLines(a){if(a!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const n=a*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!1})}_getPixelsScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let n=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_LINE?n*=this._currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._currentRowHeight*this._bufferService.rows),n}getBufferElements(a,n){var C;let u,_="";const k=[],b=n??this._bufferService.buffer.lines.length,L=this._bufferService.buffer.lines;for(let T=a;T<b;T++){const H=L.get(T);if(!H)continue;const U=(C=L.get(T+1))==null?void 0:C.isWrapped;if(_+=H.translateToString(!U),!U||T===L.length-1){const W=document.createElement("div");W.textContent=_,k.push(W),_.length>0&&(u=W),_=""}}return{bufferElements:k,cursorElement:u}}getLinesScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let n=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(n/=this._currentRowHeight+0,this._wheelPartialScroll+=n,n=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._bufferService.rows),n}_applyScrollModifier(a,n){const u=this._optionsService.rawOptions.fastScrollModifier;return u==="alt"&&n.altKey||u==="ctrl"&&n.ctrlKey||u==="shift"&&n.shiftKey?a*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:a*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(a){this._lastTouchY=a.touches[0].pageY}handleTouchMove(a){const n=this._lastTouchY-a.touches[0].pageY;return this._lastTouchY=a.touches[0].pageY,n!==0&&(this._viewportElement.scrollTop+=n,this._bubbleScroll(a,n))}};l.Viewport=o=v([S(2,m.IBufferService),S(3,m.IOptionsService),S(4,g.ICharSizeService),S(5,g.IRenderService),S(6,g.ICoreBrowserService),S(7,g.IThemeService)],o)},3107:function(I,l,d){var v=this&&this.__decorate||function(m,o,a,n){var u,_=arguments.length,k=_<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,a):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(m,o,a,n);else for(var b=m.length-1;b>=0;b--)(u=m[b])&&(k=(_<3?u(k):_>3?u(o,a,k):u(o,a))||k);return _>3&&k&&Object.defineProperty(o,a,k),k},S=this&&this.__param||function(m,o){return function(a,n){o(a,n,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferDecorationRenderer=void 0;const h=d(4725),g=d(844),x=d(2585);let E=l.BufferDecorationRenderer=class extends g.Disposable{constructor(m,o,a,n,u){super(),this._screenElement=m,this._bufferService=o,this._coreBrowserService=a,this._decorationService=n,this._renderService=u,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((_=>this._removeDecoration(_)))),this.register((0,g.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const m of this._decorationService.decorations)this._renderDecoration(m);this._dimensionsChanged=!1}_renderDecoration(m){this._refreshStyle(m),this._dimensionsChanged&&this._refreshXPosition(m)}_createElement(m){var n;const o=this._coreBrowserService.mainDocument.createElement("div");o.classList.add("xterm-decoration"),o.classList.toggle("xterm-decoration-top-layer",((n=m==null?void 0:m.options)==null?void 0:n.layer)==="top"),o.style.width=`${Math.round((m.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,o.style.height=(m.options.height||1)*this._renderService.dimensions.css.cell.height+"px",o.style.top=(m.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",o.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const a=m.options.x??0;return a&&a>this._bufferService.cols&&(o.style.display="none"),this._refreshXPosition(m,o),o}_refreshStyle(m){const o=m.marker.line-this._bufferService.buffers.active.ydisp;if(o<0||o>=this._bufferService.rows)m.element&&(m.element.style.display="none",m.onRenderEmitter.fire(m.element));else{let a=this._decorationElements.get(m);a||(a=this._createElement(m),m.element=a,this._decorationElements.set(m,a),this._container.appendChild(a),m.onDispose((()=>{this._decorationElements.delete(m),a.remove()}))),a.style.top=o*this._renderService.dimensions.css.cell.height+"px",a.style.display=this._altBufferIsActive?"none":"block",m.onRenderEmitter.fire(a)}}_refreshXPosition(m,o=m.element){if(!o)return;const a=m.options.x??0;(m.options.anchor||"left")==="right"?o.style.right=a?a*this._renderService.dimensions.css.cell.width+"px":"":o.style.left=a?a*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(m){var o;(o=this._decorationElements.get(m))==null||o.remove(),this._decorationElements.delete(m),m.dispose()}};l.BufferDecorationRenderer=E=v([S(1,x.IBufferService),S(2,h.ICoreBrowserService),S(3,x.IDecorationService),S(4,h.IRenderService)],E)},5871:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorZoneStore=void 0,l.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(d){if(d.options.overviewRulerOptions){for(const v of this._zones)if(v.color===d.options.overviewRulerOptions.color&&v.position===d.options.overviewRulerOptions.position){if(this._lineIntersectsZone(v,d.marker.line))return;if(this._lineAdjacentToZone(v,d.marker.line,d.options.overviewRulerOptions.position))return void this._addLineToZone(v,d.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=d.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=d.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=d.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=d.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:d.options.overviewRulerOptions.color,position:d.options.overviewRulerOptions.position,startBufferLine:d.marker.line,endBufferLine:d.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(d){this._linePadding=d}_lineIntersectsZone(d,v){return v>=d.startBufferLine&&v<=d.endBufferLine}_lineAdjacentToZone(d,v,S){return v>=d.startBufferLine-this._linePadding[S||"full"]&&v<=d.endBufferLine+this._linePadding[S||"full"]}_addLineToZone(d,v){d.startBufferLine=Math.min(d.startBufferLine,v),d.endBufferLine=Math.max(d.endBufferLine,v)}}},5744:function(I,l,d){var v=this&&this.__decorate||function(u,_,k,b){var L,C=arguments.length,T=C<3?_:b===null?b=Object.getOwnPropertyDescriptor(_,k):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(u,_,k,b);else for(var H=u.length-1;H>=0;H--)(L=u[H])&&(T=(C<3?L(T):C>3?L(_,k,T):L(_,k))||T);return C>3&&T&&Object.defineProperty(_,k,T),T},S=this&&this.__param||function(u,_){return function(k,b){_(k,b,u)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OverviewRulerRenderer=void 0;const h=d(5871),g=d(4725),x=d(844),E=d(2585),m={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0};let n=l.OverviewRulerRenderer=class extends x.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(u,_,k,b,L,C,T){var U;super(),this._viewportElement=u,this._screenElement=_,this._bufferService=k,this._decorationService=b,this._renderService=L,this._optionsService=C,this._coreBrowserService=T,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(U=this._viewportElement.parentElement)==null||U.insertBefore(this._canvas,this._viewportElement);const H=this._canvas.getContext("2d");if(!H)throw new Error("Ctx cannot be null");this._ctx=H,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,x.toDisposable)((()=>{var W;(W=this._canvas)==null||W.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const u=Math.floor(this._canvas.width/3),_=Math.ceil(this._canvas.width/3);o.full=this._canvas.width,o.left=u,o.center=_,o.right=u,this._refreshDrawHeightConstants(),a.full=0,a.left=0,a.center=o.left,a.right=o.left+o.center}_refreshDrawHeightConstants(){m.full=Math.round(2*this._coreBrowserService.dpr);const u=this._canvas.height/this._bufferService.buffer.lines.length,_=Math.round(Math.max(Math.min(u,12),6)*this._coreBrowserService.dpr);m.left=_,m.center=_,m.right=_}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const _ of this._decorationService.decorations)this._colorZoneStore.addDecoration(_);this._ctx.lineWidth=1;const u=this._colorZoneStore.zones;for(const _ of u)_.position!=="full"&&this._renderColorZone(_);for(const _ of u)_.position==="full"&&this._renderColorZone(_);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(u){this._ctx.fillStyle=u.color,this._ctx.fillRect(a[u.position||"full"],Math.round((this._canvas.height-1)*(u.startBufferLine/this._bufferService.buffers.active.lines.length)-m[u.position||"full"]/2),o[u.position||"full"],Math.round((this._canvas.height-1)*((u.endBufferLine-u.startBufferLine)/this._bufferService.buffers.active.lines.length)+m[u.position||"full"]))}_queueRefresh(u,_){this._shouldUpdateDimensions=u||this._shouldUpdateDimensions,this._shouldUpdateAnchor=_||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};l.OverviewRulerRenderer=n=v([S(2,E.IBufferService),S(3,E.IDecorationService),S(4,g.IRenderService),S(5,E.IOptionsService),S(6,g.ICoreBrowserService)],n)},2950:function(I,l,d){var v=this&&this.__decorate||function(m,o,a,n){var u,_=arguments.length,k=_<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,a):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(m,o,a,n);else for(var b=m.length-1;b>=0;b--)(u=m[b])&&(k=(_<3?u(k):_>3?u(o,a,k):u(o,a))||k);return _>3&&k&&Object.defineProperty(o,a,k),k},S=this&&this.__param||function(m,o){return function(a,n){o(a,n,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;const h=d(4725),g=d(2585),x=d(2584);let E=l.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(m,o,a,n,u,_){this._textarea=m,this._compositionView=o,this._bufferService=a,this._optionsService=n,this._coreService=u,this._renderService=_,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(m){this._compositionView.textContent=m.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(m){if(this._isComposing||this._isSendingComposition){if(m.keyCode===229||m.keyCode===16||m.keyCode===17||m.keyCode===18)return!1;this._finalizeComposition(!1)}return m.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(m){if(this._compositionView.classList.remove("active"),this._isComposing=!1,m){const o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let a;this._isSendingComposition=!1,o.start+=this._dataAlreadySent.length,a=this._isComposing?this._textarea.value.substring(o.start,o.end):this._textarea.value.substring(o.start),a.length>0&&this._coreService.triggerDataEvent(a,!0)}}),0)}else{this._isSendingComposition=!1;const o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}}_handleAnyTextareaChanges(){const m=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const o=this._textarea.value,a=o.replace(m,"");this._dataAlreadySent=a,o.length>m.length?this._coreService.triggerDataEvent(a,!0):o.length<m.length?this._coreService.triggerDataEvent(`${x.C0.DEL}`,!0):o.length===m.length&&o!==m&&this._coreService.triggerDataEvent(o,!0)}}),0)}updateCompositionElements(m){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.css.cell.height,n=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,u=o*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=u+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const _=this._compositionView.getBoundingClientRect();this._textarea.style.left=u+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(_.width,1)+"px",this._textarea.style.height=Math.max(_.height,1)+"px",this._textarea.style.lineHeight=_.height+"px"}m||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};l.CompositionHelper=E=v([S(2,g.IBufferService),S(3,g.IOptionsService),S(4,g.ICoreService),S(5,h.IRenderService)],E)},9806:(I,l)=>{function d(v,S,h){const g=h.getBoundingClientRect(),x=v.getComputedStyle(h),E=parseInt(x.getPropertyValue("padding-left")),m=parseInt(x.getPropertyValue("padding-top"));return[S.clientX-g.left-E,S.clientY-g.top-m]}Object.defineProperty(l,"__esModule",{value:!0}),l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=d,l.getCoords=function(v,S,h,g,x,E,m,o,a){if(!E)return;const n=d(v,S,h);return n?(n[0]=Math.ceil((n[0]+(a?m/2:0))/m),n[1]=Math.ceil(n[1]/o),n[0]=Math.min(Math.max(n[0],1),g+(a?1:0)),n[1]=Math.min(Math.max(n[1],1),x),n):void 0}},9504:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;const v=d(2584);function S(o,a,n,u){const _=o-h(o,n),k=a-h(a,n),b=Math.abs(_-k)-(function(L,C,T){let H=0;const U=L-h(L,T),W=C-h(C,T);for(let F=0;F<Math.abs(U-W);F++){const G=g(L,C)==="A"?-1:1,re=T.buffer.lines.get(U+G*F);re!=null&&re.isWrapped&&H++}return H})(o,a,n);return m(b,E(g(o,a),u))}function h(o,a){let n=0,u=a.buffer.lines.get(o),_=u==null?void 0:u.isWrapped;for(;_&&o>=0&&o<a.rows;)n++,u=a.buffer.lines.get(--o),_=u==null?void 0:u.isWrapped;return n}function g(o,a){return o>a?"A":"B"}function x(o,a,n,u,_,k){let b=o,L=a,C="";for(;b!==n||L!==u;)b+=_?1:-1,_&&b>k.cols-1?(C+=k.buffer.translateBufferLineToString(L,!1,o,b),b=0,o=0,L++):!_&&b<0&&(C+=k.buffer.translateBufferLineToString(L,!1,0,o+1),b=k.cols-1,o=b,L--);return C+k.buffer.translateBufferLineToString(L,!1,o,b)}function E(o,a){const n=a?"O":"[";return v.C0.ESC+n+o}function m(o,a){o=Math.floor(o);let n="";for(let u=0;u<o;u++)n+=a;return n}l.moveToCellSequence=function(o,a,n,u){const _=n.buffer.x,k=n.buffer.y;if(!n.buffer.hasScrollback)return(function(C,T,H,U,W,F){return S(T,U,W,F).length===0?"":m(x(C,T,C,T-h(T,W),!1,W).length,E("D",F))})(_,k,0,a,n,u)+S(k,a,n,u)+(function(C,T,H,U,W,F){let G;G=S(T,U,W,F).length>0?U-h(U,W):T;const re=U,ne=(function(le,X,D,O,P,B){let te;return te=S(D,O,P,B).length>0?O-h(O,P):X,le<D&&te<=O||le>=D&&te<O?"C":"D"})(C,T,H,U,W,F);return m(x(C,G,H,re,ne==="C",W).length,E(ne,F))})(_,k,o,a,n,u);let b;if(k===a)return b=_>o?"D":"C",m(Math.abs(_-o),E(b,u));b=k>a?"D":"C";const L=Math.abs(k-a);return m((function(C,T){return T.cols-C})(k>a?o:_,n)+(L-1)*n.cols+1+((k>a?_:o)-1),E(b,u))}},1296:function(I,l,d){var v=this&&this.__decorate||function(F,G,re,ne){var le,X=arguments.length,D=X<3?G:ne===null?ne=Object.getOwnPropertyDescriptor(G,re):ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(F,G,re,ne);else for(var O=F.length-1;O>=0;O--)(le=F[O])&&(D=(X<3?le(D):X>3?le(G,re,D):le(G,re))||D);return X>3&&D&&Object.defineProperty(G,re,D),D},S=this&&this.__param||function(F,G){return function(re,ne){G(re,ne,F)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;const h=d(3787),g=d(2550),x=d(2223),E=d(6171),m=d(6052),o=d(4725),a=d(8055),n=d(8460),u=d(844),_=d(2585),k="xterm-dom-renderer-owner-",b="xterm-rows",L="xterm-fg-",C="xterm-bg-",T="xterm-focus",H="xterm-selection";let U=1,W=l.DomRenderer=class extends u.Disposable{constructor(F,G,re,ne,le,X,D,O,P,B,te,Y,ue){super(),this._terminal=F,this._document=G,this._element=re,this._screenElement=ne,this._viewportElement=le,this._helperContainer=X,this._linkifier2=D,this._charSizeService=P,this._optionsService=B,this._bufferService=te,this._coreBrowserService=Y,this._themeService=ue,this._terminalClass=U++,this._rowElements=[],this._selectionRenderModel=(0,m.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new n.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(b),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(H),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,E.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((de=>this._injectCss(de)))),this._injectCss(this._themeService.colors),this._rowFactory=O.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(k+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((de=>this._handleLinkHover(de)))),this.register(this._linkifier2.onHideLinkUnderline((de=>this._handleLinkLeave(de)))),this.register((0,u.toDisposable)((()=>{this._element.classList.remove(k+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new g.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const F=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*F,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*F),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/F),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/F),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const re of this._rowElements)re.style.width=`${this.dimensions.css.canvas.width}px`,re.style.height=`${this.dimensions.css.cell.height}px`,re.style.lineHeight=`${this.dimensions.css.cell.height}px`,re.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const G=`${this._terminalSelector} .${b} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=G,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(F){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let G=`${this._terminalSelector} .${b} { color: ${F.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;G+=`${this._terminalSelector} .${b} .xterm-dim { color: ${a.color.multiplyOpacity(F.foreground,.5).css};}`,G+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const re=`blink_underline_${this._terminalClass}`,ne=`blink_bar_${this._terminalClass}`,le=`blink_block_${this._terminalClass}`;G+=`@keyframes ${re} { 50% {  border-bottom-style: hidden; }}`,G+=`@keyframes ${ne} { 50% {  box-shadow: none; }}`,G+=`@keyframes ${le} { 0% {  background-color: ${F.cursor.css};  color: ${F.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${F.cursor.css}; }}`,G+=`${this._terminalSelector} .${b}.${T} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${re} 1s step-end infinite;}${this._terminalSelector} .${b}.${T} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${ne} 1s step-end infinite;}${this._terminalSelector} .${b}.${T} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${le} 1s step-end infinite;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block { background-color: ${F.cursor.css}; color: ${F.cursorAccent.css};}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${F.cursor.css} !important; color: ${F.cursorAccent.css} !important;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${F.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${F.cursor.css} inset;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${F.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,G+=`${this._terminalSelector} .${H} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${H} div { position: absolute; background-color: ${F.selectionBackgroundOpaque.css};}${this._terminalSelector} .${H} div { position: absolute; background-color: ${F.selectionInactiveBackgroundOpaque.css};}`;for(const[X,D]of F.ansi.entries())G+=`${this._terminalSelector} .${L}${X} { color: ${D.css}; }${this._terminalSelector} .${L}${X}.xterm-dim { color: ${a.color.multiplyOpacity(D,.5).css}; }${this._terminalSelector} .${C}${X} { background-color: ${D.css}; }`;G+=`${this._terminalSelector} .${L}${x.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(F.background).css}; }${this._terminalSelector} .${L}${x.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(F.background),.5).css}; }${this._terminalSelector} .${C}${x.INVERTED_DEFAULT_COLOR} { background-color: ${F.foreground.css}; }`,this._themeStyleElement.textContent=G}_setDefaultSpacing(){const F=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${F}px`,this._rowFactory.defaultSpacing=F}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(F,G){for(let re=this._rowElements.length;re<=G;re++){const ne=this._document.createElement("div");this._rowContainer.appendChild(ne),this._rowElements.push(ne)}for(;this._rowElements.length>G;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(F,G){this._refreshRowElements(F,G),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(T),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(T),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(F,G,re){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(F,G,re),this.renderRows(0,this._bufferService.rows-1),!F||!G)return;this._selectionRenderModel.update(this._terminal,F,G,re);const ne=this._selectionRenderModel.viewportStartRow,le=this._selectionRenderModel.viewportEndRow,X=this._selectionRenderModel.viewportCappedStartRow,D=this._selectionRenderModel.viewportCappedEndRow;if(X>=this._bufferService.rows||D<0)return;const O=this._document.createDocumentFragment();if(re){const P=F[0]>G[0];O.appendChild(this._createSelectionElement(X,P?G[0]:F[0],P?F[0]:G[0],D-X+1))}else{const P=ne===X?F[0]:0,B=X===le?G[0]:this._bufferService.cols;O.appendChild(this._createSelectionElement(X,P,B));const te=D-X-1;if(O.appendChild(this._createSelectionElement(X+1,0,this._bufferService.cols,te)),X!==D){const Y=le===D?G[0]:this._bufferService.cols;O.appendChild(this._createSelectionElement(D,0,Y))}}this._selectionContainer.appendChild(O)}_createSelectionElement(F,G,re,ne=1){const le=this._document.createElement("div"),X=G*this.dimensions.css.cell.width;let D=this.dimensions.css.cell.width*(re-G);return X+D>this.dimensions.css.canvas.width&&(D=this.dimensions.css.canvas.width-X),le.style.height=ne*this.dimensions.css.cell.height+"px",le.style.top=F*this.dimensions.css.cell.height+"px",le.style.left=`${X}px`,le.style.width=`${D}px`,le}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const F of this._rowElements)F.replaceChildren()}renderRows(F,G){const re=this._bufferService.buffer,ne=re.ybase+re.y,le=Math.min(re.x,this._bufferService.cols-1),X=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,O=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=F;P<=G;P++){const B=P+re.ydisp,te=this._rowElements[P],Y=re.lines.get(B);if(!te||!Y)break;te.replaceChildren(...this._rowFactory.createRow(Y,B,B===ne,D,O,le,X,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${k}${this._terminalClass}`}_handleLinkHover(F){this._setCellUnderline(F.x1,F.x2,F.y1,F.y2,F.cols,!0)}_handleLinkLeave(F){this._setCellUnderline(F.x1,F.x2,F.y1,F.y2,F.cols,!1)}_setCellUnderline(F,G,re,ne,le,X){re<0&&(F=0),ne<0&&(G=0);const D=this._bufferService.rows-1;re=Math.max(Math.min(re,D),0),ne=Math.max(Math.min(ne,D),0),le=Math.min(le,this._bufferService.cols);const O=this._bufferService.buffer,P=O.ybase+O.y,B=Math.min(O.x,le-1),te=this._optionsService.rawOptions.cursorBlink,Y=this._optionsService.rawOptions.cursorStyle,ue=this._optionsService.rawOptions.cursorInactiveStyle;for(let de=re;de<=ne;++de){const K=de+O.ydisp,N=this._rowElements[de],se=O.lines.get(K);if(!N||!se)break;N.replaceChildren(...this._rowFactory.createRow(se,K,K===P,Y,ue,B,te,this.dimensions.css.cell.width,this._widthCache,X?de===re?F:0:-1,X?(de===ne?G:le)-1:-1))}}};l.DomRenderer=W=v([S(7,_.IInstantiationService),S(8,o.ICharSizeService),S(9,_.IOptionsService),S(10,_.IBufferService),S(11,o.ICoreBrowserService),S(12,o.IThemeService)],W)},3787:function(I,l,d){var v=this&&this.__decorate||function(b,L,C,T){var H,U=arguments.length,W=U<3?L:T===null?T=Object.getOwnPropertyDescriptor(L,C):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(b,L,C,T);else for(var F=b.length-1;F>=0;F--)(H=b[F])&&(W=(U<3?H(W):U>3?H(L,C,W):H(L,C))||W);return U>3&&W&&Object.defineProperty(L,C,W),W},S=this&&this.__param||function(b,L){return function(C,T){L(C,T,b)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=void 0;const h=d(2223),g=d(643),x=d(511),E=d(2585),m=d(8055),o=d(4725),a=d(4269),n=d(6171),u=d(3734);let _=l.DomRendererRowFactory=class{constructor(b,L,C,T,H,U,W){this._document=b,this._characterJoinerService=L,this._optionsService=C,this._coreBrowserService=T,this._coreService=H,this._decorationService=U,this._themeService=W,this._workCell=new x.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(b,L,C){this._selectionStart=b,this._selectionEnd=L,this._columnSelectMode=C}createRow(b,L,C,T,H,U,W,F,G,re,ne){const le=[],X=this._characterJoinerService.getJoinedCharacters(L),D=this._themeService.colors;let O,P=b.getNoBgTrimmedLength();C&&P<U+1&&(P=U+1);let B=0,te="",Y=0,ue=0,de=0,K=!1,N=0,se=!1,ee=0;const pe=[],fe=re!==-1&&ne!==-1;for(let Le=0;Le<P;Le++){b.loadCell(Le,this._workCell);let Ie=this._workCell.getWidth();if(Ie===0)continue;let He=!1,ot=Le,be=this._workCell;if(X.length>0&&Le===X[0][0]){He=!0;const ze=X.shift();be=new a.JoinedCellData(this._workCell,b.translateToString(!0,ze[0],ze[1]),ze[1]-ze[0]),ot=ze[1]-1,Ie=be.getWidth()}const Lr=this._isCellInSelection(Le,L),hs=C&&Le===U,dr=fe&&Le>=re&&Le<=ne;let rr=!1;this._decorationService.forEachDecorationAtCell(Le,L,void 0,(ze=>{rr=!0}));let Dr=be.getChars()||g.WHITESPACE_CELL_CHAR;if(Dr===" "&&(be.isUnderline()||be.isOverline())&&(Dr=""),ee=Ie*F-G.get(Dr,be.isBold(),be.isItalic()),O){if(B&&(Lr&&se||!Lr&&!se&&be.bg===Y)&&(Lr&&se&&D.selectionForeground||be.fg===ue)&&be.extended.ext===de&&dr===K&&ee===N&&!hs&&!He&&!rr){be.isInvisible()?te+=g.WHITESPACE_CELL_CHAR:te+=Dr,B++;continue}B&&(O.textContent=te),O=this._document.createElement("span"),B=0,te=""}else O=this._document.createElement("span");if(Y=be.bg,ue=be.fg,de=be.extended.ext,K=dr,N=ee,se=Lr,He&&U>=Le&&U<=ot&&(U=Le),!this._coreService.isCursorHidden&&hs&&this._coreService.isCursorInitialized){if(pe.push("xterm-cursor"),this._coreBrowserService.isFocused)W&&pe.push("xterm-cursor-blink"),pe.push(T==="bar"?"xterm-cursor-bar":T==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(H)switch(H){case"outline":pe.push("xterm-cursor-outline");break;case"block":pe.push("xterm-cursor-block");break;case"bar":pe.push("xterm-cursor-bar");break;case"underline":pe.push("xterm-cursor-underline")}}if(be.isBold()&&pe.push("xterm-bold"),be.isItalic()&&pe.push("xterm-italic"),be.isDim()&&pe.push("xterm-dim"),te=be.isInvisible()?g.WHITESPACE_CELL_CHAR:be.getChars()||g.WHITESPACE_CELL_CHAR,be.isUnderline()&&(pe.push(`xterm-underline-${be.extended.underlineStyle}`),te===" "&&(te=""),!be.isUnderlineColorDefault()))if(be.isUnderlineColorRGB())O.style.textDecorationColor=`rgb(${u.AttributeData.toColorRGB(be.getUnderlineColor()).join(",")})`;else{let ze=be.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&be.isBold()&&ze<8&&(ze+=8),O.style.textDecorationColor=D.ansi[ze].css}be.isOverline()&&(pe.push("xterm-overline"),te===" "&&(te="")),be.isStrikethrough()&&pe.push("xterm-strikethrough"),dr&&(O.style.textDecoration="underline");let pt=be.getFgColor(),Pr=be.getFgColorMode(),Pt=be.getBgColor(),Tr=be.getBgColorMode();const ds=!!be.isInverse();if(ds){const ze=pt;pt=Pt,Pt=ze;const kn=Pr;Pr=Tr,Tr=kn}let Tt,fs,xt,qt=!1;switch(this._decorationService.forEachDecorationAtCell(Le,L,void 0,(ze=>{ze.options.layer!=="top"&&qt||(ze.backgroundColorRGB&&(Tr=50331648,Pt=ze.backgroundColorRGB.rgba>>8&16777215,Tt=ze.backgroundColorRGB),ze.foregroundColorRGB&&(Pr=50331648,pt=ze.foregroundColorRGB.rgba>>8&16777215,fs=ze.foregroundColorRGB),qt=ze.options.layer==="top")})),!qt&&Lr&&(Tt=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,Pt=Tt.rgba>>8&16777215,Tr=50331648,qt=!0,D.selectionForeground&&(Pr=50331648,pt=D.selectionForeground.rgba>>8&16777215,fs=D.selectionForeground)),qt&&pe.push("xterm-decoration-top"),Tr){case 16777216:case 33554432:xt=D.ansi[Pt],pe.push(`xterm-bg-${Pt}`);break;case 50331648:xt=m.channels.toColor(Pt>>16,Pt>>8&255,255&Pt),this._addStyle(O,`background-color:#${k((Pt>>>0).toString(16),"0",6)}`);break;default:ds?(xt=D.foreground,pe.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):xt=D.background}switch(Tt||be.isDim()&&(Tt=m.color.multiplyOpacity(xt,.5)),Pr){case 16777216:case 33554432:be.isBold()&&pt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(pt+=8),this._applyMinimumContrast(O,xt,D.ansi[pt],be,Tt,void 0)||pe.push(`xterm-fg-${pt}`);break;case 50331648:const ze=m.channels.toColor(pt>>16&255,pt>>8&255,255&pt);this._applyMinimumContrast(O,xt,ze,be,Tt,fs)||this._addStyle(O,`color:#${k(pt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(O,xt,D.foreground,be,Tt,fs)||ds&&pe.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}pe.length&&(O.className=pe.join(" "),pe.length=0),hs||He||rr?O.textContent=te:B++,ee!==this.defaultSpacing&&(O.style.letterSpacing=`${ee}px`),le.push(O),Le=ot}return O&&B&&(O.textContent=te),le}_applyMinimumContrast(b,L,C,T,H,U){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,n.treatGlyphAsBackgroundColor)(T.getCode()))return!1;const W=this._getContrastCache(T);let F;if(H||U||(F=W.getColor(L.rgba,C.rgba)),F===void 0){const G=this._optionsService.rawOptions.minimumContrastRatio/(T.isDim()?2:1);F=m.color.ensureContrastRatio(H||L,U||C,G),W.setColor((H||L).rgba,(U||C).rgba,F??null)}return!!F&&(this._addStyle(b,`color:${F.css}`),!0)}_getContrastCache(b){return b.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(b,L){b.setAttribute("style",`${b.getAttribute("style")||""}${L};`)}_isCellInSelection(b,L){const C=this._selectionStart,T=this._selectionEnd;return!(!C||!T)&&(this._columnSelectMode?C[0]<=T[0]?b>=C[0]&&L>=C[1]&&b<T[0]&&L<=T[1]:b<C[0]&&L>=C[1]&&b>=T[0]&&L<=T[1]:L>C[1]&&L<T[1]||C[1]===T[1]&&L===C[1]&&b>=C[0]&&b<T[0]||C[1]<T[1]&&L===T[1]&&b<T[0]||C[1]<T[1]&&L===C[1]&&b>=C[0])}};function k(b,L,C){for(;b.length<C;)b=L+b;return b}l.DomRendererRowFactory=_=v([S(1,o.ICharacterJoinerService),S(2,E.IOptionsService),S(3,o.ICoreBrowserService),S(4,E.ICoreService),S(5,E.IDecorationService),S(6,o.IThemeService)],_)},2550:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WidthCache=void 0,l.WidthCache=class{constructor(d,v){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=d.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const S=d.createElement("span");S.classList.add("xterm-char-measure-element");const h=d.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const g=d.createElement("span");g.classList.add("xterm-char-measure-element"),g.style.fontStyle="italic";const x=d.createElement("span");x.classList.add("xterm-char-measure-element"),x.style.fontWeight="bold",x.style.fontStyle="italic",this._measureElements=[S,h,g,x],this._container.appendChild(S),this._container.appendChild(h),this._container.appendChild(g),this._container.appendChild(x),v.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(d,v,S,h){d===this._font&&v===this._fontSize&&S===this._weight&&h===this._weightBold||(this._font=d,this._fontSize=v,this._weight=S,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${S}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${S}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(d,v,S){let h=0;if(!v&&!S&&d.length===1&&(h=d.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const E=this._measure(d,0);return E>0&&(this._flat[h]=E),E}let g=d;v&&(g+="B"),S&&(g+="I");let x=this._holey.get(g);if(x===void 0){let E=0;v&&(E|=1),S&&(E|=2),x=this._measure(d,E),x>0&&this._holey.set(g,x)}return x}_measure(d,v){const S=this._measureElements[v];return S.textContent=d.repeat(32),S.offsetWidth/32}}},2223:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const v=d(6114);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=v.isFirefox||v.isLegacyEdge?"bottom":"ideographic"},6171:(I,l)=>{function d(S){return 57508<=S&&S<=57558}function v(S){return S>=128512&&S<=128591||S>=127744&&S<=128511||S>=128640&&S<=128767||S>=9728&&S<=9983||S>=9984&&S<=10175||S>=65024&&S<=65039||S>=129280&&S<=129535||S>=127462&&S<=127487}Object.defineProperty(l,"__esModule",{value:!0}),l.computeNextVariantOffset=l.createRenderDimensions=l.treatGlyphAsBackgroundColor=l.allowRescaling=l.isEmoji=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(S){if(!S)throw new Error("value must not be falsy");return S},l.isPowerlineGlyph=d,l.isRestrictedPowerlineGlyph=function(S){return 57520<=S&&S<=57527},l.isEmoji=v,l.allowRescaling=function(S,h,g,x){return h===1&&g>Math.ceil(1.5*x)&&S!==void 0&&S>255&&!v(S)&&!d(S)&&!(function(E){return 57344<=E&&E<=63743})(S)},l.treatGlyphAsBackgroundColor=function(S){return d(S)||(function(h){return 9472<=h&&h<=9631})(S)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},l.computeNextVariantOffset=function(S,h,g=0){return(S-(2*Math.round(h)-g))%(2*Math.round(h))}},6052:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createSelectionRenderModel=void 0;class d{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(S,h,g,x=!1){if(this.selectionStart=h,this.selectionEnd=g,!h||!g||h[0]===g[0]&&h[1]===g[1])return void this.clear();const E=S.buffers.active.ydisp,m=h[1]-E,o=g[1]-E,a=Math.max(m,0),n=Math.min(o,S.rows-1);a>=S.rows||n<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=x,this.viewportStartRow=m,this.viewportEndRow=o,this.viewportCappedStartRow=a,this.viewportCappedEndRow=n,this.startCol=h[0],this.endCol=g[0])}isCellSelected(S,h,g){return!!this.hasSelection&&(g-=S.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&g>=this.viewportCappedStartRow&&h<this.endCol&&g<=this.viewportCappedEndRow:h<this.startCol&&g>=this.viewportCappedStartRow&&h>=this.endCol&&g<=this.viewportCappedEndRow:g>this.viewportStartRow&&g<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&g===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportStartRow&&h>=this.startCol)}}l.createSelectionRenderModel=function(){return new d}},456:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0,l.SelectionModel=class{constructor(d){this._bufferService=d,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?d%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)-1]:[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[d,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[Math.max(d,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const d=this.selectionStart,v=this.selectionEnd;return!(!d||!v)&&(d[1]>v[1]||d[1]===v[1]&&d[0]>v[0])}handleTrim(d){return this.selectionStart&&(this.selectionStart[1]-=d),this.selectionEnd&&(this.selectionEnd[1]-=d),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(I,l,d){var v=this&&this.__decorate||function(n,u,_,k){var b,L=arguments.length,C=L<3?u:k===null?k=Object.getOwnPropertyDescriptor(u,_):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,u,_,k);else for(var T=n.length-1;T>=0;T--)(b=n[T])&&(C=(L<3?b(C):L>3?b(u,_,C):b(u,_))||C);return L>3&&C&&Object.defineProperty(u,_,C),C},S=this&&this.__param||function(n,u){return function(_,k){u(_,k,n)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;const h=d(2585),g=d(8460),x=d(844);let E=l.CharSizeService=class extends x.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(n,u,_){super(),this._optionsService=_,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new a(this._optionsService))}catch{this._measureStrategy=this.register(new o(n,u,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const n=this._measureStrategy.measure();n.width===this.width&&n.height===this.height||(this.width=n.width,this.height=n.height,this._onCharSizeChange.fire())}};l.CharSizeService=E=v([S(2,h.IOptionsService)],E);class m extends x.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(u,_){u!==void 0&&u>0&&_!==void 0&&_>0&&(this._result.width=u,this._result.height=_)}}class o extends m{constructor(u,_,k){super(),this._document=u,this._parentElement=_,this._optionsService=k,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class a extends m{constructor(u){super(),this._optionsService=u,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const _=this._ctx.measureText("W");if(!("width"in _&&"fontBoundingBoxAscent"in _&&"fontBoundingBoxDescent"in _))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const u=this._ctx.measureText("W");return this._validateAndSet(u.width,u.fontBoundingBoxAscent+u.fontBoundingBoxDescent),this._result}}},4269:function(I,l,d){var v=this&&this.__decorate||function(a,n,u,_){var k,b=arguments.length,L=b<3?n:_===null?_=Object.getOwnPropertyDescriptor(n,u):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(a,n,u,_);else for(var C=a.length-1;C>=0;C--)(k=a[C])&&(L=(b<3?k(L):b>3?k(n,u,L):k(n,u))||L);return b>3&&L&&Object.defineProperty(n,u,L),L},S=this&&this.__param||function(a,n){return function(u,_){n(u,_,a)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const h=d(3734),g=d(643),x=d(511),E=d(2585);class m extends h.AttributeData{constructor(n,u,_){super(),this.content=0,this.combinedData="",this.fg=n.fg,this.bg=n.bg,this.combinedData=u,this._width=_}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(n){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=m;let o=l.CharacterJoinerService=class Sf{constructor(n){this._bufferService=n,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new x.CellData}register(n){const u={id:this._nextCharacterJoinerId++,handler:n};return this._characterJoiners.push(u),u.id}deregister(n){for(let u=0;u<this._characterJoiners.length;u++)if(this._characterJoiners[u].id===n)return this._characterJoiners.splice(u,1),!0;return!1}getJoinedCharacters(n){if(this._characterJoiners.length===0)return[];const u=this._bufferService.buffer.lines.get(n);if(!u||u.length===0)return[];const _=[],k=u.translateToString(!0);let b=0,L=0,C=0,T=u.getFg(0),H=u.getBg(0);for(let U=0;U<u.getTrimmedLength();U++)if(u.loadCell(U,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==T||this._workCell.bg!==H){if(U-b>1){const W=this._getJoinedRanges(k,C,L,u,b);for(let F=0;F<W.length;F++)_.push(W[F])}b=U,C=L,T=this._workCell.fg,H=this._workCell.bg}L+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){const U=this._getJoinedRanges(k,C,L,u,b);for(let W=0;W<U.length;W++)_.push(U[W])}return _}_getJoinedRanges(n,u,_,k,b){const L=n.substring(u,_);let C=[];try{C=this._characterJoiners[0].handler(L)}catch(T){console.error(T)}for(let T=1;T<this._characterJoiners.length;T++)try{const H=this._characterJoiners[T].handler(L);for(let U=0;U<H.length;U++)Sf._mergeRanges(C,H[U])}catch(H){console.error(H)}return this._stringRangesToCellRanges(C,k,b),C}_stringRangesToCellRanges(n,u,_){let k=0,b=!1,L=0,C=n[k];if(C){for(let T=_;T<this._bufferService.cols;T++){const H=u.getWidth(T),U=u.getString(T).length||g.WHITESPACE_CELL_CHAR.length;if(H!==0){if(!b&&C[0]<=L&&(C[0]=T,b=!0),C[1]<=L){if(C[1]=T,C=n[++k],!C)break;C[0]<=L?(C[0]=T,b=!0):b=!1}L+=U}}C&&(C[1]=this._bufferService.cols)}}static _mergeRanges(n,u){let _=!1;for(let k=0;k<n.length;k++){const b=n[k];if(_){if(u[1]<=b[0])return n[k-1][1]=u[1],n;if(u[1]<=b[1])return n[k-1][1]=Math.max(u[1],b[1]),n.splice(k,1),n;n.splice(k,1),k--}else{if(u[1]<=b[0])return n.splice(k,0,u),n;if(u[1]<=b[1])return b[0]=Math.min(u[0],b[0]),n;u[0]<b[1]&&(b[0]=Math.min(u[0],b[0]),_=!0)}}return _?n[n.length-1][1]=u[1]:n.push(u),n}};l.CharacterJoinerService=o=v([S(0,E.IBufferService)],o)},5114:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0;const v=d(844),S=d(8460),h=d(3656);class g extends v.Disposable{constructor(m,o,a){super(),this._textarea=m,this._window=o,this.mainDocument=a,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new x(this._window),this._onDprChange=this.register(new S.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new S.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((n=>this._screenDprMonitor.setWindow(n)))),this.register((0,S.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(m){this._window!==m&&(this._window=m,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}l.CoreBrowserService=g;class x extends v.Disposable{constructor(m){super(),this._parentWindow=m,this._windowResizeListener=this.register(new v.MutableDisposable),this._onDprChange=this.register(new S.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,v.toDisposable)((()=>this.clearListener())))}setWindow(m){this._parentWindow=m,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var m;this._outerListener&&((m=this._resolutionMediaMatchList)==null||m.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkProviderService=void 0;const v=d(844);class S extends v.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,v.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(g){return this.linkProviders.push(g),{dispose:()=>{const x=this.linkProviders.indexOf(g);x!==-1&&this.linkProviders.splice(x,1)}}}}l.LinkProviderService=S},8934:function(I,l,d){var v=this&&this.__decorate||function(E,m,o,a){var n,u=arguments.length,_=u<3?m:a===null?a=Object.getOwnPropertyDescriptor(m,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(E,m,o,a);else for(var k=E.length-1;k>=0;k--)(n=E[k])&&(_=(u<3?n(_):u>3?n(m,o,_):n(m,o))||_);return u>3&&_&&Object.defineProperty(m,o,_),_},S=this&&this.__param||function(E,m){return function(o,a){m(o,a,E)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;const h=d(4725),g=d(9806);let x=l.MouseService=class{constructor(E,m){this._renderService=E,this._charSizeService=m}getCoords(E,m,o,a,n){return(0,g.getCoords)(window,E,m,o,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,n)}getMouseReportCoords(E,m){const o=(0,g.getCoordsRelativeToElement)(window,E,m);if(this._charSizeService.hasValidSize)return o[0]=Math.min(Math.max(o[0],0),this._renderService.dimensions.css.canvas.width-1),o[1]=Math.min(Math.max(o[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(o[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(o[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(o[0]),y:Math.floor(o[1])}}};l.MouseService=x=v([S(0,h.IRenderService),S(1,h.ICharSizeService)],x)},3230:function(I,l,d){var v=this&&this.__decorate||function(n,u,_,k){var b,L=arguments.length,C=L<3?u:k===null?k=Object.getOwnPropertyDescriptor(u,_):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,u,_,k);else for(var T=n.length-1;T>=0;T--)(b=n[T])&&(C=(L<3?b(C):L>3?b(u,_,C):b(u,_))||C);return L>3&&C&&Object.defineProperty(u,_,C),C},S=this&&this.__param||function(n,u){return function(_,k){u(_,k,n)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;const h=d(6193),g=d(4725),x=d(8460),E=d(844),m=d(7226),o=d(2585);let a=l.RenderService=class extends E.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(n,u,_,k,b,L,C,T){super(),this._rowCount=n,this._charSizeService=k,this._renderer=this.register(new E.MutableDisposable),this._pausedResizeTask=new m.DebouncedIdleTask,this._observerDisposable=this.register(new E.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new x.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new x.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new x.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new x.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer(((H,U)=>this._renderRows(H,U)),C),this.register(this._renderDebouncer),this.register(C.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(L.onResize((()=>this._fullRefresh()))),this.register(L.buffers.onBufferActivate((()=>{var H;return(H=this._renderer.value)==null?void 0:H.clear()}))),this.register(_.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(b.onDecorationRegistered((()=>this._fullRefresh()))),this.register(b.onDecorationRemoved((()=>this._fullRefresh()))),this.register(_.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(L.cols,L.rows),this._fullRefresh()}))),this.register(_.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(L.buffer.y,L.buffer.y,!0)))),this.register(T.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(C.window,u),this.register(C.onWindowChange((H=>this._registerIntersectionObserver(H,u))))}_registerIntersectionObserver(n,u){if("IntersectionObserver"in n){const _=new n.IntersectionObserver((k=>this._handleIntersectionChange(k[k.length-1])),{threshold:0});_.observe(u),this._observerDisposable.value=(0,E.toDisposable)((()=>_.disconnect()))}}_handleIntersectionChange(n){this._isPaused=n.isIntersecting===void 0?n.intersectionRatio===0:!n.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(n,u,_=!1){this._isPaused?this._needsFullRefresh=!0:(_||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(n,u,this._rowCount))}_renderRows(n,u){this._renderer.value&&(n=Math.min(n,this._rowCount-1),u=Math.min(u,this._rowCount-1),this._renderer.value.renderRows(n,u),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:n,end:u}),this._onRender.fire({start:n,end:u}),this._isNextRenderRedrawOnly=!0)}resize(n,u){this._rowCount=u,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(n){this._renderer.value=n,this._renderer.value&&(this._renderer.value.onRequestRedraw((u=>this.refreshRows(u.start,u.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(n){return this._renderDebouncer.addRefreshCallback(n)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var n,u;this._renderer.value&&((u=(n=this._renderer.value).clearTextureAtlas)==null||u.call(n),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(n,u){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>{var _;return(_=this._renderer.value)==null?void 0:_.handleResize(n,u)})):this._renderer.value.handleResize(n,u),this._fullRefresh())}handleCharSizeChanged(){var n;(n=this._renderer.value)==null||n.handleCharSizeChanged()}handleBlur(){var n;(n=this._renderer.value)==null||n.handleBlur()}handleFocus(){var n;(n=this._renderer.value)==null||n.handleFocus()}handleSelectionChanged(n,u,_){var k;this._selectionState.start=n,this._selectionState.end=u,this._selectionState.columnSelectMode=_,(k=this._renderer.value)==null||k.handleSelectionChanged(n,u,_)}handleCursorMove(){var n;(n=this._renderer.value)==null||n.handleCursorMove()}clear(){var n;(n=this._renderer.value)==null||n.clear()}};l.RenderService=a=v([S(2,o.IOptionsService),S(3,g.ICharSizeService),S(4,o.IDecorationService),S(5,o.IBufferService),S(6,g.ICoreBrowserService),S(7,g.IThemeService)],a)},9312:function(I,l,d){var v=this&&this.__decorate||function(C,T,H,U){var W,F=arguments.length,G=F<3?T:U===null?U=Object.getOwnPropertyDescriptor(T,H):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(C,T,H,U);else for(var re=C.length-1;re>=0;re--)(W=C[re])&&(G=(F<3?W(G):F>3?W(T,H,G):W(T,H))||G);return F>3&&G&&Object.defineProperty(T,H,G),G},S=this&&this.__param||function(C,T){return function(H,U){T(H,U,C)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;const h=d(9806),g=d(9504),x=d(456),E=d(4725),m=d(8460),o=d(844),a=d(6114),n=d(4841),u=d(511),_=d(2585),k="",b=new RegExp(k,"g");let L=l.SelectionService=class extends o.Disposable{constructor(C,T,H,U,W,F,G,re,ne){super(),this._element=C,this._screenElement=T,this._linkifier=H,this._bufferService=U,this._coreService=W,this._mouseService=F,this._optionsService=G,this._renderService=re,this._coreBrowserService=ne,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new u.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new m.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new m.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new m.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=le=>this._handleMouseMove(le),this._mouseUpListener=le=>this._handleMouseUp(le),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((le=>this._handleTrim(le))),this.register(this._bufferService.buffers.onBufferActivate((le=>this._handleBufferActivate(le)))),this.enable(),this._model=new x.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,o.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const C=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!(!C||!T||C[0]===T[0]&&C[1]===T[1])}get selectionText(){const C=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;if(!C||!T)return"";const H=this._bufferService.buffer,U=[];if(this._activeSelectionMode===3){if(C[0]===T[0])return"";const W=C[0]<T[0]?C[0]:T[0],F=C[0]<T[0]?T[0]:C[0];for(let G=C[1];G<=T[1];G++){const re=H.translateBufferLineToString(G,!0,W,F);U.push(re)}}else{const W=C[1]===T[1]?T[0]:void 0;U.push(H.translateBufferLineToString(C[1],!0,C[0],W));for(let F=C[1]+1;F<=T[1]-1;F++){const G=H.lines.get(F),re=H.translateBufferLineToString(F,!0);G!=null&&G.isWrapped?U[U.length-1]+=re:U.push(re)}if(C[1]!==T[1]){const F=H.lines.get(T[1]),G=H.translateBufferLineToString(T[1],!0,0,T[0]);F&&F.isWrapped?U[U.length-1]+=G:U.push(G)}}return U.map((W=>W.replace(b," "))).join(a.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(C){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),a.isLinux&&C&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(C){const T=this._getMouseBufferCoords(C),H=this._model.finalSelectionStart,U=this._model.finalSelectionEnd;return!!(H&&U&&T)&&this._areCoordsInSelection(T,H,U)}isCellInSelection(C,T){const H=this._model.finalSelectionStart,U=this._model.finalSelectionEnd;return!(!H||!U)&&this._areCoordsInSelection([C,T],H,U)}_areCoordsInSelection(C,T,H){return C[1]>T[1]&&C[1]<H[1]||T[1]===H[1]&&C[1]===T[1]&&C[0]>=T[0]&&C[0]<H[0]||T[1]<H[1]&&C[1]===H[1]&&C[0]<H[0]||T[1]<H[1]&&C[1]===T[1]&&C[0]>=T[0]}_selectWordAtCursor(C,T){var W,F;const H=(F=(W=this._linkifier.currentLink)==null?void 0:W.link)==null?void 0:F.range;if(H)return this._model.selectionStart=[H.start.x-1,H.start.y-1],this._model.selectionStartLength=(0,n.getRangeLength)(H,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const U=this._getMouseBufferCoords(C);return!!U&&(this._selectWordAt(U,T),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(C,T){this._model.clearSelection(),C=Math.max(C,0),T=Math.min(T,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,C],this._model.selectionEnd=[this._bufferService.cols,T],this.refresh(),this._onSelectionChange.fire()}_handleTrim(C){this._model.handleTrim(C)&&this.refresh()}_getMouseBufferCoords(C){const T=this._mouseService.getCoords(C,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(T)return T[0]--,T[1]--,T[1]+=this._bufferService.buffer.ydisp,T}_getMouseEventScrollAmount(C){let T=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,C,this._screenElement)[1];const H=this._renderService.dimensions.css.canvas.height;return T>=0&&T<=H?0:(T>H&&(T-=H),T=Math.min(Math.max(T,-50),50),T/=50,T/Math.abs(T)+Math.round(14*T))}shouldForceSelection(C){return a.isMac?C.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:C.shiftKey}handleMouseDown(C){if(this._mouseDownTimeStamp=C.timeStamp,(C.button!==2||!this.hasSelection)&&C.button===0){if(!this._enabled){if(!this.shouldForceSelection(C))return;C.stopPropagation()}C.preventDefault(),this._dragScrollAmount=0,this._enabled&&C.shiftKey?this._handleIncrementalClick(C):C.detail===1?this._handleSingleClick(C):C.detail===2?this._handleDoubleClick(C):C.detail===3&&this._handleTripleClick(C),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(C){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(C))}_handleSingleClick(C){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(C)?3:0,this._model.selectionStart=this._getMouseBufferCoords(C),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const T=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);T&&T.length!==this._model.selectionStart[0]&&T.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(C){this._selectWordAtCursor(C,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(C){const T=this._getMouseBufferCoords(C);T&&(this._activeSelectionMode=2,this._selectLineAt(T[1]))}shouldColumnSelect(C){return C.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(C){if(C.stopImmediatePropagation(),!this._model.selectionStart)return;const T=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(C),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(C),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const H=this._bufferService.buffer;if(this._model.selectionEnd[1]<H.lines.length){const U=H.lines.get(this._model.selectionEnd[1]);U&&U.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}T&&T[0]===this._model.selectionEnd[0]&&T[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const C=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(C.ydisp+this._bufferService.rows,C.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=C.ydisp),this.refresh()}}_handleMouseUp(C){const T=C.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&T<500&&C.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const H=this._mouseService.getCoords(C,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(H&&H[0]!==void 0&&H[1]!==void 0){const U=(0,g.moveToCellSequence)(H[0]-1,H[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(U,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const C=this._model.finalSelectionStart,T=this._model.finalSelectionEnd,H=!(!C||!T||C[0]===T[0]&&C[1]===T[1]);H?C&&T&&(this._oldSelectionStart&&this._oldSelectionEnd&&C[0]===this._oldSelectionStart[0]&&C[1]===this._oldSelectionStart[1]&&T[0]===this._oldSelectionEnd[0]&&T[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(C,T,H)):this._oldHasSelection&&this._fireOnSelectionChange(C,T,H)}_fireOnSelectionChange(C,T,H){this._oldSelectionStart=C,this._oldSelectionEnd=T,this._oldHasSelection=H,this._onSelectionChange.fire()}_handleBufferActivate(C){this.clearSelection(),this._trimListener.dispose(),this._trimListener=C.activeBuffer.lines.onTrim((T=>this._handleTrim(T)))}_convertViewportColToCharacterIndex(C,T){let H=T;for(let U=0;T>=U;U++){const W=C.loadCell(U,this._workCell).getChars().length;this._workCell.getWidth()===0?H--:W>1&&T!==U&&(H+=W-1)}return H}setSelection(C,T,H){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[C,T],this._model.selectionStartLength=H,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(C){this._isClickInSelection(C)||(this._selectWordAtCursor(C,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(C,T,H=!0,U=!0){if(C[0]>=this._bufferService.cols)return;const W=this._bufferService.buffer,F=W.lines.get(C[1]);if(!F)return;const G=W.translateBufferLineToString(C[1],!1);let re=this._convertViewportColToCharacterIndex(F,C[0]),ne=re;const le=C[0]-re;let X=0,D=0,O=0,P=0;if(G.charAt(re)===" "){for(;re>0&&G.charAt(re-1)===" ";)re--;for(;ne<G.length&&G.charAt(ne+1)===" ";)ne++}else{let Y=C[0],ue=C[0];F.getWidth(Y)===0&&(X++,Y--),F.getWidth(ue)===2&&(D++,ue++);const de=F.getString(ue).length;for(de>1&&(P+=de-1,ne+=de-1);Y>0&&re>0&&!this._isCharWordSeparator(F.loadCell(Y-1,this._workCell));){F.loadCell(Y-1,this._workCell);const K=this._workCell.getChars().length;this._workCell.getWidth()===0?(X++,Y--):K>1&&(O+=K-1,re-=K-1),re--,Y--}for(;ue<F.length&&ne+1<G.length&&!this._isCharWordSeparator(F.loadCell(ue+1,this._workCell));){F.loadCell(ue+1,this._workCell);const K=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,ue++):K>1&&(P+=K-1,ne+=K-1),ne++,ue++}}ne++;let B=re+le-X+O,te=Math.min(this._bufferService.cols,ne-re+X+D-O-P);if(T||G.slice(re,ne).trim()!==""){if(H&&B===0&&F.getCodePoint(0)!==32){const Y=W.lines.get(C[1]-1);if(Y&&F.isWrapped&&Y.getCodePoint(this._bufferService.cols-1)!==32){const ue=this._getWordAt([this._bufferService.cols-1,C[1]-1],!1,!0,!1);if(ue){const de=this._bufferService.cols-ue.start;B-=de,te+=de}}}if(U&&B+te===this._bufferService.cols&&F.getCodePoint(this._bufferService.cols-1)!==32){const Y=W.lines.get(C[1]+1);if(Y!=null&&Y.isWrapped&&Y.getCodePoint(0)!==32){const ue=this._getWordAt([0,C[1]+1],!1,!1,!0);ue&&(te+=ue.length)}}return{start:B,length:te}}}_selectWordAt(C,T){const H=this._getWordAt(C,T);if(H){for(;H.start<0;)H.start+=this._bufferService.cols,C[1]--;this._model.selectionStart=[H.start,C[1]],this._model.selectionStartLength=H.length}}_selectToWordAt(C){const T=this._getWordAt(C,!0);if(T){let H=C[1];for(;T.start<0;)T.start+=this._bufferService.cols,H--;if(!this._model.areSelectionValuesReversed())for(;T.start+T.length>this._bufferService.cols;)T.length-=this._bufferService.cols,H++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?T.start:T.start+T.length,H]}}_isCharWordSeparator(C){return C.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(C.getChars())>=0}_selectLineAt(C){const T=this._bufferService.buffer.getWrappedRangeForLine(C),H={start:{x:0,y:T.first},end:{x:this._bufferService.cols-1,y:T.last}};this._model.selectionStart=[0,T.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,n.getRangeLength)(H,this._bufferService.cols)}};l.SelectionService=L=v([S(3,_.IBufferService),S(4,_.ICoreService),S(5,E.IMouseService),S(6,_.IOptionsService),S(7,E.IRenderService),S(8,E.ICoreBrowserService)],L)},4725:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ILinkProviderService=l.IThemeService=l.ICharacterJoinerService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;const v=d(8343);l.ICharSizeService=(0,v.createDecorator)("CharSizeService"),l.ICoreBrowserService=(0,v.createDecorator)("CoreBrowserService"),l.IMouseService=(0,v.createDecorator)("MouseService"),l.IRenderService=(0,v.createDecorator)("RenderService"),l.ISelectionService=(0,v.createDecorator)("SelectionService"),l.ICharacterJoinerService=(0,v.createDecorator)("CharacterJoinerService"),l.IThemeService=(0,v.createDecorator)("ThemeService"),l.ILinkProviderService=(0,v.createDecorator)("LinkProviderService")},6731:function(I,l,d){var v=this&&this.__decorate||function(L,C,T,H){var U,W=arguments.length,F=W<3?C:H===null?H=Object.getOwnPropertyDescriptor(C,T):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(L,C,T,H);else for(var G=L.length-1;G>=0;G--)(U=L[G])&&(F=(W<3?U(F):W>3?U(C,T,F):U(C,T))||F);return W>3&&F&&Object.defineProperty(C,T,F),F},S=this&&this.__param||function(L,C){return function(T,H){C(T,H,L)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ThemeService=l.DEFAULT_ANSI_COLORS=void 0;const h=d(7239),g=d(8055),x=d(8460),E=d(844),m=d(2585),o=g.css.toColor("#ffffff"),a=g.css.toColor("#000000"),n=g.css.toColor("#ffffff"),u=g.css.toColor("#000000"),_={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const L=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],C=[0,95,135,175,215,255];for(let T=0;T<216;T++){const H=C[T/36%6|0],U=C[T/6%6|0],W=C[T%6];L.push({css:g.channels.toCss(H,U,W),rgba:g.channels.toRgba(H,U,W)})}for(let T=0;T<24;T++){const H=8+10*T;L.push({css:g.channels.toCss(H,H,H),rgba:g.channels.toRgba(H,H,H)})}return L})());let k=l.ThemeService=class extends E.Disposable{get colors(){return this._colors}constructor(L){super(),this._optionsService=L,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new x.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:o,background:a,cursor:n,cursorAccent:u,selectionForeground:void 0,selectionBackgroundTransparent:_,selectionBackgroundOpaque:g.color.blend(a,_),selectionInactiveBackgroundTransparent:_,selectionInactiveBackgroundOpaque:g.color.blend(a,_),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(L={}){const C=this._colors;if(C.foreground=b(L.foreground,o),C.background=b(L.background,a),C.cursor=b(L.cursor,n),C.cursorAccent=b(L.cursorAccent,u),C.selectionBackgroundTransparent=b(L.selectionBackground,_),C.selectionBackgroundOpaque=g.color.blend(C.background,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundTransparent=b(L.selectionInactiveBackground,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundOpaque=g.color.blend(C.background,C.selectionInactiveBackgroundTransparent),C.selectionForeground=L.selectionForeground?b(L.selectionForeground,g.NULL_COLOR):void 0,C.selectionForeground===g.NULL_COLOR&&(C.selectionForeground=void 0),g.color.isOpaque(C.selectionBackgroundTransparent)&&(C.selectionBackgroundTransparent=g.color.opacity(C.selectionBackgroundTransparent,.3)),g.color.isOpaque(C.selectionInactiveBackgroundTransparent)&&(C.selectionInactiveBackgroundTransparent=g.color.opacity(C.selectionInactiveBackgroundTransparent,.3)),C.ansi=l.DEFAULT_ANSI_COLORS.slice(),C.ansi[0]=b(L.black,l.DEFAULT_ANSI_COLORS[0]),C.ansi[1]=b(L.red,l.DEFAULT_ANSI_COLORS[1]),C.ansi[2]=b(L.green,l.DEFAULT_ANSI_COLORS[2]),C.ansi[3]=b(L.yellow,l.DEFAULT_ANSI_COLORS[3]),C.ansi[4]=b(L.blue,l.DEFAULT_ANSI_COLORS[4]),C.ansi[5]=b(L.magenta,l.DEFAULT_ANSI_COLORS[5]),C.ansi[6]=b(L.cyan,l.DEFAULT_ANSI_COLORS[6]),C.ansi[7]=b(L.white,l.DEFAULT_ANSI_COLORS[7]),C.ansi[8]=b(L.brightBlack,l.DEFAULT_ANSI_COLORS[8]),C.ansi[9]=b(L.brightRed,l.DEFAULT_ANSI_COLORS[9]),C.ansi[10]=b(L.brightGreen,l.DEFAULT_ANSI_COLORS[10]),C.ansi[11]=b(L.brightYellow,l.DEFAULT_ANSI_COLORS[11]),C.ansi[12]=b(L.brightBlue,l.DEFAULT_ANSI_COLORS[12]),C.ansi[13]=b(L.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),C.ansi[14]=b(L.brightCyan,l.DEFAULT_ANSI_COLORS[14]),C.ansi[15]=b(L.brightWhite,l.DEFAULT_ANSI_COLORS[15]),L.extendedAnsi){const T=Math.min(C.ansi.length-16,L.extendedAnsi.length);for(let H=0;H<T;H++)C.ansi[H+16]=b(L.extendedAnsi[H],l.DEFAULT_ANSI_COLORS[H+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(L){this._restoreColor(L),this._onChangeColors.fire(this.colors)}_restoreColor(L){if(L!==void 0)switch(L){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[L]=this._restoreColors.ansi[L]}else for(let C=0;C<this._restoreColors.ansi.length;++C)this._colors.ansi[C]=this._restoreColors.ansi[C]}modifyColors(L){L(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function b(L,C){if(L!==void 0)try{return g.css.toColor(L)}catch{}return C}l.ThemeService=k=v([S(0,m.IOptionsService)],k)},6349:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;const v=d(8460),S=d(844);class h extends S.Disposable{constructor(x){super(),this._maxLength=x,this.onDeleteEmitter=this.register(new v.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new v.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new v.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(x){if(this._maxLength===x)return;const E=new Array(x);for(let m=0;m<Math.min(x,this.length);m++)E[m]=this._array[this._getCyclicIndex(m)];this._array=E,this._maxLength=x,this._startIndex=0}get length(){return this._length}set length(x){if(x>this._length)for(let E=this._length;E<x;E++)this._array[E]=void 0;this._length=x}get(x){return this._array[this._getCyclicIndex(x)]}set(x,E){this._array[this._getCyclicIndex(x)]=E}push(x){this._array[this._getCyclicIndex(this._length)]=x,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(x,E,...m){if(E){for(let o=x;o<this._length-E;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+E)];this._length-=E,this.onDeleteEmitter.fire({index:x,amount:E})}for(let o=this._length-1;o>=x;o--)this._array[this._getCyclicIndex(o+m.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<m.length;o++)this._array[this._getCyclicIndex(x+o)]=m[o];if(m.length&&this.onInsertEmitter.fire({index:x,amount:m.length}),this._length+m.length>this._maxLength){const o=this._length+m.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=m.length}trimStart(x){x>this._length&&(x=this._length),this._startIndex+=x,this._length-=x,this.onTrimEmitter.fire(x)}shiftElements(x,E,m){if(!(E<=0)){if(x<0||x>=this._length)throw new Error("start argument out of range");if(x+m<0)throw new Error("Cannot shift elements in list beyond index 0");if(m>0){for(let a=E-1;a>=0;a--)this.set(x+a+m,this.get(x+a));const o=x+E+m-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<E;o++)this.set(x+o+m,this.get(x+o))}}_getCyclicIndex(x){return(this._startIndex+x)%this._maxLength}}l.CircularList=h},1439:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function d(v,S=5){if(typeof v!="object")return v;const h=Array.isArray(v)?[]:{};for(const g in v)h[g]=S<=1?v[g]:v[g]&&d(v[g],S-1);return h}},8055:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;let d=0,v=0,S=0,h=0;var g,x,E,m,o;function a(u){const _=u.toString(16);return _.length<2?"0"+_:_}function n(u,_){return u<_?(_+.05)/(u+.05):(u+.05)/(_+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},(function(u){u.toCss=function(_,k,b,L){return L!==void 0?`#${a(_)}${a(k)}${a(b)}${a(L)}`:`#${a(_)}${a(k)}${a(b)}`},u.toRgba=function(_,k,b,L=255){return(_<<24|k<<16|b<<8|L)>>>0},u.toColor=function(_,k,b,L){return{css:u.toCss(_,k,b,L),rgba:u.toRgba(_,k,b,L)}}})(g||(l.channels=g={})),(function(u){function _(k,b){return h=Math.round(255*b),[d,v,S]=o.toChannels(k.rgba),{css:g.toCss(d,v,S,h),rgba:g.toRgba(d,v,S,h)}}u.blend=function(k,b){if(h=(255&b.rgba)/255,h===1)return{css:b.css,rgba:b.rgba};const L=b.rgba>>24&255,C=b.rgba>>16&255,T=b.rgba>>8&255,H=k.rgba>>24&255,U=k.rgba>>16&255,W=k.rgba>>8&255;return d=H+Math.round((L-H)*h),v=U+Math.round((C-U)*h),S=W+Math.round((T-W)*h),{css:g.toCss(d,v,S),rgba:g.toRgba(d,v,S)}},u.isOpaque=function(k){return(255&k.rgba)==255},u.ensureContrastRatio=function(k,b,L){const C=o.ensureContrastRatio(k.rgba,b.rgba,L);if(C)return g.toColor(C>>24&255,C>>16&255,C>>8&255)},u.opaque=function(k){const b=(255|k.rgba)>>>0;return[d,v,S]=o.toChannels(b),{css:g.toCss(d,v,S),rgba:b}},u.opacity=_,u.multiplyOpacity=function(k,b){return h=255&k.rgba,_(k,h*b/255)},u.toColorRGB=function(k){return[k.rgba>>24&255,k.rgba>>16&255,k.rgba>>8&255]}})(x||(l.color=x={})),(function(u){let _,k;try{const b=document.createElement("canvas");b.width=1,b.height=1;const L=b.getContext("2d",{willReadFrequently:!0});L&&(_=L,_.globalCompositeOperation="copy",k=_.createLinearGradient(0,0,1,1))}catch{}u.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return d=parseInt(b.slice(1,2).repeat(2),16),v=parseInt(b.slice(2,3).repeat(2),16),S=parseInt(b.slice(3,4).repeat(2),16),g.toColor(d,v,S);case 5:return d=parseInt(b.slice(1,2).repeat(2),16),v=parseInt(b.slice(2,3).repeat(2),16),S=parseInt(b.slice(3,4).repeat(2),16),h=parseInt(b.slice(4,5).repeat(2),16),g.toColor(d,v,S,h);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const L=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return d=parseInt(L[1]),v=parseInt(L[2]),S=parseInt(L[3]),h=Math.round(255*(L[5]===void 0?1:parseFloat(L[5]))),g.toColor(d,v,S,h);if(!_||!k)throw new Error("css.toColor: Unsupported css format");if(_.fillStyle=k,_.fillStyle=b,typeof _.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(_.fillRect(0,0,1,1),[d,v,S,h]=_.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(d,v,S,h),css:b}}})(E||(l.css=E={})),(function(u){function _(k,b,L){const C=k/255,T=b/255,H=L/255;return .2126*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.7152*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))+.0722*(H<=.03928?H/12.92:Math.pow((H+.055)/1.055,2.4))}u.relativeLuminance=function(k){return _(k>>16&255,k>>8&255,255&k)},u.relativeLuminance2=_})(m||(l.rgb=m={})),(function(u){function _(b,L,C){const T=b>>24&255,H=b>>16&255,U=b>>8&255;let W=L>>24&255,F=L>>16&255,G=L>>8&255,re=n(m.relativeLuminance2(W,F,G),m.relativeLuminance2(T,H,U));for(;re<C&&(W>0||F>0||G>0);)W-=Math.max(0,Math.ceil(.1*W)),F-=Math.max(0,Math.ceil(.1*F)),G-=Math.max(0,Math.ceil(.1*G)),re=n(m.relativeLuminance2(W,F,G),m.relativeLuminance2(T,H,U));return(W<<24|F<<16|G<<8|255)>>>0}function k(b,L,C){const T=b>>24&255,H=b>>16&255,U=b>>8&255;let W=L>>24&255,F=L>>16&255,G=L>>8&255,re=n(m.relativeLuminance2(W,F,G),m.relativeLuminance2(T,H,U));for(;re<C&&(W<255||F<255||G<255);)W=Math.min(255,W+Math.ceil(.1*(255-W))),F=Math.min(255,F+Math.ceil(.1*(255-F))),G=Math.min(255,G+Math.ceil(.1*(255-G))),re=n(m.relativeLuminance2(W,F,G),m.relativeLuminance2(T,H,U));return(W<<24|F<<16|G<<8|255)>>>0}u.blend=function(b,L){if(h=(255&L)/255,h===1)return L;const C=L>>24&255,T=L>>16&255,H=L>>8&255,U=b>>24&255,W=b>>16&255,F=b>>8&255;return d=U+Math.round((C-U)*h),v=W+Math.round((T-W)*h),S=F+Math.round((H-F)*h),g.toRgba(d,v,S)},u.ensureContrastRatio=function(b,L,C){const T=m.relativeLuminance(b>>8),H=m.relativeLuminance(L>>8);if(n(T,H)<C){if(H<T){const F=_(b,L,C),G=n(T,m.relativeLuminance(F>>8));if(G<C){const re=k(b,L,C);return G>n(T,m.relativeLuminance(re>>8))?F:re}return F}const U=k(b,L,C),W=n(T,m.relativeLuminance(U>>8));if(W<C){const F=_(b,L,C);return W>n(T,m.relativeLuminance(F>>8))?U:F}return U}},u.reduceLuminance=_,u.increaseLuminance=k,u.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]}})(o||(l.rgba=o={})),l.toPaddedHex=a,l.contrastRatio=n},8969:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;const v=d(844),S=d(2585),h=d(4348),g=d(7866),x=d(744),E=d(7302),m=d(6975),o=d(8460),a=d(1753),n=d(1480),u=d(7994),_=d(9282),k=d(5435),b=d(5981),L=d(2660);let C=!1;class T extends v.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new o.EventEmitter),this._onScroll.event((U=>{var W;(W=this._onScrollApi)==null||W.fire(U.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(U){for(const W in U)this.optionsService.options[W]=U[W]}constructor(U){super(),this._windowsWrappingHeuristics=this.register(new v.MutableDisposable),this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new o.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new o.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new E.OptionsService(U)),this._instantiationService.setService(S.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(x.BufferService)),this._instantiationService.setService(S.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(S.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(m.CoreService)),this._instantiationService.setService(S.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(a.CoreMouseService)),this._instantiationService.setService(S.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(n.UnicodeService)),this._instantiationService.setService(S.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(u.CharsetService),this._instantiationService.setService(S.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(L.OscLinkService),this._instantiationService.setService(S.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new k.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,o.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,o.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,o.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,o.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((W=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((W=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new b.WriteBuffer(((W,F)=>this._inputHandler.parse(W,F)))),this.register((0,o.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(U,W){this._writeBuffer.write(U,W)}writeSync(U,W){this._logService.logLevel<=S.LogLevelEnum.WARN&&!C&&(this._logService.warn("writeSync is unreliable and will be removed soon."),C=!0),this._writeBuffer.writeSync(U,W)}input(U,W=!0){this.coreService.triggerDataEvent(U,W)}resize(U,W){isNaN(U)||isNaN(W)||(U=Math.max(U,x.MINIMUM_COLS),W=Math.max(W,x.MINIMUM_ROWS),this._bufferService.resize(U,W))}scroll(U,W=!1){this._bufferService.scroll(U,W)}scrollLines(U,W,F){this._bufferService.scrollLines(U,W,F)}scrollPages(U){this.scrollLines(U*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(U){const W=U-this._bufferService.buffer.ydisp;W!==0&&this.scrollLines(W)}registerEscHandler(U,W){return this._inputHandler.registerEscHandler(U,W)}registerDcsHandler(U,W){return this._inputHandler.registerDcsHandler(U,W)}registerCsiHandler(U,W){return this._inputHandler.registerCsiHandler(U,W)}registerOscHandler(U,W){return this._inputHandler.registerOscHandler(U,W)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let U=!1;const W=this.optionsService.rawOptions.windowsPty;W&&W.buildNumber!==void 0&&W.buildNumber!==void 0?U=W.backend==="conpty"&&W.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(U=!0),U?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const U=[];U.push(this.onLineFeed(_.updateWindowsModeWrappedState.bind(null,this._bufferService))),U.push(this.registerCsiHandler({final:"H"},(()=>((0,_.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,v.toDisposable)((()=>{for(const W of U)W.dispose()}))}}}l.CoreTerminal=T},8460:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.runAndSubscribe=l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=d=>(this._listeners.push(d),{dispose:()=>{if(!this._disposed){for(let v=0;v<this._listeners.length;v++)if(this._listeners[v]===d)return void this._listeners.splice(v,1)}}})),this._event}fire(d,v){const S=[];for(let h=0;h<this._listeners.length;h++)S.push(this._listeners[h]);for(let h=0;h<S.length;h++)S[h].call(void 0,d,v)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(d,v){return d((S=>v.fire(S)))},l.runAndSubscribe=function(d,v){return v(void 0),d((S=>v(S)))}},5435:function(I,l,d){var v=this&&this.__decorate||function(X,D,O,P){var B,te=arguments.length,Y=te<3?D:P===null?P=Object.getOwnPropertyDescriptor(D,O):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Y=Reflect.decorate(X,D,O,P);else for(var ue=X.length-1;ue>=0;ue--)(B=X[ue])&&(Y=(te<3?B(Y):te>3?B(D,O,Y):B(D,O))||Y);return te>3&&Y&&Object.defineProperty(D,O,Y),Y},S=this&&this.__param||function(X,D){return function(O,P){D(O,P,X)}};Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;const h=d(2584),g=d(7116),x=d(2015),E=d(844),m=d(482),o=d(8437),a=d(8460),n=d(643),u=d(511),_=d(3734),k=d(2585),b=d(1480),L=d(6242),C=d(6351),T=d(5941),H={"(":0,")":1,"*":2,"+":3,"-":1,".":2},U=131072;function W(X,D){if(X>24)return D.setWinLines||!1;switch(X){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var F;(function(X){X[X.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",X[X.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(F||(l.WindowsOptionsReportType=F={}));let G=0;class re extends E.Disposable{getAttrData(){return this._curAttrData}constructor(D,O,P,B,te,Y,ue,de,K=new x.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=O,this._coreService=P,this._logService=B,this._optionsService=te,this._oscLinkService=Y,this._coreMouseService=ue,this._unicodeService=de,this._parser=K,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new m.StringToUtf32,this._utf8Decoder=new m.Utf8ToUtf32,this._workCell=new u.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new a.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new a.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new a.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new a.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new a.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new a.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new a.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new a.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new a.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new a.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new a.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ne(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((N=>this._activeBuffer=N.activeBuffer))),this._parser.setCsiHandlerFallback(((N,se)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(N),params:se.toArray()})})),this._parser.setEscHandlerFallback((N=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(N)})})),this._parser.setExecuteHandlerFallback((N=>{this._logService.debug("Unknown EXECUTE code: ",{code:N})})),this._parser.setOscHandlerFallback(((N,se,ee)=>{this._logService.debug("Unknown OSC code: ",{identifier:N,action:se,data:ee})})),this._parser.setDcsHandlerFallback(((N,se,ee)=>{se==="HOOK"&&(ee=ee.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(N),action:se,payload:ee})})),this._parser.setPrintHandler(((N,se,ee)=>this.print(N,se,ee))),this._parser.registerCsiHandler({final:"@"},(N=>this.insertChars(N))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(N=>this.scrollLeft(N))),this._parser.registerCsiHandler({final:"A"},(N=>this.cursorUp(N))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(N=>this.scrollRight(N))),this._parser.registerCsiHandler({final:"B"},(N=>this.cursorDown(N))),this._parser.registerCsiHandler({final:"C"},(N=>this.cursorForward(N))),this._parser.registerCsiHandler({final:"D"},(N=>this.cursorBackward(N))),this._parser.registerCsiHandler({final:"E"},(N=>this.cursorNextLine(N))),this._parser.registerCsiHandler({final:"F"},(N=>this.cursorPrecedingLine(N))),this._parser.registerCsiHandler({final:"G"},(N=>this.cursorCharAbsolute(N))),this._parser.registerCsiHandler({final:"H"},(N=>this.cursorPosition(N))),this._parser.registerCsiHandler({final:"I"},(N=>this.cursorForwardTab(N))),this._parser.registerCsiHandler({final:"J"},(N=>this.eraseInDisplay(N,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(N=>this.eraseInDisplay(N,!0))),this._parser.registerCsiHandler({final:"K"},(N=>this.eraseInLine(N,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(N=>this.eraseInLine(N,!0))),this._parser.registerCsiHandler({final:"L"},(N=>this.insertLines(N))),this._parser.registerCsiHandler({final:"M"},(N=>this.deleteLines(N))),this._parser.registerCsiHandler({final:"P"},(N=>this.deleteChars(N))),this._parser.registerCsiHandler({final:"S"},(N=>this.scrollUp(N))),this._parser.registerCsiHandler({final:"T"},(N=>this.scrollDown(N))),this._parser.registerCsiHandler({final:"X"},(N=>this.eraseChars(N))),this._parser.registerCsiHandler({final:"Z"},(N=>this.cursorBackwardTab(N))),this._parser.registerCsiHandler({final:"`"},(N=>this.charPosAbsolute(N))),this._parser.registerCsiHandler({final:"a"},(N=>this.hPositionRelative(N))),this._parser.registerCsiHandler({final:"b"},(N=>this.repeatPrecedingCharacter(N))),this._parser.registerCsiHandler({final:"c"},(N=>this.sendDeviceAttributesPrimary(N))),this._parser.registerCsiHandler({prefix:">",final:"c"},(N=>this.sendDeviceAttributesSecondary(N))),this._parser.registerCsiHandler({final:"d"},(N=>this.linePosAbsolute(N))),this._parser.registerCsiHandler({final:"e"},(N=>this.vPositionRelative(N))),this._parser.registerCsiHandler({final:"f"},(N=>this.hVPosition(N))),this._parser.registerCsiHandler({final:"g"},(N=>this.tabClear(N))),this._parser.registerCsiHandler({final:"h"},(N=>this.setMode(N))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(N=>this.setModePrivate(N))),this._parser.registerCsiHandler({final:"l"},(N=>this.resetMode(N))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(N=>this.resetModePrivate(N))),this._parser.registerCsiHandler({final:"m"},(N=>this.charAttributes(N))),this._parser.registerCsiHandler({final:"n"},(N=>this.deviceStatus(N))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(N=>this.deviceStatusPrivate(N))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(N=>this.softReset(N))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(N=>this.setCursorStyle(N))),this._parser.registerCsiHandler({final:"r"},(N=>this.setScrollRegion(N))),this._parser.registerCsiHandler({final:"s"},(N=>this.saveCursor(N))),this._parser.registerCsiHandler({final:"t"},(N=>this.windowOptions(N))),this._parser.registerCsiHandler({final:"u"},(N=>this.restoreCursor(N))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(N=>this.insertColumns(N))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(N=>this.deleteColumns(N))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(N=>this.selectProtected(N))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(N=>this.requestMode(N,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(N=>this.requestMode(N,!1))),this._parser.setExecuteHandler(h.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(h.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(h.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(h.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(h.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(h.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(h.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(h.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(h.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new L.OscHandler((N=>(this.setTitle(N),this.setIconName(N),!0)))),this._parser.registerOscHandler(1,new L.OscHandler((N=>this.setIconName(N)))),this._parser.registerOscHandler(2,new L.OscHandler((N=>this.setTitle(N)))),this._parser.registerOscHandler(4,new L.OscHandler((N=>this.setOrReportIndexedColor(N)))),this._parser.registerOscHandler(8,new L.OscHandler((N=>this.setHyperlink(N)))),this._parser.registerOscHandler(10,new L.OscHandler((N=>this.setOrReportFgColor(N)))),this._parser.registerOscHandler(11,new L.OscHandler((N=>this.setOrReportBgColor(N)))),this._parser.registerOscHandler(12,new L.OscHandler((N=>this.setOrReportCursorColor(N)))),this._parser.registerOscHandler(104,new L.OscHandler((N=>this.restoreIndexedColor(N)))),this._parser.registerOscHandler(110,new L.OscHandler((N=>this.restoreFgColor(N)))),this._parser.registerOscHandler(111,new L.OscHandler((N=>this.restoreBgColor(N)))),this._parser.registerOscHandler(112,new L.OscHandler((N=>this.restoreCursorColor(N)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const N in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:N},(()=>this.selectCharset("("+N))),this._parser.registerEscHandler({intermediates:")",final:N},(()=>this.selectCharset(")"+N))),this._parser.registerEscHandler({intermediates:"*",final:N},(()=>this.selectCharset("*"+N))),this._parser.registerEscHandler({intermediates:"+",final:N},(()=>this.selectCharset("+"+N))),this._parser.registerEscHandler({intermediates:"-",final:N},(()=>this.selectCharset("-"+N))),this._parser.registerEscHandler({intermediates:".",final:N},(()=>this.selectCharset("."+N))),this._parser.registerEscHandler({intermediates:"/",final:N},(()=>this.selectCharset("/"+N)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((N=>(this._logService.error("Parsing error: ",N),N))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new C.DcsHandler(((N,se)=>this.requestStatusString(N,se))))}_preserveStack(D,O,P,B){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=O,this._parseStack.decodedLength=P,this._parseStack.position=B}_logSlowResolvingAsync(D){this._logService.logLevel<=k.LogLevelEnum.WARN&&Promise.race([D,new Promise(((O,P)=>setTimeout((()=>P("#SLOW_TIMEOUT")),5e3)))]).catch((O=>{if(O!=="#SLOW_TIMEOUT")throw O;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,O){let P,B=this._activeBuffer.x,te=this._activeBuffer.y,Y=0;const ue=this._parseStack.paused;if(ue){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,O))return this._logSlowResolvingAsync(P),P;B=this._parseStack.cursorStartX,te=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>U&&(Y=this._parseStack.position+U)}if(this._logService.logLevel<=k.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,(N=>String.fromCharCode(N))).join("")}"`),typeof D=="string"?D.split("").map((N=>N.charCodeAt(0))):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<U&&(this._parseBuffer=new Uint32Array(Math.min(D.length,U))),ue||this._dirtyRowTracker.clearRange(),D.length>U)for(let N=Y;N<D.length;N+=U){const se=N+U<D.length?N+U:D.length,ee=typeof D=="string"?this._stringDecoder.decode(D.substring(N,se),this._parseBuffer):this._utf8Decoder.decode(D.subarray(N,se),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,ee))return this._preserveStack(B,te,ee,N),this._logSlowResolvingAsync(P),P}else if(!ue){const N=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,N))return this._preserveStack(B,te,N,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===B&&this._activeBuffer.y===te||this._onCursorMove.fire();const de=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),K=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);K<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(K,this._bufferService.rows-1),Math.min(de,this._bufferService.rows-1))}print(D,O,P){let B,te;const Y=this._charsetService.charset,ue=this._optionsService.rawOptions.screenReaderMode,de=this._bufferService.cols,K=this._coreService.decPrivateModes.wraparound,N=this._coreService.modes.insertMode,se=this._curAttrData;let ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-O>0&&ee.getWidth(this._activeBuffer.x-1)===2&&ee.setCellFromCodepoint(this._activeBuffer.x-1,0,1,se);let pe=this._parser.precedingJoinState;for(let fe=O;fe<P;++fe){if(B=D[fe],B<127&&Y){const ot=Y[String.fromCharCode(B)];ot&&(B=ot.charCodeAt(0))}const Le=this._unicodeService.charProperties(B,pe);te=b.UnicodeService.extractWidth(Le);const Ie=b.UnicodeService.extractShouldJoin(Le),He=Ie?b.UnicodeService.extractWidth(pe):0;if(pe=Le,ue&&this._onA11yChar.fire((0,m.stringFromCodePoint)(B)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+te-He>de){if(K){const ot=ee;let be=this._activeBuffer.x-He;for(this._activeBuffer.x=He,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),He>0&&ee instanceof o.BufferLine&&ee.copyCellsFrom(ot,be,0,He,!1);be<de;)ot.setCellFromCodepoint(be++,0,1,se)}else if(this._activeBuffer.x=de-1,te===2)continue}if(Ie&&this._activeBuffer.x){const ot=ee.getWidth(this._activeBuffer.x-1)?1:2;ee.addCodepointToCell(this._activeBuffer.x-ot,B,te);for(let be=te-He;--be>=0;)ee.setCellFromCodepoint(this._activeBuffer.x++,0,0,se)}else if(N&&(ee.insertCells(this._activeBuffer.x,te-He,this._activeBuffer.getNullCell(se)),ee.getWidth(de-1)===2&&ee.setCellFromCodepoint(de-1,n.NULL_CELL_CODE,n.NULL_CELL_WIDTH,se)),ee.setCellFromCodepoint(this._activeBuffer.x++,B,te,se),te>0)for(;--te;)ee.setCellFromCodepoint(this._activeBuffer.x++,0,0,se)}this._parser.precedingJoinState=pe,this._activeBuffer.x<de&&P-O>0&&ee.getWidth(this._activeBuffer.x)===0&&!ee.hasContent(this._activeBuffer.x)&&ee.setCellFromCodepoint(this._activeBuffer.x,0,1,se),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,O){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,O):this._parser.registerCsiHandler(D,(P=>!W(P.params[0],this._optionsService.rawOptions.windowOptions)||O(P)))}registerDcsHandler(D,O){return this._parser.registerDcsHandler(D,new C.DcsHandler(O))}registerEscHandler(D,O){return this._parser.registerEscHandler(D,O)}registerOscHandler(D,O){return this._parser.registerOscHandler(D,new L.OscHandler(O))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var D;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&D.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);O.hasWidth(this._activeBuffer.x)&&!O.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,O){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+O):(this._activeBuffer.x=D,this._activeBuffer.y=O),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,O){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+O)}cursorUp(D){const O=this._activeBuffer.y-this._activeBuffer.scrollTop;return O>=0?this._moveCursor(0,-Math.min(O,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){const O=this._activeBuffer.scrollBottom-this._activeBuffer.y;return O>=0?this._moveCursor(0,Math.min(O,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){const O=D.params[0];return O===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:O===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let O=D.params[0]||1;for(;O--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let O=D.params[0]||1;for(;O--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){const O=D.params[0];return O===1&&(this._curAttrData.bg|=536870912),O!==2&&O!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,O,P,B=!1,te=!1){const Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);Y.replaceCells(O,P,this._activeBuffer.getNullCell(this._eraseAttrData()),te),B&&(Y.isWrapped=!1)}_resetBufferLine(D,O=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),O),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),P.isWrapped=!1)}eraseInDisplay(D,O=!1){let P;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,O);P<this._bufferService.rows;P++)this._resetBufferLine(P,O);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,O),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,O);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,O);this._dirtyRowTracker.markDirty(0);break;case 3:const B=this._activeBuffer.lines.length-this._bufferService.rows;B>0&&(this._activeBuffer.lines.trimStart(B),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-B,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-B,0),this._onScroll.fire(0))}return!0}eraseInLine(D,O=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,O);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,O);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,O)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let O=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,B=this._bufferService.rows-1-this._activeBuffer.scrollBottom,te=this._bufferService.rows-1+this._activeBuffer.ybase-B+1;for(;O--;)this._activeBuffer.lines.splice(te-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let O=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let B;for(B=this._bufferService.rows-1-this._activeBuffer.scrollBottom,B=this._bufferService.rows-1+this._activeBuffer.ybase-B;O--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(B,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let O=D.params[0]||1;for(;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let O=D.params[0]||1;for(;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=D.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);B.deleteCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData())),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=D.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);B.insertCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData())),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=D.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);B.insertCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData())),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=D.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);B.deleteCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData())),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){const O=this._parser.precedingJoinState;if(!O)return!0;const P=D.params[0]||1,B=b.UnicodeService.extractWidth(O),te=this._activeBuffer.x-B,Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(te),ue=new Uint32Array(Y.length*P);let de=0;for(let N=0;N<Y.length;){const se=Y.codePointAt(N)||0;ue[de++]=se,N+=se>65535?2:1}let K=de;for(let N=1;N<P;++N)ue.copyWithin(K,0,de),K+=de;return this.print(ue,0,K),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let O=0;O<D.length;O++)switch(D.params[O]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let O=0;O<D.length;O++)switch(D.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let O=0;O<D.length;O++)switch(D.params[O]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let O=0;O<D.length;O++)switch(D.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[O]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,O){const P=this._coreService.decPrivateModes,{activeProtocol:B,activeEncoding:te}=this._coreMouseService,Y=this._coreService,{buffers:ue,cols:de}=this._bufferService,{active:K,alt:N}=ue,se=this._optionsService.rawOptions,ee=Ie=>Ie?1:2,pe=D.params[0];return fe=pe,Le=O?pe===2?4:pe===4?ee(Y.modes.insertMode):pe===12?3:pe===20?ee(se.convertEol):0:pe===1?ee(P.applicationCursorKeys):pe===3?se.windowOptions.setWinLines?de===80?2:de===132?1:0:0:pe===6?ee(P.origin):pe===7?ee(P.wraparound):pe===8?3:pe===9?ee(B==="X10"):pe===12?ee(se.cursorBlink):pe===25?ee(!Y.isCursorHidden):pe===45?ee(P.reverseWraparound):pe===66?ee(P.applicationKeypad):pe===67?4:pe===1e3?ee(B==="VT200"):pe===1002?ee(B==="DRAG"):pe===1003?ee(B==="ANY"):pe===1004?ee(P.sendFocus):pe===1005?4:pe===1006?ee(te==="SGR"):pe===1015?4:pe===1016?ee(te==="SGR_PIXELS"):pe===1048?1:pe===47||pe===1047||pe===1049?ee(K===N):pe===2004?ee(P.bracketedPasteMode):0,Y.triggerDataEvent(`${h.C0.ESC}[${O?"":"?"}${fe};${Le}$y`),!0;var fe,Le}_updateAttrColor(D,O,P,B,te){return O===2?(D|=50331648,D&=-16777216,D|=_.AttributeData.fromColorRGB([P,B,te])):O===5&&(D&=-50331904,D|=33554432|255&P),D}_extractColor(D,O,P){const B=[0,0,-1,0,0,0];let te=0,Y=0;do{if(B[Y+te]=D.params[O+Y],D.hasSubParams(O+Y)){const ue=D.getSubParams(O+Y);let de=0;do B[1]===5&&(te=1),B[Y+de+1+te]=ue[de];while(++de<ue.length&&de+Y+1+te<B.length);break}if(B[1]===5&&Y+te>=2||B[1]===2&&Y+te>=5)break;B[1]&&(te=1)}while(++Y+O<D.length&&Y+te<B.length);for(let ue=2;ue<B.length;++ue)B[ue]===-1&&(B[ue]=0);switch(B[0]){case 38:P.fg=this._updateAttrColor(P.fg,B[1],B[3],B[4],B[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,B[1],B[3],B[4],B[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,B[1],B[3],B[4],B[5])}return Y}_processUnderline(D,O){O.extended=O.extended.clone(),(!~D||D>5)&&(D=1),O.extended.underlineStyle=D,O.fg|=268435456,D===0&&(O.fg&=-268435457),O.updateExtended()}_processSGR0(D){D.fg=o.DEFAULT_ATTR_DATA.fg,D.bg=o.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;const O=D.length;let P;const B=this._curAttrData;for(let te=0;te<O;te++)P=D.params[te],P>=30&&P<=37?(B.fg&=-50331904,B.fg|=16777216|P-30):P>=40&&P<=47?(B.bg&=-50331904,B.bg|=16777216|P-40):P>=90&&P<=97?(B.fg&=-50331904,B.fg|=16777224|P-90):P>=100&&P<=107?(B.bg&=-50331904,B.bg|=16777224|P-100):P===0?this._processSGR0(B):P===1?B.fg|=134217728:P===3?B.bg|=67108864:P===4?(B.fg|=268435456,this._processUnderline(D.hasSubParams(te)?D.getSubParams(te)[0]:1,B)):P===5?B.fg|=536870912:P===7?B.fg|=67108864:P===8?B.fg|=1073741824:P===9?B.fg|=2147483648:P===2?B.bg|=134217728:P===21?this._processUnderline(2,B):P===22?(B.fg&=-134217729,B.bg&=-134217729):P===23?B.bg&=-67108865:P===24?(B.fg&=-268435457,this._processUnderline(0,B)):P===25?B.fg&=-536870913:P===27?B.fg&=-67108865:P===28?B.fg&=-1073741825:P===29?B.fg&=2147483647:P===39?(B.fg&=-67108864,B.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):P===49?(B.bg&=-67108864,B.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?te+=this._extractColor(D,te,B):P===53?B.bg|=1073741824:P===55?B.bg&=-1073741825:P===59?(B.extended=B.extended.clone(),B.extended.underlineColor=-1,B.updateExtended()):P===100?(B.fg&=-67108864,B.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,B.bg&=-67108864,B.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const O=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${O};${P}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){const O=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${O};${P}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){const O=D.params[0]||1;switch(O){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=O%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(D){const O=D.params[0]||1;let P;return(D.length<2||(P=D.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>O&&(this._activeBuffer.scrollTop=O-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(D){if(!W(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;const O=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:O!==2&&this._onRequestWindowsOptionsReport.fire(F.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(F.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:O!==0&&O!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),O!==0&&O!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:O!==0&&O!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),O!==0&&O!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){const O=[],P=D.split(";");for(;P.length>1;){const B=P.shift(),te=P.shift();if(/^\d+$/.exec(B)){const Y=parseInt(B);if(le(Y))if(te==="?")O.push({type:0,index:Y});else{const ue=(0,T.parseColor)(te);ue&&O.push({type:1,index:Y,color:ue})}}}return O.length&&this._onColor.fire(O),!0}setHyperlink(D){const O=D.split(";");return!(O.length<2)&&(O[1]?this._createHyperlink(O[0],O[1]):!O[0]&&this._finishHyperlink())}_createHyperlink(D,O){this._getCurrentLinkId()&&this._finishHyperlink();const P=D.split(":");let B;const te=P.findIndex((Y=>Y.startsWith("id=")));return te!==-1&&(B=P[te].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:B,uri:O}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,O){const P=D.split(";");for(let B=0;B<P.length&&!(O>=this._specialColors.length);++B,++O)if(P[B]==="?")this._onColor.fire([{type:0,index:this._specialColors[O]}]);else{const te=(0,T.parseColor)(P[B]);te&&this._onColor.fire([{type:1,index:this._specialColors[O],color:te}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;const O=[],P=D.split(";");for(let B=0;B<P.length;++B)if(/^\d+$/.exec(P[B])){const te=parseInt(P[B]);le(te)&&O.push({type:2,index:te})}return O.length&&this._onColor.fire(O),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(H[D[0]],g.CHARSETS[D[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){const D=new u.CellData;D.content=4194373,D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let O=0;O<this._bufferService.rows;++O){const P=this._activeBuffer.ybase+this._activeBuffer.y+O,B=this._activeBuffer.lines.get(P);B&&(B.fill(D),B.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,O){const P=this._bufferService.buffer,B=this._optionsService.rawOptions;return(te=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${te}${h.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[B.cursorStyle]-(B.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,O){this._dirtyRowTracker.markRangeDirty(D,O)}}l.InputHandler=re;let ne=class{constructor(X){this._bufferService=X,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(X){X<this.start?this.start=X:X>this.end&&(this.end=X)}markRangeDirty(X,D){X>D&&(G=X,X=D,D=G),X<this.start&&(this.start=X),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function le(X){return 0<=X&&X<256}ne=v([S(0,k.IBufferService)],ne)},844:(I,l)=>{function d(v){for(const S of v)S.dispose();v.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const v of this._disposables)v.dispose();this._disposables.length=0}register(v){return this._disposables.push(v),v}unregister(v){const S=this._disposables.indexOf(v);S!==-1&&this._disposables.splice(S,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(v){var S;this._isDisposed||v===this._value||((S=this._value)==null||S.dispose(),this._value=v)}clear(){this.value=void 0}dispose(){var v;this._isDisposed=!0,(v=this._value)==null||v.dispose(),this._value=void 0}},l.toDisposable=function(v){return{dispose:v}},l.disposeArray=d,l.getDisposeArrayDisposable=function(v){return{dispose:()=>d(v)}}},1505:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class d{constructor(){this._data={}}set(S,h,g){this._data[S]||(this._data[S]={}),this._data[S][h]=g}get(S,h){return this._data[S]?this._data[S][h]:void 0}clear(){this._data={}}}l.TwoKeyMap=d,l.FourKeyMap=class{constructor(){this._data=new d}set(v,S,h,g,x){this._data.get(v,S)||this._data.set(v,S,new d),this._data.get(v,S).set(h,g,x)}get(v,S,h,g){var x;return(x=this._data.get(v,S))==null?void 0:x.get(h,g)}clear(){this._data.clear()}}},6114:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof process<"u"&&"title"in process;const d=l.isNode?"node":navigator.userAgent,v=l.isNode?"node":navigator.platform;l.isFirefox=d.includes("Firefox"),l.isLegacyEdge=d.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(d),l.getSafariVersion=function(){if(!l.isSafari)return 0;const S=d.match(/Version\/(\d+)/);return S===null||S.length<2?0:parseInt(S[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(v),l.isIpad=v==="iPad",l.isIphone=v==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(v),l.isLinux=v.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(d)},6106:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SortedList=void 0;let d=0;l.SortedList=class{constructor(v){this._getKey=v,this._array=[]}clear(){this._array.length=0}insert(v){this._array.length!==0?(d=this._search(this._getKey(v)),this._array.splice(d,0,v)):this._array.push(v)}delete(v){if(this._array.length===0)return!1;const S=this._getKey(v);if(S===void 0||(d=this._search(S),d===-1)||this._getKey(this._array[d])!==S)return!1;do if(this._array[d]===v)return this._array.splice(d,1),!0;while(++d<this._array.length&&this._getKey(this._array[d])===S);return!1}*getKeyIterator(v){if(this._array.length!==0&&(d=this._search(v),!(d<0||d>=this._array.length)&&this._getKey(this._array[d])===v))do yield this._array[d];while(++d<this._array.length&&this._getKey(this._array[d])===v)}forEachByKey(v,S){if(this._array.length!==0&&(d=this._search(v),!(d<0||d>=this._array.length)&&this._getKey(this._array[d])===v))do S(this._array[d]);while(++d<this._array.length&&this._getKey(this._array[d])===v)}values(){return[...this._array].values()}_search(v){let S=0,h=this._array.length-1;for(;h>=S;){let g=S+h>>1;const x=this._getKey(this._array[g]);if(x>v)h=g-1;else{if(!(x<v)){for(;g>0&&this._getKey(this._array[g-1])===v;)g--;return g}S=g+1}}return S}}},7226:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const v=d(6114);class S{constructor(){this._tasks=[],this._i=0}enqueue(x){this._tasks.push(x),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(x){this._idleCallback=void 0;let E=0,m=0,o=x.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(E=Date.now(),this._tasks[this._i]()||this._i++,E=Math.max(1,Date.now()-E),m=Math.max(E,m),a=x.timeRemaining(),1.5*m>a)return o-E<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-E))}ms`),void this._start();o=a}this.clear()}}class h extends S{_requestCallback(x){return setTimeout((()=>x(this._createDeadline(16))))}_cancelCallback(x){clearTimeout(x)}_createDeadline(x){const E=Date.now()+x;return{timeRemaining:()=>Math.max(0,E-Date.now())}}}l.PriorityTaskQueue=h,l.IdleTaskQueue=!v.isNode&&"requestIdleCallback"in window?class extends S{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:h,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;const v=d(643);l.updateWindowsModeWrappedState=function(S){const h=S.buffer.lines.get(S.buffer.ybase+S.buffer.y-1),g=h==null?void 0:h.get(S.cols-1),x=S.buffer.lines.get(S.buffer.ybase+S.buffer.y);x&&g&&(x.isWrapped=g[v.CHAR_DATA_CODE_INDEX]!==v.NULL_CELL_CODE&&g[v.CHAR_DATA_CODE_INDEX]!==v.WHITESPACE_CELL_CODE)}},3734:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class d{constructor(){this.fg=0,this.bg=0,this.extended=new v}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new d;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}l.AttributeData=d;class v{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,g=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=g}clone(){return new v(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=v},9092:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Buffer=l.MAX_BUFFER_SIZE=void 0;const v=d(6349),S=d(7226),h=d(3734),g=d(8437),x=d(4634),E=d(511),m=d(643),o=d(4863),a=d(7116);l.MAX_BUFFER_SIZE=4294967295,l.Buffer=class{constructor(n,u,_){this._hasScrollback=n,this._optionsService=u,this._bufferService=_,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=E.CellData.fromCharData([0,m.NULL_CELL_CHAR,m.NULL_CELL_WIDTH,m.NULL_CELL_CODE]),this._whitespaceCell=E.CellData.fromCharData([0,m.WHITESPACE_CELL_CHAR,m.WHITESPACE_CELL_WIDTH,m.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new S.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new v.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(n){return n?(this._nullCell.fg=n.fg,this._nullCell.bg=n.bg,this._nullCell.extended=n.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(n){return n?(this._whitespaceCell.fg=n.fg,this._whitespaceCell.bg=n.bg,this._whitespaceCell.extended=n.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(n,u){return new g.BufferLine(this._bufferService.cols,this.getNullCell(n),u)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const n=this.ybase+this.y-this.ydisp;return n>=0&&n<this._rows}_getCorrectBufferLength(n){if(!this._hasScrollback)return n;const u=n+this._optionsService.rawOptions.scrollback;return u>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:u}fillViewportRows(n){if(this.lines.length===0){n===void 0&&(n=g.DEFAULT_ATTR_DATA);let u=this._rows;for(;u--;)this.lines.push(this.getBlankLine(n))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new v.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(n,u){const _=this.getNullCell(g.DEFAULT_ATTR_DATA);let k=0;const b=this._getCorrectBufferLength(u);if(b>this.lines.maxLength&&(this.lines.maxLength=b),this.lines.length>0){if(this._cols<n)for(let C=0;C<this.lines.length;C++)k+=+this.lines.get(C).resize(n,_);let L=0;if(this._rows<u)for(let C=this._rows;C<u;C++)this.lines.length<u+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(n,_)):this.ybase>0&&this.lines.length<=this.ybase+this.y+L+1?(this.ybase--,L++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(n,_)));else for(let C=this._rows;C>u;C--)this.lines.length>u+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(b<this.lines.maxLength){const C=this.lines.length-b;C>0&&(this.lines.trimStart(C),this.ybase=Math.max(this.ybase-C,0),this.ydisp=Math.max(this.ydisp-C,0),this.savedY=Math.max(this.savedY-C,0)),this.lines.maxLength=b}this.x=Math.min(this.x,n-1),this.y=Math.min(this.y,u-1),L&&(this.y+=L),this.savedX=Math.min(this.savedX,n-1),this.scrollTop=0}if(this.scrollBottom=u-1,this._isReflowEnabled&&(this._reflow(n,u),this._cols>n))for(let L=0;L<this.lines.length;L++)k+=+this.lines.get(L).resize(n,_);this._cols=n,this._rows=u,this._memoryCleanupQueue.clear(),k>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let n=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,n=!1);let u=0;for(;this._memoryCleanupPosition<this.lines.length;)if(u+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),u>100)return!0;return n}get _isReflowEnabled(){const n=this._optionsService.rawOptions.windowsPty;return n&&n.buildNumber?this._hasScrollback&&n.backend==="conpty"&&n.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(n,u){this._cols!==n&&(n>this._cols?this._reflowLarger(n,u):this._reflowSmaller(n,u))}_reflowLarger(n,u){const _=(0,x.reflowLargerGetLinesToRemove)(this.lines,this._cols,n,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(_.length>0){const k=(0,x.reflowLargerCreateNewLayout)(this.lines,_);(0,x.reflowLargerApplyNewLayout)(this.lines,k.layout),this._reflowLargerAdjustViewport(n,u,k.countRemoved)}}_reflowLargerAdjustViewport(n,u,_){const k=this.getNullCell(g.DEFAULT_ATTR_DATA);let b=_;for(;b-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<u&&this.lines.push(new g.BufferLine(n,k))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-_,0)}_reflowSmaller(n,u){const _=this.getNullCell(g.DEFAULT_ATTR_DATA),k=[];let b=0;for(let L=this.lines.length-1;L>=0;L--){let C=this.lines.get(L);if(!C||!C.isWrapped&&C.getTrimmedLength()<=n)continue;const T=[C];for(;C.isWrapped&&L>0;)C=this.lines.get(--L),T.unshift(C);const H=this.ybase+this.y;if(H>=L&&H<L+T.length)continue;const U=T[T.length-1].getTrimmedLength(),W=(0,x.reflowSmallerGetNewLineLengths)(T,this._cols,n),F=W.length-T.length;let G;G=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+F):Math.max(0,this.lines.length-this.lines.maxLength+F);const re=[];for(let P=0;P<F;P++){const B=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);re.push(B)}re.length>0&&(k.push({start:L+T.length+b,newLines:re}),b+=re.length),T.push(...re);let ne=W.length-1,le=W[ne];le===0&&(ne--,le=W[ne]);let X=T.length-F-1,D=U;for(;X>=0;){const P=Math.min(D,le);if(T[ne]===void 0)break;if(T[ne].copyCellsFrom(T[X],D-P,le-P,P,!0),le-=P,le===0&&(ne--,le=W[ne]),D-=P,D===0){X--;const B=Math.max(X,0);D=(0,x.getWrappedLineTrimmedLength)(T,B,this._cols)}}for(let P=0;P<T.length;P++)W[P]<n&&T[P].setCell(W[P],_);let O=F-G;for(;O-- >0;)this.ybase===0?this.y<u-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+b)-u&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+F,this.ybase+u-1)}if(k.length>0){const L=[],C=[];for(let ne=0;ne<this.lines.length;ne++)C.push(this.lines.get(ne));const T=this.lines.length;let H=T-1,U=0,W=k[U];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+b);let F=0;for(let ne=Math.min(this.lines.maxLength-1,T+b-1);ne>=0;ne--)if(W&&W.start>H+F){for(let le=W.newLines.length-1;le>=0;le--)this.lines.set(ne--,W.newLines[le]);ne++,L.push({index:H+1,amount:W.newLines.length}),F+=W.newLines.length,W=k[++U]}else this.lines.set(ne,C[H--]);let G=0;for(let ne=L.length-1;ne>=0;ne--)L[ne].index+=G,this.lines.onInsertEmitter.fire(L[ne]),G+=L[ne].amount;const re=Math.max(0,T+b-this.lines.maxLength);re>0&&this.lines.onTrimEmitter.fire(re)}}translateBufferLineToString(n,u,_=0,k){const b=this.lines.get(n);return b?b.translateToString(u,_,k):""}getWrappedRangeForLine(n){let u=n,_=n;for(;u>0&&this.lines.get(u).isWrapped;)u--;for(;_+1<this.lines.length&&this.lines.get(_+1).isWrapped;)_++;return{first:u,last:_}}setupTabStops(n){for(n!=null?this.tabs[n]||(n=this.prevStop(n)):(this.tabs={},n=0);n<this._cols;n+=this._optionsService.rawOptions.tabStopWidth)this.tabs[n]=!0}prevStop(n){for(n==null&&(n=this.x);!this.tabs[--n]&&n>0;);return n>=this._cols?this._cols-1:n<0?0:n}nextStop(n){for(n==null&&(n=this.x);!this.tabs[++n]&&n<this._cols;);return n>=this._cols?this._cols-1:n<0?0:n}clearMarkers(n){this._isClearing=!0;for(let u=0;u<this.markers.length;u++)this.markers[u].line===n&&(this.markers[u].dispose(),this.markers.splice(u--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].dispose(),this.markers.splice(n--,1);this._isClearing=!1}addMarker(n){const u=new o.Marker(n);return this.markers.push(u),u.register(this.lines.onTrim((_=>{u.line-=_,u.line<0&&u.dispose()}))),u.register(this.lines.onInsert((_=>{u.line>=_.index&&(u.line+=_.amount)}))),u.register(this.lines.onDelete((_=>{u.line>=_.index&&u.line<_.index+_.amount&&u.dispose(),u.line>_.index&&(u.line-=_.amount)}))),u.register(u.onDispose((()=>this._removeMarker(u)))),u}_removeMarker(n){this._isClearing||this.markers.splice(this.markers.indexOf(n),1)}}},8437:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;const v=d(3734),S=d(511),h=d(643),g=d(482);l.DEFAULT_ATTR_DATA=Object.freeze(new v.AttributeData);let x=0;class E{constructor(o,a,n=!1){this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);const u=a||S.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let _=0;_<o;++_)this.setCell(_,u);this.length=o}get(o){const a=this._data[3*o+0],n=2097151&a;return[this._data[3*o+1],2097152&a?this._combined[o]:n?(0,g.stringFromCodePoint)(n):"",a>>22,2097152&a?this._combined[o].charCodeAt(this._combined[o].length-1):n]}set(o,a){this._data[3*o+1]=a[h.CHAR_DATA_ATTR_INDEX],a[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=a[1],this._data[3*o+0]=2097152|o|a[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=a[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(o){return this._data[3*o+0]>>22}hasWidth(o){return 12582912&this._data[3*o+0]}getFg(o){return this._data[3*o+1]}getBg(o){return this._data[3*o+2]}hasContent(o){return 4194303&this._data[3*o+0]}getCodePoint(o){const a=this._data[3*o+0];return 2097152&a?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&a}isCombined(o){return 2097152&this._data[3*o+0]}getString(o){const a=this._data[3*o+0];return 2097152&a?this._combined[o]:2097151&a?(0,g.stringFromCodePoint)(2097151&a):""}isProtected(o){return 536870912&this._data[3*o+2]}loadCell(o,a){return x=3*o,a.content=this._data[x+0],a.fg=this._data[x+1],a.bg=this._data[x+2],2097152&a.content&&(a.combinedData=this._combined[o]),268435456&a.bg&&(a.extended=this._extendedAttrs[o]),a}setCell(o,a){2097152&a.content&&(this._combined[o]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[o]=a.extended),this._data[3*o+0]=a.content,this._data[3*o+1]=a.fg,this._data[3*o+2]=a.bg}setCellFromCodepoint(o,a,n,u){268435456&u.bg&&(this._extendedAttrs[o]=u.extended),this._data[3*o+0]=a|n<<22,this._data[3*o+1]=u.fg,this._data[3*o+2]=u.bg}addCodepointToCell(o,a,n){let u=this._data[3*o+0];2097152&u?this._combined[o]+=(0,g.stringFromCodePoint)(a):2097151&u?(this._combined[o]=(0,g.stringFromCodePoint)(2097151&u)+(0,g.stringFromCodePoint)(a),u&=-2097152,u|=2097152):u=a|4194304,n&&(u&=-12582913,u|=n<<22),this._data[3*o+0]=u}insertCells(o,a,n){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o-1,0,1,n),a<this.length-o){const u=new S.CellData;for(let _=this.length-o-a-1;_>=0;--_)this.setCell(o+a+_,this.loadCell(o+_,u));for(let _=0;_<a;++_)this.setCell(o+_,n)}else for(let u=o;u<this.length;++u)this.setCell(u,n);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,n)}deleteCells(o,a,n){if(o%=this.length,a<this.length-o){const u=new S.CellData;for(let _=0;_<this.length-o-a;++_)this.setCell(o+_,this.loadCell(o+a+_,u));for(let _=this.length-a;_<this.length;++_)this.setCell(_,n)}else for(let u=o;u<this.length;++u)this.setCell(u,n);o&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o-1,0,1,n),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodepoint(o,0,1,n)}replaceCells(o,a,n,u=!1){if(u)for(o&&this.getWidth(o-1)===2&&!this.isProtected(o-1)&&this.setCellFromCodepoint(o-1,0,1,n),a<this.length&&this.getWidth(a-1)===2&&!this.isProtected(a)&&this.setCellFromCodepoint(a,0,1,n);o<a&&o<this.length;)this.isProtected(o)||this.setCell(o,n),o++;else for(o&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o-1,0,1,n),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodepoint(a,0,1,n);o<a&&o<this.length;)this.setCell(o++,n)}resize(o,a){if(o===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const n=3*o;if(o>this.length){if(this._data.buffer.byteLength>=4*n)this._data=new Uint32Array(this._data.buffer,0,n);else{const u=new Uint32Array(n);u.set(this._data),this._data=u}for(let u=this.length;u<o;++u)this.setCell(u,a)}else{this._data=this._data.subarray(0,n);const u=Object.keys(this._combined);for(let k=0;k<u.length;k++){const b=parseInt(u[k],10);b>=o&&delete this._combined[b]}const _=Object.keys(this._extendedAttrs);for(let k=0;k<_.length;k++){const b=parseInt(_[k],10);b>=o&&delete this._extendedAttrs[b]}}return this.length=o,4*n*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const o=new Uint32Array(this._data.length);return o.set(this._data),this._data=o,1}return 0}fill(o,a=!1){if(a)for(let n=0;n<this.length;++n)this.isProtected(n)||this.setCell(n,o);else{this._combined={},this._extendedAttrs={};for(let n=0;n<this.length;++n)this.setCell(n,o)}}copyFrom(o){this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={};for(const a in o._combined)this._combined[a]=o._combined[a];this._extendedAttrs={};for(const a in o._extendedAttrs)this._extendedAttrs[a]=o._extendedAttrs[a];this.isWrapped=o.isWrapped}clone(){const o=new E(0);o._data=new Uint32Array(this._data),o.length=this.length;for(const a in this._combined)o._combined[a]=this._combined[a];for(const a in this._extendedAttrs)o._extendedAttrs[a]=this._extendedAttrs[a];return o.isWrapped=this.isWrapped,o}getTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0}getNoBgTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0]||50331648&this._data[3*o+2])return o+(this._data[3*o+0]>>22);return 0}copyCellsFrom(o,a,n,u,_){const k=o._data;if(_)for(let L=u-1;L>=0;L--){for(let C=0;C<3;C++)this._data[3*(n+L)+C]=k[3*(a+L)+C];268435456&k[3*(a+L)+2]&&(this._extendedAttrs[n+L]=o._extendedAttrs[a+L])}else for(let L=0;L<u;L++){for(let C=0;C<3;C++)this._data[3*(n+L)+C]=k[3*(a+L)+C];268435456&k[3*(a+L)+2]&&(this._extendedAttrs[n+L]=o._extendedAttrs[a+L])}const b=Object.keys(o._combined);for(let L=0;L<b.length;L++){const C=parseInt(b[L],10);C>=a&&(this._combined[C-a+n]=o._combined[C])}}translateToString(o,a,n,u){a=a??0,n=n??this.length,o&&(n=Math.min(n,this.getTrimmedLength())),u&&(u.length=0);let _="";for(;a<n;){const k=this._data[3*a+0],b=2097151&k,L=2097152&k?this._combined[a]:b?(0,g.stringFromCodePoint)(b):h.WHITESPACE_CELL_CHAR;if(_+=L,u)for(let C=0;C<L.length;++C)u.push(a);a+=k>>22||1}return u&&u.push(a),_}}l.BufferLine=E},4841:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(d,v){if(d.start.y>d.end.y)throw new Error(`Buffer range end (${d.end.x}, ${d.end.y}) cannot be before start (${d.start.x}, ${d.start.y})`);return v*(d.end.y-d.start.y)+(d.end.x-d.start.x+1)}},4634:(I,l)=>{function d(v,S,h){if(S===v.length-1)return v[S].getTrimmedLength();const g=!v[S].hasContent(h-1)&&v[S].getWidth(h-1)===1,x=v[S+1].getWidth(0)===2;return g&&x?h-1:h}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(v,S,h,g,x){const E=[];for(let m=0;m<v.length-1;m++){let o=m,a=v.get(++o);if(!a.isWrapped)continue;const n=[v.get(m)];for(;o<v.length&&a.isWrapped;)n.push(a),a=v.get(++o);if(g>=m&&g<o){m+=n.length-1;continue}let u=0,_=d(n,u,S),k=1,b=0;for(;k<n.length;){const C=d(n,k,S),T=C-b,H=h-_,U=Math.min(T,H);n[u].copyCellsFrom(n[k],b,_,U,!1),_+=U,_===h&&(u++,_=0),b+=U,b===C&&(k++,b=0),_===0&&u!==0&&n[u-1].getWidth(h-1)===2&&(n[u].copyCellsFrom(n[u-1],h-1,_++,1,!1),n[u-1].setCell(h-1,x))}n[u].replaceCells(_,h,x);let L=0;for(let C=n.length-1;C>0&&(C>u||n[C].getTrimmedLength()===0);C--)L++;L>0&&(E.push(m+n.length-L),E.push(L)),m+=n.length-1}return E},l.reflowLargerCreateNewLayout=function(v,S){const h=[];let g=0,x=S[g],E=0;for(let m=0;m<v.length;m++)if(x===m){const o=S[++g];v.onDeleteEmitter.fire({index:m-E,amount:o}),m+=o-1,E+=o,x=S[++g]}else h.push(m);return{layout:h,countRemoved:E}},l.reflowLargerApplyNewLayout=function(v,S){const h=[];for(let g=0;g<S.length;g++)h.push(v.get(S[g]));for(let g=0;g<h.length;g++)v.set(g,h[g]);v.length=S.length},l.reflowSmallerGetNewLineLengths=function(v,S,h){const g=[],x=v.map(((a,n)=>d(v,n,S))).reduce(((a,n)=>a+n));let E=0,m=0,o=0;for(;o<x;){if(x-o<h){g.push(x-o);break}E+=h;const a=d(v,m,S);E>a&&(E-=a,m++);const n=v[m].getWidth(E-1)===2;n&&E--;const u=n?h-1:h;g.push(u),o+=u}return g},l.getWrappedLineTrimmedLength=d},5295:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;const v=d(8460),S=d(844),h=d(9092);class g extends S.Disposable{constructor(E,m){super(),this._optionsService=E,this._bufferService=m,this._onBufferActivate=this.register(new v.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(E){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(E),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(E,m){this._normal.resize(E,m),this._alt.resize(E,m),this.setupTabStops(E)}setupTabStops(E){this._normal.setupTabStops(E),this._alt.setupTabStops(E)}}l.BufferSet=g},511:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const v=d(482),S=d(643),h=d(3734);class g extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(E){const m=new g;return m.setFromCharData(E),m}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,v.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(E){this.fg=E[S.CHAR_DATA_ATTR_INDEX],this.bg=0;let m=!1;if(E[S.CHAR_DATA_CHAR_INDEX].length>2)m=!0;else if(E[S.CHAR_DATA_CHAR_INDEX].length===2){const o=E[S.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){const a=E[S.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(o-55296)+a-56320+65536|E[S.CHAR_DATA_WIDTH_INDEX]<<22:m=!0}else m=!0}else this.content=E[S.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|E[S.CHAR_DATA_WIDTH_INDEX]<<22;m&&(this.combinedData=E[S.CHAR_DATA_CHAR_INDEX],this.content=2097152|E[S.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=g},643:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;const v=d(8460),S=d(844);class h{get id(){return this._id}constructor(x){this.line=x,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,S.disposeArray)(this._disposables),this._disposables.length=0)}register(x){return this._disposables.push(x),x}}l.Marker=h,h._nextId=1},7116:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},l.CHARSETS.A={"#":""},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},l.CHARSETS.C=l.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.E=l.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},l.CHARSETS.H=l.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(I,l)=>{var d,v,S;Object.defineProperty(l,"__esModule",{value:!0}),l.C1_ESCAPED=l.C1=l.C0=void 0,(function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""})(d||(l.C0=d={})),(function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""})(v||(l.C1=v={})),(function(h){h.ST=`${d.ESC}\\`})(S||(l.C1_ESCAPED=S={}))},7399:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;const v=d(2584),S={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(h,g,x,E){const m={type:0,cancel:!1,key:void 0},o=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?m.key=g?v.C0.ESC+"OA":v.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?m.key=g?v.C0.ESC+"OD":v.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?m.key=g?v.C0.ESC+"OC":v.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(m.key=g?v.C0.ESC+"OB":v.C0.ESC+"[B");break;case 8:m.key=h.ctrlKey?"\b":v.C0.DEL,h.altKey&&(m.key=v.C0.ESC+m.key);break;case 9:if(h.shiftKey){m.key=v.C0.ESC+"[Z";break}m.key=v.C0.HT,m.cancel=!0;break;case 13:m.key=h.altKey?v.C0.ESC+v.C0.CR:v.C0.CR,m.cancel=!0;break;case 27:m.key=v.C0.ESC,h.altKey&&(m.key=v.C0.ESC+v.C0.ESC),m.cancel=!0;break;case 37:if(h.metaKey)break;o?(m.key=v.C0.ESC+"[1;"+(o+1)+"D",m.key===v.C0.ESC+"[1;3D"&&(m.key=v.C0.ESC+(x?"b":"[1;5D"))):m.key=g?v.C0.ESC+"OD":v.C0.ESC+"[D";break;case 39:if(h.metaKey)break;o?(m.key=v.C0.ESC+"[1;"+(o+1)+"C",m.key===v.C0.ESC+"[1;3C"&&(m.key=v.C0.ESC+(x?"f":"[1;5C"))):m.key=g?v.C0.ESC+"OC":v.C0.ESC+"[C";break;case 38:if(h.metaKey)break;o?(m.key=v.C0.ESC+"[1;"+(o+1)+"A",x||m.key!==v.C0.ESC+"[1;3A"||(m.key=v.C0.ESC+"[1;5A")):m.key=g?v.C0.ESC+"OA":v.C0.ESC+"[A";break;case 40:if(h.metaKey)break;o?(m.key=v.C0.ESC+"[1;"+(o+1)+"B",x||m.key!==v.C0.ESC+"[1;3B"||(m.key=v.C0.ESC+"[1;5B")):m.key=g?v.C0.ESC+"OB":v.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(m.key=v.C0.ESC+"[2~");break;case 46:m.key=o?v.C0.ESC+"[3;"+(o+1)+"~":v.C0.ESC+"[3~";break;case 36:m.key=o?v.C0.ESC+"[1;"+(o+1)+"H":g?v.C0.ESC+"OH":v.C0.ESC+"[H";break;case 35:m.key=o?v.C0.ESC+"[1;"+(o+1)+"F":g?v.C0.ESC+"OF":v.C0.ESC+"[F";break;case 33:h.shiftKey?m.type=2:h.ctrlKey?m.key=v.C0.ESC+"[5;"+(o+1)+"~":m.key=v.C0.ESC+"[5~";break;case 34:h.shiftKey?m.type=3:h.ctrlKey?m.key=v.C0.ESC+"[6;"+(o+1)+"~":m.key=v.C0.ESC+"[6~";break;case 112:m.key=o?v.C0.ESC+"[1;"+(o+1)+"P":v.C0.ESC+"OP";break;case 113:m.key=o?v.C0.ESC+"[1;"+(o+1)+"Q":v.C0.ESC+"OQ";break;case 114:m.key=o?v.C0.ESC+"[1;"+(o+1)+"R":v.C0.ESC+"OR";break;case 115:m.key=o?v.C0.ESC+"[1;"+(o+1)+"S":v.C0.ESC+"OS";break;case 116:m.key=o?v.C0.ESC+"[15;"+(o+1)+"~":v.C0.ESC+"[15~";break;case 117:m.key=o?v.C0.ESC+"[17;"+(o+1)+"~":v.C0.ESC+"[17~";break;case 118:m.key=o?v.C0.ESC+"[18;"+(o+1)+"~":v.C0.ESC+"[18~";break;case 119:m.key=o?v.C0.ESC+"[19;"+(o+1)+"~":v.C0.ESC+"[19~";break;case 120:m.key=o?v.C0.ESC+"[20;"+(o+1)+"~":v.C0.ESC+"[20~";break;case 121:m.key=o?v.C0.ESC+"[21;"+(o+1)+"~":v.C0.ESC+"[21~";break;case 122:m.key=o?v.C0.ESC+"[23;"+(o+1)+"~":v.C0.ESC+"[23~";break;case 123:m.key=o?v.C0.ESC+"[24;"+(o+1)+"~":v.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(x&&!E||!h.altKey||h.metaKey)!x||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?m.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(m.key=v.C0.US),h.key==="@"&&(m.key=v.C0.NUL)):h.keyCode===65&&(m.type=1);else{const a=S[h.keyCode],n=a==null?void 0:a[h.shiftKey?1:0];if(n)m.key=v.C0.ESC+n;else if(h.keyCode>=65&&h.keyCode<=90){const u=h.ctrlKey?h.keyCode-64:h.keyCode+32;let _=String.fromCharCode(u);h.shiftKey&&(_=_.toUpperCase()),m.key=v.C0.ESC+_}else if(h.keyCode===32)m.key=v.C0.ESC+(h.ctrlKey?v.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let u=h.code.slice(3,4);h.shiftKey||(u=u.toLowerCase()),m.key=v.C0.ESC+u,m.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?m.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?m.key=v.C0.NUL:h.keyCode>=51&&h.keyCode<=55?m.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?m.key=v.C0.DEL:h.keyCode===219?m.key=v.C0.ESC:h.keyCode===220?m.key=v.C0.FS:h.keyCode===221&&(m.key=v.C0.GS)}return m}},482:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(d){return d>65535?(d-=65536,String.fromCharCode(55296+(d>>10))+String.fromCharCode(d%1024+56320)):String.fromCharCode(d)},l.utf32ToString=function(d,v=0,S=d.length){let h="";for(let g=v;g<S;++g){let x=d[g];x>65535?(x-=65536,h+=String.fromCharCode(55296+(x>>10))+String.fromCharCode(x%1024+56320)):h+=String.fromCharCode(x)}return h},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(d,v){const S=d.length;if(!S)return 0;let h=0,g=0;if(this._interim){const x=d.charCodeAt(g++);56320<=x&&x<=57343?v[h++]=1024*(this._interim-55296)+x-56320+65536:(v[h++]=this._interim,v[h++]=x),this._interim=0}for(let x=g;x<S;++x){const E=d.charCodeAt(x);if(55296<=E&&E<=56319){if(++x>=S)return this._interim=E,h;const m=d.charCodeAt(x);56320<=m&&m<=57343?v[h++]=1024*(E-55296)+m-56320+65536:(v[h++]=E,v[h++]=m)}else E!==65279&&(v[h++]=E)}return h}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(d,v){const S=d.length;if(!S)return 0;let h,g,x,E,m=0,o=0,a=0;if(this.interim[0]){let _=!1,k=this.interim[0];k&=(224&k)==192?31:(240&k)==224?15:7;let b,L=0;for(;(b=63&this.interim[++L])&&L<4;)k<<=6,k|=b;const C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,T=C-L;for(;a<T;){if(a>=S)return 0;if(b=d[a++],(192&b)!=128){a--,_=!0;break}this.interim[L++]=b,k<<=6,k|=63&b}_||(C===2?k<128?a--:v[m++]=k:C===3?k<2048||k>=55296&&k<=57343||k===65279||(v[m++]=k):k<65536||k>1114111||(v[m++]=k)),this.interim.fill(0)}const n=S-4;let u=a;for(;u<S;){for(;!(!(u<n)||128&(h=d[u])||128&(g=d[u+1])||128&(x=d[u+2])||128&(E=d[u+3]));)v[m++]=h,v[m++]=g,v[m++]=x,v[m++]=E,u+=4;if(h=d[u++],h<128)v[m++]=h;else if((224&h)==192){if(u>=S)return this.interim[0]=h,m;if(g=d[u++],(192&g)!=128){u--;continue}if(o=(31&h)<<6|63&g,o<128){u--;continue}v[m++]=o}else if((240&h)==224){if(u>=S)return this.interim[0]=h,m;if(g=d[u++],(192&g)!=128){u--;continue}if(u>=S)return this.interim[0]=h,this.interim[1]=g,m;if(x=d[u++],(192&x)!=128){u--;continue}if(o=(15&h)<<12|(63&g)<<6|63&x,o<2048||o>=55296&&o<=57343||o===65279)continue;v[m++]=o}else if((248&h)==240){if(u>=S)return this.interim[0]=h,m;if(g=d[u++],(192&g)!=128){u--;continue}if(u>=S)return this.interim[0]=h,this.interim[1]=g,m;if(x=d[u++],(192&x)!=128){u--;continue}if(u>=S)return this.interim[0]=h,this.interim[1]=g,this.interim[2]=x,m;if(E=d[u++],(192&E)!=128){u--;continue}if(o=(7&h)<<18|(63&g)<<12|(63&x)<<6|63&E,o<65536||o>1114111)continue;v[m++]=o}}return m}}},225:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;const v=d(1480),S=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;l.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let x=0;x<S.length;++x)g.fill(0,S[x][0],S[x][1]+1)}}wcwidth(x){return x<32?0:x<127?1:x<65536?g[x]:(function(E,m){let o,a=0,n=m.length-1;if(E<m[0][0]||E>m[n][1])return!1;for(;n>=a;)if(o=a+n>>1,E>m[o][1])a=o+1;else{if(!(E<m[o][0]))return!0;n=o-1}return!1})(x,h)?0:x>=131072&&x<=196605||x>=196608&&x<=262141?2:1}charProperties(x,E){let m=this.wcwidth(x),o=m===0&&E!==0;if(o){const a=v.UnicodeService.extractWidth(E);a===0?o=!1:a>m&&(m=a)}return v.UnicodeService.createPropertyValue(0,m,o)}}},5981:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;const v=d(8460),S=d(844);class h extends S.Disposable{constructor(x){super(),this._action=x,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new v.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(x,E){if(E!==void 0&&this._syncCalls>E)return void(this._syncCalls=0);if(this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let m;for(this._isSyncWriting=!0;m=this._writeBuffer.shift();){this._action(m);const o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(x,E){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(E),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(E)}_innerWrite(x=0,E=!0){const m=x||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const o=this._writeBuffer[this._bufferOffset],a=this._action(o,E);if(a){const u=_=>Date.now()-m>=12?setTimeout((()=>this._innerWrite(0,_))):this._innerWrite(m,_);return void a.catch((_=>(queueMicrotask((()=>{throw _})),Promise.resolve(!1)))).then(u)}const n=this._callbacks[this._bufferOffset];if(n&&n(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-m>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}l.WriteBuffer=h},5941:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.toRgbString=l.parseColor=void 0;const d=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,v=/^[\da-f]+$/;function S(h,g){const x=h.toString(16),E=x.length<2?"0"+x:x;switch(g){case 4:return x[0];case 8:return E;case 12:return(E+E).slice(0,3);default:return E+E}}l.parseColor=function(h){if(!h)return;let g=h.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const x=d.exec(g);if(x){const E=x[1]?15:x[4]?255:x[7]?4095:65535;return[Math.round(parseInt(x[1]||x[4]||x[7]||x[10],16)/E*255),Math.round(parseInt(x[2]||x[5]||x[8]||x[11],16)/E*255),Math.round(parseInt(x[3]||x[6]||x[9]||x[12],16)/E*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),v.exec(g)&&[3,6,9,12].includes(g.length))){const x=g.length/3,E=[0,0,0];for(let m=0;m<3;++m){const o=parseInt(g.slice(x*m,x*m+x),16);E[m]=x===1?o<<4:x===2?o:x===3?o>>4:o>>8}return E}},l.toRgbString=function(h,g=16){const[x,E,m]=h;return`rgb:${S(x,g)}/${S(E,g)}/${S(m,g)}`}},5770:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;const v=d(482),S=d(8742),h=d(5770),g=[];l.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(E,m){this._handlers[E]===void 0&&(this._handlers[E]=[]);const o=this._handlers[E];return o.push(m),{dispose:()=>{const a=o.indexOf(m);a!==-1&&o.splice(a,1)}}}clearHandler(E){this._handlers[E]&&delete this._handlers[E]}setHandlerFallback(E){this._handlerFb=E}reset(){if(this._active.length)for(let E=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;E>=0;--E)this._active[E].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(E,m){if(this.reset(),this._ident=E,this._active=this._handlers[E]||g,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].hook(m);else this._handlerFb(this._ident,"HOOK",m)}put(E,m,o){if(this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].put(E,m,o);else this._handlerFb(this._ident,"PUT",(0,v.utf32ToString)(E,m,o))}unhook(E,m=!0){if(this._active.length){let o=!1,a=this._active.length-1,n=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,o=m,n=this._stack.fallThrough,this._stack.paused=!1),!n&&o===!1){for(;a>=0&&(o=this._active[a].unhook(E),o!==!0);a--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,o;a--}for(;a>=0;a--)if(o=this._active[a].unhook(!1),o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,o}else this._handlerFb(this._ident,"UNHOOK",E);this._active=g,this._ident=0}};const x=new S.Params;x.addParam(0),l.DcsHandler=class{constructor(E){this._handler=E,this._data="",this._params=x,this._hitLimit=!1}hook(E){this._params=E.length>1||E.params[0]?E.clone():x,this._data="",this._hitLimit=!1}put(E,m,o){this._hitLimit||(this._data+=(0,v.utf32ToString)(E,m,o),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(E){let m=!1;if(this._hitLimit)m=!1;else if(E&&(m=this._handler(this._data,this._params),m instanceof Promise))return m.then((o=>(this._params=x,this._data="",this._hitLimit=!1,o)));return this._params=x,this._data="",this._hitLimit=!1,m}}},2015:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;const v=d(844),S=d(8742),h=d(6242),g=d(6351);class x{constructor(a){this.table=new Uint8Array(a)}setDefault(a,n){this.table.fill(a<<4|n)}add(a,n,u,_){this.table[n<<8|a]=u<<4|_}addMany(a,n,u,_){for(let k=0;k<a.length;k++)this.table[n<<8|a[k]]=u<<4|_}}l.TransitionTable=x;const E=160;l.VT500_TRANSITION_TABLE=(function(){const o=new x(4095),a=Array.apply(null,Array(256)).map(((L,C)=>C)),n=(L,C)=>a.slice(L,C),u=n(32,127),_=n(0,24);_.push(25),_.push.apply(_,n(28,32));const k=n(0,14);let b;for(b in o.setDefault(1,0),o.addMany(u,0,2,0),k)o.addMany([24,26,153,154],b,3,0),o.addMany(n(128,144),b,3,0),o.addMany(n(144,152),b,3,0),o.add(156,b,0,0),o.add(27,b,11,1),o.add(157,b,4,8),o.addMany([152,158,159],b,0,7),o.add(155,b,11,3),o.add(144,b,11,9);return o.addMany(_,0,3,0),o.addMany(_,1,3,1),o.add(127,1,0,1),o.addMany(_,8,0,8),o.addMany(_,3,3,3),o.add(127,3,0,3),o.addMany(_,4,3,4),o.add(127,4,0,4),o.addMany(_,6,3,6),o.addMany(_,5,3,5),o.add(127,5,0,5),o.addMany(_,2,3,2),o.add(127,2,0,2),o.add(93,1,4,8),o.addMany(u,8,5,8),o.add(127,8,5,8),o.addMany([156,27,24,26,7],8,6,0),o.addMany(n(28,32),8,0,8),o.addMany([88,94,95],1,0,7),o.addMany(u,7,0,7),o.addMany(_,7,0,7),o.add(156,7,0,0),o.add(127,7,0,7),o.add(91,1,11,3),o.addMany(n(64,127),3,7,0),o.addMany(n(48,60),3,8,4),o.addMany([60,61,62,63],3,9,4),o.addMany(n(48,60),4,8,4),o.addMany(n(64,127),4,7,0),o.addMany([60,61,62,63],4,0,6),o.addMany(n(32,64),6,0,6),o.add(127,6,0,6),o.addMany(n(64,127),6,0,0),o.addMany(n(32,48),3,9,5),o.addMany(n(32,48),5,9,5),o.addMany(n(48,64),5,0,6),o.addMany(n(64,127),5,7,0),o.addMany(n(32,48),4,9,5),o.addMany(n(32,48),1,9,2),o.addMany(n(32,48),2,9,2),o.addMany(n(48,127),2,10,0),o.addMany(n(48,80),1,10,0),o.addMany(n(81,88),1,10,0),o.addMany([89,90,92],1,10,0),o.addMany(n(96,127),1,10,0),o.add(80,1,11,9),o.addMany(_,9,0,9),o.add(127,9,0,9),o.addMany(n(28,32),9,0,9),o.addMany(n(32,48),9,9,12),o.addMany(n(48,60),9,8,10),o.addMany([60,61,62,63],9,9,10),o.addMany(_,11,0,11),o.addMany(n(32,128),11,0,11),o.addMany(n(28,32),11,0,11),o.addMany(_,10,0,10),o.add(127,10,0,10),o.addMany(n(28,32),10,0,10),o.addMany(n(48,60),10,8,10),o.addMany([60,61,62,63],10,0,11),o.addMany(n(32,48),10,9,12),o.addMany(_,12,0,12),o.add(127,12,0,12),o.addMany(n(28,32),12,0,12),o.addMany(n(32,48),12,9,12),o.addMany(n(48,64),12,0,11),o.addMany(n(64,127),12,12,13),o.addMany(n(64,127),10,12,13),o.addMany(n(64,127),9,12,13),o.addMany(_,13,13,13),o.addMany(u,13,13,13),o.add(127,13,0,13),o.addMany([27,156,24,26],13,14,0),o.add(E,0,2,0),o.add(E,8,5,8),o.add(E,6,0,6),o.add(E,11,0,11),o.add(E,13,13,13),o})();class m extends v.Disposable{constructor(a=l.VT500_TRANSITION_TABLE){super(),this._transitions=a,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new S.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(n,u,_)=>{},this._executeHandlerFb=n=>{},this._csiHandlerFb=(n,u)=>{},this._escHandlerFb=n=>{},this._errorHandlerFb=n=>n,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,v.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(a,n=[64,126]){let u=0;if(a.prefix){if(a.prefix.length>1)throw new Error("only one byte as prefix supported");if(u=a.prefix.charCodeAt(0),u&&60>u||u>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(a.intermediates){if(a.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let k=0;k<a.intermediates.length;++k){const b=a.intermediates.charCodeAt(k);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");u<<=8,u|=b}}if(a.final.length!==1)throw new Error("final must be a single byte");const _=a.final.charCodeAt(0);if(n[0]>_||_>n[1])throw new Error(`final must be in range ${n[0]} .. ${n[1]}`);return u<<=8,u|=_,u}identToString(a){const n=[];for(;a;)n.push(String.fromCharCode(255&a)),a>>=8;return n.reverse().join("")}setPrintHandler(a){this._printHandler=a}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(a,n){const u=this._identifier(a,[48,126]);this._escHandlers[u]===void 0&&(this._escHandlers[u]=[]);const _=this._escHandlers[u];return _.push(n),{dispose:()=>{const k=_.indexOf(n);k!==-1&&_.splice(k,1)}}}clearEscHandler(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]}setEscHandlerFallback(a){this._escHandlerFb=a}setExecuteHandler(a,n){this._executeHandlers[a.charCodeAt(0)]=n}clearExecuteHandler(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]}setExecuteHandlerFallback(a){this._executeHandlerFb=a}registerCsiHandler(a,n){const u=this._identifier(a);this._csiHandlers[u]===void 0&&(this._csiHandlers[u]=[]);const _=this._csiHandlers[u];return _.push(n),{dispose:()=>{const k=_.indexOf(n);k!==-1&&_.splice(k,1)}}}clearCsiHandler(a){this._csiHandlers[this._identifier(a)]&&delete this._csiHandlers[this._identifier(a)]}setCsiHandlerFallback(a){this._csiHandlerFb=a}registerDcsHandler(a,n){return this._dcsParser.registerHandler(this._identifier(a),n)}clearDcsHandler(a){this._dcsParser.clearHandler(this._identifier(a))}setDcsHandlerFallback(a){this._dcsParser.setHandlerFallback(a)}registerOscHandler(a,n){return this._oscParser.registerHandler(a,n)}clearOscHandler(a){this._oscParser.clearHandler(a)}setOscHandlerFallback(a){this._oscParser.setHandlerFallback(a)}setErrorHandler(a){this._errorHandler=a}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(a,n,u,_,k){this._parseStack.state=a,this._parseStack.handlers=n,this._parseStack.handlerPos=u,this._parseStack.transition=_,this._parseStack.chunkPos=k}parse(a,n,u){let _,k=0,b=0,L=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,L=this._parseStack.chunkPos+1;else{if(u===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const C=this._parseStack.handlers;let T=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(u===!1&&T>-1){for(;T>=0&&(_=C[T](this._params),_!==!0);T--)if(_ instanceof Promise)return this._parseStack.handlerPos=T,_}this._parseStack.handlers=[];break;case 4:if(u===!1&&T>-1){for(;T>=0&&(_=C[T](),_!==!0);T--)if(_ instanceof Promise)return this._parseStack.handlerPos=T,_}this._parseStack.handlers=[];break;case 6:if(k=a[this._parseStack.chunkPos],_=this._dcsParser.unhook(k!==24&&k!==26,u),_)return _;k===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(k=a[this._parseStack.chunkPos],_=this._oscParser.end(k!==24&&k!==26,u),_)return _;k===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,L=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let C=L;C<n;++C){switch(k=a[C],b=this._transitions.table[this.currentState<<8|(k<160?k:E)],b>>4){case 2:for(let F=C+1;;++F){if(F>=n||(k=a[F])<32||k>126&&k<E){this._printHandler(a,C,F),C=F-1;break}if(++F>=n||(k=a[F])<32||k>126&&k<E){this._printHandler(a,C,F),C=F-1;break}if(++F>=n||(k=a[F])<32||k>126&&k<E){this._printHandler(a,C,F),C=F-1;break}if(++F>=n||(k=a[F])<32||k>126&&k<E){this._printHandler(a,C,F),C=F-1;break}}break;case 3:this._executeHandlers[k]?this._executeHandlers[k]():this._executeHandlerFb(k),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:C,code:k,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const T=this._csiHandlers[this._collect<<8|k];let H=T?T.length-1:-1;for(;H>=0&&(_=T[H](this._params),_!==!0);H--)if(_ instanceof Promise)return this._preserveStack(3,T,H,b,C),_;H<0&&this._csiHandlerFb(this._collect<<8|k,this._params),this.precedingJoinState=0;break;case 8:do switch(k){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(k-48)}while(++C<n&&(k=a[C])>47&&k<60);C--;break;case 9:this._collect<<=8,this._collect|=k;break;case 10:const U=this._escHandlers[this._collect<<8|k];let W=U?U.length-1:-1;for(;W>=0&&(_=U[W](),_!==!0);W--)if(_ instanceof Promise)return this._preserveStack(4,U,W,b,C),_;W<0&&this._escHandlerFb(this._collect<<8|k),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|k,this._params);break;case 13:for(let F=C+1;;++F)if(F>=n||(k=a[F])===24||k===26||k===27||k>127&&k<E){this._dcsParser.put(a,C,F),C=F-1;break}break;case 14:if(_=this._dcsParser.unhook(k!==24&&k!==26),_)return this._preserveStack(6,[],0,b,C),_;k===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let F=C+1;;F++)if(F>=n||(k=a[F])<32||k>127&&k<E){this._oscParser.put(a,C,F),C=F-1;break}break;case 6:if(_=this._oscParser.end(k!==24&&k!==26),_)return this._preserveStack(5,[],0,b,C),_;k===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&b}}}l.EscapeSequenceParser=m},6242:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;const v=d(5770),S=d(482),h=[];l.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,x){this._handlers[g]===void 0&&(this._handlers[g]=[]);const E=this._handlers[g];return E.push(x),{dispose:()=>{const m=E.indexOf(x);m!==-1&&E.splice(m,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,x,E){if(this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].put(g,x,E);else this._handlerFb(this._id,"PUT",(0,S.utf32ToString)(g,x,E))}start(){this.reset(),this._state=1}put(g,x,E){if(this._state!==3){if(this._state===1)for(;x<E;){const m=g[x++];if(m===59){this._state=2,this._start();break}if(m<48||57<m)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+m-48}this._state===2&&E-x>0&&this._put(g,x,E)}}end(g,x=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let E=!1,m=this._active.length-1,o=!1;if(this._stack.paused&&(m=this._stack.loopPosition-1,E=x,o=this._stack.fallThrough,this._stack.paused=!1),!o&&E===!1){for(;m>=0&&(E=this._active[m].end(g),E!==!0);m--)if(E instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!1,E;m--}for(;m>=0;m--)if(E=this._active[m].end(!1),E instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!0,E}else this._handlerFb(this._id,"END",g);this._active=h,this._id=-1,this._state=0}}},l.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,x,E){this._hitLimit||(this._data+=(0,S.utf32ToString)(g,x,E),this._data.length>v.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let x=!1;if(this._hitLimit)x=!1;else if(g&&(x=this._handler(this._data),x instanceof Promise))return x.then((E=>(this._data="",this._hitLimit=!1,E)));return this._data="",this._hitLimit=!1,x}}},8742:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;const d=2147483647;class v{static fromArray(h){const g=new v;if(!h.length)return g;for(let x=Array.isArray(h[0])?1:0;x<h.length;++x){const E=h[x];if(Array.isArray(E))for(let m=0;m<E.length;++m)g.addSubParam(E[m]);else g.addParam(E)}return g}constructor(h=32,g=32){if(this.maxLength=h,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new v(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let g=0;g<this.length;++g){h.push(this.params[g]);const x=this._subParamsIdx[g]>>8,E=255&this._subParamsIdx[g];E-x>0&&h.push(Array.prototype.slice.call(this._subParams,x,E))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>d?d:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>d?d:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const g=this._subParamsIdx[h]>>8,x=255&this._subParamsIdx[h];return x-g>0?this._subParams.subarray(g,x):null}getSubParamsAll(){const h={};for(let g=0;g<this.length;++g){const x=this._subParamsIdx[g]>>8,E=255&this._subParamsIdx[g];E-x>0&&(h[g]=this._subParams.slice(x,E))}return h}addDigit(h){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const x=this._digitIsSub?this._subParams:this.params,E=x[g-1];x[g-1]=~E?Math.min(10*E+h,d):h}}l.Params=v},5741:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0,l.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let d=this._addons.length-1;d>=0;d--)this._addons[d].instance.dispose()}loadAddon(d,v){const S={instance:v,dispose:v.dispose,isDisposed:!1};this._addons.push(S),v.dispose=()=>this._wrappedAddonDispose(S),v.activate(d)}_wrappedAddonDispose(d){if(d.isDisposed)return;let v=-1;for(let S=0;S<this._addons.length;S++)if(this._addons[S]===d){v=S;break}if(v===-1)throw new Error("Could not dispose an addon that has not been loaded");d.isDisposed=!0,d.dispose.apply(d.instance),this._addons.splice(v,1)}}},8771:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferApiView=void 0;const v=d(3785),S=d(511);l.BufferApiView=class{constructor(h,g){this._buffer=h,this.type=g}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const g=this._buffer.lines.get(h);if(g)return new v.BufferLineApiView(g)}getNullCell(){return new S.CellData}}},3785:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLineApiView=void 0;const v=d(511);l.BufferLineApiView=class{constructor(S){this._line=S}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(S,h){if(!(S<0||S>=this._line.length))return h?(this._line.loadCell(S,h),h):this._line.loadCell(S,new v.CellData)}translateToString(S,h,g){return this._line.translateToString(S,h,g)}}},8285:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferNamespaceApi=void 0;const v=d(8771),S=d(8460),h=d(844);class g extends h.Disposable{constructor(E){super(),this._core=E,this._onBufferChange=this.register(new S.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new v.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new v.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}l.BufferNamespaceApi=g},7975:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ParserApi=void 0,l.ParserApi=class{constructor(d){this._core=d}registerCsiHandler(d,v){return this._core.registerCsiHandler(d,(S=>v(S.toArray())))}addCsiHandler(d,v){return this.registerCsiHandler(d,v)}registerDcsHandler(d,v){return this._core.registerDcsHandler(d,((S,h)=>v(S,h.toArray())))}addDcsHandler(d,v){return this.registerDcsHandler(d,v)}registerEscHandler(d,v){return this._core.registerEscHandler(d,v)}addEscHandler(d,v){return this.registerEscHandler(d,v)}registerOscHandler(d,v){return this._core.registerOscHandler(d,v)}addOscHandler(d,v){return this.registerOscHandler(d,v)}}},7090:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeApi=void 0,l.UnicodeApi=class{constructor(d){this._core=d}register(d){this._core.unicodeService.register(d)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(d){this._core.unicodeService.activeVersion=d}}},744:function(I,l,d){var v=this&&this.__decorate||function(o,a,n,u){var _,k=arguments.length,b=k<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,n):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(o,a,n,u);else for(var L=o.length-1;L>=0;L--)(_=o[L])&&(b=(k<3?_(b):k>3?_(a,n,b):_(a,n))||b);return k>3&&b&&Object.defineProperty(a,n,b),b},S=this&&this.__param||function(o,a){return function(n,u){a(n,u,o)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;const h=d(8460),g=d(844),x=d(5295),E=d(2585);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;let m=l.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(o){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(o.rawOptions.cols||0,l.MINIMUM_COLS),this.rows=Math.max(o.rawOptions.rows||0,l.MINIMUM_ROWS),this.buffers=this.register(new x.BufferSet(o,this))}resize(o,a){this.cols=o,this.rows=a,this.buffers.resize(o,a),this._onResize.fire({cols:o,rows:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(o,a=!1){const n=this.buffer;let u;u=this._cachedBlankLine,u&&u.length===this.cols&&u.getFg(0)===o.fg&&u.getBg(0)===o.bg||(u=n.getBlankLine(o,a),this._cachedBlankLine=u),u.isWrapped=a;const _=n.ybase+n.scrollTop,k=n.ybase+n.scrollBottom;if(n.scrollTop===0){const b=n.lines.isFull;k===n.lines.length-1?b?n.lines.recycle().copyFrom(u):n.lines.push(u.clone()):n.lines.splice(k+1,0,u.clone()),b?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{const b=k-_+1;n.lines.shiftElements(_+1,b-1,-1),n.lines.set(k,u.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(o,a,n){const u=this.buffer;if(o<0){if(u.ydisp===0)return;this.isUserScrolling=!0}else o+u.ydisp>=u.ybase&&(this.isUserScrolling=!1);const _=u.ydisp;u.ydisp=Math.max(Math.min(u.ydisp+o,u.ybase),0),_!==u.ydisp&&(a||this._onScroll.fire(u.ydisp))}};l.BufferService=m=v([S(0,E.IOptionsService)],m)},7994:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0,l.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(d){this.glevel=d,this.charset=this._charsets[d]}setgCharset(d,v){this._charsets[d]=v,this.glevel===d&&(this.charset=v)}}},1753:function(I,l,d){var v=this&&this.__decorate||function(u,_,k,b){var L,C=arguments.length,T=C<3?_:b===null?b=Object.getOwnPropertyDescriptor(_,k):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(u,_,k,b);else for(var H=u.length-1;H>=0;H--)(L=u[H])&&(T=(C<3?L(T):C>3?L(_,k,T):L(_,k))||T);return C>3&&T&&Object.defineProperty(_,k,T),T},S=this&&this.__param||function(u,_){return function(k,b){_(k,b,u)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;const h=d(2585),g=d(8460),x=d(844),E={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:u=>u.button!==4&&u.action===1&&(u.ctrl=!1,u.alt=!1,u.shift=!1,!0)},VT200:{events:19,restrict:u=>u.action!==32},DRAG:{events:23,restrict:u=>u.action!==32||u.button!==3},ANY:{events:31,restrict:u=>!0}};function m(u,_){let k=(u.ctrl?16:0)|(u.shift?4:0)|(u.alt?8:0);return u.button===4?(k|=64,k|=u.action):(k|=3&u.button,4&u.button&&(k|=64),8&u.button&&(k|=128),u.action===32?k|=32:u.action!==0||_||(k|=3)),k}const o=String.fromCharCode,a={DEFAULT:u=>{const _=[m(u,!1)+32,u.col+32,u.row+32];return _[0]>255||_[1]>255||_[2]>255?"":`\x1B[M${o(_[0])}${o(_[1])}${o(_[2])}`},SGR:u=>{const _=u.action===0&&u.button!==4?"m":"M";return`\x1B[<${m(u,!0)};${u.col};${u.row}${_}`},SGR_PIXELS:u=>{const _=u.action===0&&u.button!==4?"m":"M";return`\x1B[<${m(u,!0)};${u.x};${u.y}${_}`}};let n=l.CoreMouseService=class extends x.Disposable{constructor(u,_){super(),this._bufferService=u,this._coreService=_,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const k of Object.keys(E))this.addProtocol(k,E[k]);for(const k of Object.keys(a))this.addEncoding(k,a[k]);this.reset()}addProtocol(u,_){this._protocols[u]=_}addEncoding(u,_){this._encodings[u]=_}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(u){if(!this._protocols[u])throw new Error(`unknown protocol "${u}"`);this._activeProtocol=u,this._onProtocolChange.fire(this._protocols[u].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(u){if(!this._encodings[u])throw new Error(`unknown encoding "${u}"`);this._activeEncoding=u}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(u){if(u.col<0||u.col>=this._bufferService.cols||u.row<0||u.row>=this._bufferService.rows||u.button===4&&u.action===32||u.button===3&&u.action!==32||u.button!==4&&(u.action===2||u.action===3)||(u.col++,u.row++,u.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,u,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(u))return!1;const _=this._encodings[this._activeEncoding](u);return _&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(_):this._coreService.triggerDataEvent(_,!0)),this._lastEvent=u,!0}explainEvents(u){return{down:!!(1&u),up:!!(2&u),drag:!!(4&u),move:!!(8&u),wheel:!!(16&u)}}_equalEvents(u,_,k){if(k){if(u.x!==_.x||u.y!==_.y)return!1}else if(u.col!==_.col||u.row!==_.row)return!1;return u.button===_.button&&u.action===_.action&&u.ctrl===_.ctrl&&u.alt===_.alt&&u.shift===_.shift}};l.CoreMouseService=n=v([S(0,h.IBufferService),S(1,h.ICoreService)],n)},6975:function(I,l,d){var v=this&&this.__decorate||function(n,u,_,k){var b,L=arguments.length,C=L<3?u:k===null?k=Object.getOwnPropertyDescriptor(u,_):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,u,_,k);else for(var T=n.length-1;T>=0;T--)(b=n[T])&&(C=(L<3?b(C):L>3?b(u,_,C):b(u,_))||C);return L>3&&C&&Object.defineProperty(u,_,C),C},S=this&&this.__param||function(n,u){return function(_,k){u(_,k,n)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;const h=d(1439),g=d(8460),x=d(844),E=d(2585),m=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let a=l.CoreService=class extends x.Disposable{constructor(n,u,_){super(),this._bufferService=n,this._logService=u,this._optionsService=_,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(m),this.decPrivateModes=(0,h.clone)(o)}reset(){this.modes=(0,h.clone)(m),this.decPrivateModes=(0,h.clone)(o)}triggerDataEvent(n,u=!1){if(this._optionsService.rawOptions.disableStdin)return;const _=this._bufferService.buffer;u&&this._optionsService.rawOptions.scrollOnUserInput&&_.ybase!==_.ydisp&&this._onRequestScrollToBottom.fire(),u&&this._onUserInput.fire(),this._logService.debug(`sending data "${n}"`,(()=>n.split("").map((k=>k.charCodeAt(0))))),this._onData.fire(n)}triggerBinaryEvent(n){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${n}"`,(()=>n.split("").map((u=>u.charCodeAt(0))))),this._onBinary.fire(n))}};l.CoreService=a=v([S(0,E.IBufferService),S(1,E.ILogService),S(2,E.IOptionsService)],a)},9074:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DecorationService=void 0;const v=d(8055),S=d(8460),h=d(844),g=d(6106);let x=0,E=0;class m extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList((n=>n==null?void 0:n.marker.line)),this._onDecorationRegistered=this.register(new S.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new S.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)((()=>this.reset())))}registerDecoration(n){if(n.marker.isDisposed)return;const u=new o(n);if(u){const _=u.marker.onDispose((()=>u.dispose()));u.onDispose((()=>{u&&(this._decorations.delete(u)&&this._onDecorationRemoved.fire(u),_.dispose())})),this._decorations.insert(u),this._onDecorationRegistered.fire(u)}return u}reset(){for(const n of this._decorations.values())n.dispose();this._decorations.clear()}*getDecorationsAtCell(n,u,_){let k=0,b=0;for(const L of this._decorations.getKeyIterator(u))k=L.options.x??0,b=k+(L.options.width??1),n>=k&&n<b&&(!_||(L.options.layer??"bottom")===_)&&(yield L)}forEachDecorationAtCell(n,u,_,k){this._decorations.forEachByKey(u,(b=>{x=b.options.x??0,E=x+(b.options.width??1),n>=x&&n<E&&(!_||(b.options.layer??"bottom")===_)&&k(b)}))}}l.DecorationService=m;class o extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=v.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=v.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(n){super(),this.options=n,this.onRenderEmitter=this.register(new S.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new S.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=n.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;const v=d(2585),S=d(8343);class h{constructor(...x){this._entries=new Map;for(const[E,m]of x)this.set(E,m)}set(x,E){const m=this._entries.get(x);return this._entries.set(x,E),m}forEach(x){for(const[E,m]of this._entries.entries())x(E,m)}has(x){return this._entries.has(x)}get(x){return this._entries.get(x)}}l.ServiceCollection=h,l.InstantiationService=class{constructor(){this._services=new h,this._services.set(v.IInstantiationService,this)}setService(g,x){this._services.set(g,x)}getService(g){return this._services.get(g)}createInstance(g,...x){const E=(0,S.getServiceDependencies)(g).sort(((a,n)=>a.index-n.index)),m=[];for(const a of E){const n=this._services.get(a.id);if(!n)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${a.id}.`);m.push(n)}const o=E.length>0?E[0].index:x.length;if(x.length!==o)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${o+1} conflicts with ${x.length} static arguments`);return new g(...x,...m)}}},7866:function(I,l,d){var v=this&&this.__decorate||function(o,a,n,u){var _,k=arguments.length,b=k<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,n):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(o,a,n,u);else for(var L=o.length-1;L>=0;L--)(_=o[L])&&(b=(k<3?_(b):k>3?_(a,n,b):_(a,n))||b);return k>3&&b&&Object.defineProperty(a,n,b),b},S=this&&this.__param||function(o,a){return function(n,u){a(n,u,o)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const h=d(844),g=d(2585),x={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let E,m=l.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),E=this}_updateLogLevel(){this._logLevel=x[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let a=0;a<o.length;a++)typeof o[a]=="function"&&(o[a]=o[a]())}_log(o,a,n){this._evalLazyOptionalParams(n),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...n)}trace(o,...a){var n;this._logLevel<=g.LogLevelEnum.TRACE&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.trace.bind(this._optionsService.options.logger))??console.log,o,a)}debug(o,...a){var n;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.debug.bind(this._optionsService.options.logger))??console.log,o,a)}info(o,...a){var n;this._logLevel<=g.LogLevelEnum.INFO&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.info.bind(this._optionsService.options.logger))??console.info,o,a)}warn(o,...a){var n;this._logLevel<=g.LogLevelEnum.WARN&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.warn.bind(this._optionsService.options.logger))??console.warn,o,a)}error(o,...a){var n;this._logLevel<=g.LogLevelEnum.ERROR&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.error.bind(this._optionsService.options.logger))??console.error,o,a)}};l.LogService=m=v([S(0,g.IOptionsService)],m),l.setTraceLogger=function(o){E=o},l.traceCall=function(o,a,n){if(typeof n.value!="function")throw new Error("not supported");const u=n.value;n.value=function(..._){if(E.logLevel!==g.LogLevelEnum.TRACE)return u.apply(this,_);E.trace(`GlyphRenderer#${u.name}(${_.map((b=>JSON.stringify(b))).join(", ")})`);const k=u.apply(this,_);return E.trace(`GlyphRenderer#${u.name} return`,k),k}}},7302:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=void 0;const v=d(8460),S=d(844),h=d(6114);l.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class x extends S.Disposable{constructor(m){super(),this._onOptionChange=this.register(new v.EventEmitter),this.onOptionChange=this._onOptionChange.event;const o={...l.DEFAULT_OPTIONS};for(const a in m)if(a in o)try{const n=m[a];o[a]=this._sanitizeAndValidateOption(a,n)}catch(n){console.error(n)}this.rawOptions=o,this.options={...o},this._setupOptions(),this.register((0,S.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(m,o){return this.onOptionChange((a=>{a===m&&o(this.rawOptions[m])}))}onMultipleOptionChange(m,o){return this.onOptionChange((a=>{m.indexOf(a)!==-1&&o()}))}_setupOptions(){const m=a=>{if(!(a in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);return this.rawOptions[a]},o=(a,n)=>{if(!(a in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);n=this._sanitizeAndValidateOption(a,n),this.rawOptions[a]!==n&&(this.rawOptions[a]=n,this._onOptionChange.fire(a))};for(const a in this.rawOptions){const n={get:m.bind(this,a),set:o.bind(this,a)};Object.defineProperty(this.options,a,n)}}_sanitizeAndValidateOption(m,o){switch(m){case"cursorStyle":if(o||(o=l.DEFAULT_OPTIONS[m]),!(function(a){return a==="block"||a==="underline"||a==="bar"})(o))throw new Error(`"${o}" is not a valid value for ${m}`);break;case"wordSeparator":o||(o=l.DEFAULT_OPTIONS[m]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=g.includes(o)?o:l.DEFAULT_OPTIONS[m];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(`${m} cannot be less than 1, value: ${o}`);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(`${m} cannot be less than 0, value: ${o}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(`${m} cannot be less than or equal to 0, value: ${o}`);break;case"rows":case"cols":if(!o&&o!==0)throw new Error(`${m} must be numeric, value: ${o}`);break;case"windowsPty":o=o??{}}return o}}l.OptionsService=x},2660:function(I,l,d){var v=this&&this.__decorate||function(x,E,m,o){var a,n=arguments.length,u=n<3?E:o===null?o=Object.getOwnPropertyDescriptor(E,m):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(x,E,m,o);else for(var _=x.length-1;_>=0;_--)(a=x[_])&&(u=(n<3?a(u):n>3?a(E,m,u):a(E,m))||u);return n>3&&u&&Object.defineProperty(E,m,u),u},S=this&&this.__param||function(x,E){return function(m,o){E(m,o,x)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkService=void 0;const h=d(2585);let g=l.OscLinkService=class{constructor(x){this._bufferService=x,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(x){const E=this._bufferService.buffer;if(x.id===void 0){const _=E.addMarker(E.ybase+E.y),k={data:x,id:this._nextId++,lines:[_]};return _.onDispose((()=>this._removeMarkerFromLink(k,_))),this._dataByLinkId.set(k.id,k),k.id}const m=x,o=this._getEntryIdKey(m),a=this._entriesWithId.get(o);if(a)return this.addLineToLink(a.id,E.ybase+E.y),a.id;const n=E.addMarker(E.ybase+E.y),u={id:this._nextId++,key:this._getEntryIdKey(m),data:m,lines:[n]};return n.onDispose((()=>this._removeMarkerFromLink(u,n))),this._entriesWithId.set(u.key,u),this._dataByLinkId.set(u.id,u),u.id}addLineToLink(x,E){const m=this._dataByLinkId.get(x);if(m&&m.lines.every((o=>o.line!==E))){const o=this._bufferService.buffer.addMarker(E);m.lines.push(o),o.onDispose((()=>this._removeMarkerFromLink(m,o)))}}getLinkData(x){var E;return(E=this._dataByLinkId.get(x))==null?void 0:E.data}_getEntryIdKey(x){return`${x.id};;${x.uri}`}_removeMarkerFromLink(x,E){const m=x.lines.indexOf(E);m!==-1&&(x.lines.splice(m,1),x.lines.length===0&&(x.data.id!==void 0&&this._entriesWithId.delete(x.key),this._dataByLinkId.delete(x.id)))}};l.OscLinkService=g=v([S(0,h.IBufferService)],g)},8343:(I,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const d="di$target",v="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(S){return S[v]||[]},l.createDecorator=function(S){if(l.serviceRegistry.has(S))return l.serviceRegistry.get(S);const h=function(g,x,E){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(m,o,a){o[d]===o?o[v].push({id:m,index:a}):(o[v]=[{id:m,index:a}],o[d]=o)})(h,g,E)};return h.toString=()=>S,l.serviceRegistry.set(S,h),h}},2585:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const v=d(8343);var S;l.IBufferService=(0,v.createDecorator)("BufferService"),l.ICoreMouseService=(0,v.createDecorator)("CoreMouseService"),l.ICoreService=(0,v.createDecorator)("CoreService"),l.ICharsetService=(0,v.createDecorator)("CharsetService"),l.IInstantiationService=(0,v.createDecorator)("InstantiationService"),(function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"})(S||(l.LogLevelEnum=S={})),l.ILogService=(0,v.createDecorator)("LogService"),l.IOptionsService=(0,v.createDecorator)("OptionsService"),l.IOscLinkService=(0,v.createDecorator)("OscLinkService"),l.IUnicodeService=(0,v.createDecorator)("UnicodeService"),l.IDecorationService=(0,v.createDecorator)("DecorationService")},1480:(I,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;const v=d(8460),S=d(225);class h{static extractShouldJoin(x){return(1&x)!=0}static extractWidth(x){return x>>1&3}static extractCharKind(x){return x>>3}static createPropertyValue(x,E,m=!1){return(16777215&x)<<3|(3&E)<<1|(m?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new v.EventEmitter,this.onChange=this._onChange.event;const x=new S.UnicodeV6;this.register(x),this._active=x.version,this._activeProvider=x}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(x){if(!this._providers[x])throw new Error(`unknown Unicode version "${x}"`);this._active=x,this._activeProvider=this._providers[x],this._onChange.fire(x)}register(x){this._providers[x.version]=x}wcwidth(x){return this._activeProvider.wcwidth(x)}getStringCellWidth(x){let E=0,m=0;const o=x.length;for(let a=0;a<o;++a){let n=x.charCodeAt(a);if(55296<=n&&n<=56319){if(++a>=o)return E+this.wcwidth(n);const k=x.charCodeAt(a);56320<=k&&k<=57343?n=1024*(n-55296)+k-56320+65536:E+=this.wcwidth(k)}const u=this.charProperties(n,m);let _=h.extractWidth(u);h.extractShouldJoin(u)&&(_-=h.extractWidth(m)),E+=_,m=u}return E}charProperties(x,E){return this._activeProvider.charProperties(x,E)}}l.UnicodeService=h}},R={};function A(I){var l=R[I];if(l!==void 0)return l.exports;var d=R[I]={exports:{}};return p[I].call(d.exports,d,d.exports,A),d.exports}var j={};return(()=>{var I=j;Object.defineProperty(I,"__esModule",{value:!0}),I.Terminal=void 0;const l=A(9042),d=A(3236),v=A(844),S=A(5741),h=A(8285),g=A(7975),x=A(7090),E=["cols","rows"];class m extends v.Disposable{constructor(a){super(),this._core=this.register(new d.Terminal(a)),this._addonManager=this.register(new S.AddonManager),this._publicOptions={...this._core.options};const n=_=>this._core.options[_],u=(_,k)=>{this._checkReadonlyOptions(_),this._core.options[_]=k};for(const _ in this._core.options){const k={get:n.bind(this,_),set:u.bind(this,_)};Object.defineProperty(this._publicOptions,_,k)}}_checkReadonlyOptions(a){if(E.includes(a))throw new Error(`Option "${a}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new x.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const a=this._core.coreService.decPrivateModes;let n="none";switch(this._core.coreMouseService.activeProtocol){case"X10":n="x10";break;case"VT200":n="vt200";break;case"DRAG":n="drag";break;case"ANY":n="any"}return{applicationCursorKeysMode:a.applicationCursorKeys,applicationKeypadMode:a.applicationKeypad,bracketedPasteMode:a.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:n,originMode:a.origin,reverseWraparoundMode:a.reverseWraparound,sendFocusMode:a.sendFocus,wraparoundMode:a.wraparound}}get options(){return this._publicOptions}set options(a){for(const n in a)this._publicOptions[n]=a[n]}blur(){this._core.blur()}focus(){this._core.focus()}input(a,n=!0){this._core.input(a,n)}resize(a,n){this._verifyIntegers(a,n),this._core.resize(a,n)}open(a){this._core.open(a)}attachCustomKeyEventHandler(a){this._core.attachCustomKeyEventHandler(a)}attachCustomWheelEventHandler(a){this._core.attachCustomWheelEventHandler(a)}registerLinkProvider(a){return this._core.registerLinkProvider(a)}registerCharacterJoiner(a){return this._checkProposedApi(),this._core.registerCharacterJoiner(a)}deregisterCharacterJoiner(a){this._checkProposedApi(),this._core.deregisterCharacterJoiner(a)}registerMarker(a=0){return this._verifyIntegers(a),this._core.registerMarker(a)}registerDecoration(a){return this._checkProposedApi(),this._verifyPositiveIntegers(a.x??0,a.width??0,a.height??0),this._core.registerDecoration(a)}hasSelection(){return this._core.hasSelection()}select(a,n,u){this._verifyIntegers(a,n,u),this._core.select(a,n,u)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(a,n){this._verifyIntegers(a,n),this._core.selectLines(a,n)}dispose(){super.dispose()}scrollLines(a){this._verifyIntegers(a),this._core.scrollLines(a)}scrollPages(a){this._verifyIntegers(a),this._core.scrollPages(a)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(a){this._verifyIntegers(a),this._core.scrollToLine(a)}clear(){this._core.clear()}write(a,n){this._core.write(a,n)}writeln(a,n){this._core.write(a),this._core.write(`\r
`,n)}paste(a){this._core.paste(a)}refresh(a,n){this._verifyIntegers(a,n),this._core.refresh(a,n)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(a){this._addonManager.loadAddon(this,a)}static get strings(){return l}_verifyIntegers(...a){for(const n of a)if(n===1/0||isNaN(n)||n%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...a){for(const n of a)if(n&&(n===1/0||isNaN(n)||n%1!=0||n<0))throw new Error("This API only accepts positive integers")}}I.Terminal=m})(),j})()))})(Wl)),Wl.exports}var bg=Cg(),$l={exports:{}},Ad;function kg(){return Ad||(Ad=1,(function(i,c){(function(p,R){i.exports=R()})(self,(()=>(()=>{var p={};return(()=>{var R=p;Object.defineProperty(R,"__esModule",{value:!0}),R.FitAddon=void 0,R.FitAddon=class{activate(A){this._terminal=A}dispose(){}fit(){const A=this.proposeDimensions();if(!A||!this._terminal||isNaN(A.cols)||isNaN(A.rows))return;const j=this._terminal._core;this._terminal.rows===A.rows&&this._terminal.cols===A.cols||(j._renderService.clear(),this._terminal.resize(A.cols,A.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const A=this._terminal._core,j=A._renderService.dimensions;if(j.css.cell.width===0||j.css.cell.height===0)return;const I=this._terminal.options.scrollback===0?0:A.viewport.scrollBarWidth,l=window.getComputedStyle(this._terminal.element.parentElement),d=parseInt(l.getPropertyValue("height")),v=Math.max(0,parseInt(l.getPropertyValue("width"))),S=window.getComputedStyle(this._terminal.element),h=d-(parseInt(S.getPropertyValue("padding-top"))+parseInt(S.getPropertyValue("padding-bottom"))),g=v-(parseInt(S.getPropertyValue("padding-right"))+parseInt(S.getPropertyValue("padding-left")))-I;return{cols:Math.max(2,Math.floor(g/j.css.cell.width)),rows:Math.max(1,Math.floor(h/j.css.cell.height))}}}})(),p})()))})($l)),$l.exports}var Eg=kg();const qo=wn(i=>({terminal:null,isConnected:!1,connectedSession:null,ctrlActive:!1,altActive:!1,shiftActive:!1,setTerminal:c=>i({terminal:c}),setIsConnected:c=>i({isConnected:c}),setConnectedSession:c=>i({connectedSession:c}),toggleCtrl:()=>i(c=>({ctrlActive:!c.ctrlActive})),toggleAlt:()=>i(c=>({altActive:!c.altActive})),toggleShift:()=>i(c=>({shiftActive:!c.shiftActive})),clearModifiers:()=>i({ctrlActive:!1,altActive:!1,shiftActive:!1})}));function Rg({sessionName:i,cols:c=120,rows:p=30}){const R=ie.useRef(null),{terminal:A,setIsConnected:j,setConnectedSession:I}=qo(),{setIsConnecting:l}=St(),d=hr(h=>h.token),v=ie.useCallback(h=>{var g;((g=R.current)==null?void 0:g.readyState)===WebSocket.OPEN&&R.current.send(JSON.stringify({type:"data",data:h}))},[]),S=ie.useCallback((h,g)=>{var x;((x=R.current)==null?void 0:x.readyState)===WebSocket.OPEN&&R.current.send(JSON.stringify({type:"resize",cols:h,rows:g}))},[]);return ie.useEffect(()=>{if(!i||!A)return;l(!0),j(!1);const h=window.location.protocol==="https:"?"wss:":"ws:",g=window.location.host,x=d?`&token=${encodeURIComponent(d)}`:"",E=`${h}//${g}/ws?session=${encodeURIComponent(i)}&cols=${c}&rows=${p}${x}`,m=new WebSocket(E);R.current=m,m.onopen=()=>{console.log(`Terminal WebSocket connected to ${i}`)},m.onmessage=a=>{try{const n=JSON.parse(a.data);switch(n.type){case"attached":j(!0),l(!1),I(i);break;case"data":A.write(n.data);break;case"detached":j(!1),I(null),A.write(`\r
\x1B[33m[Terminal detached: ${n.reason}]\x1B[0m\r
`);break}}catch(n){console.error("Error parsing terminal message:",n)}},m.onclose=()=>{console.log("Terminal WebSocket closed"),j(!1),l(!1),I(null),R.current=null},m.onerror=a=>{console.error("Terminal WebSocket error:",a),l(!1)};const o=A.onData(a=>{v(a)});return()=>{o.dispose(),(m.readyState===WebSocket.OPEN||m.readyState===WebSocket.CONNECTING)&&m.close(),R.current=null}},[i,A,c,p,v,j,l,I]),{send:v,resize:S,ws:R.current}}function Lg({sessionName:i}){return w.jsxs("div",{className:"absolute inset-0 bg-bg flex flex-col items-center justify-center z-10 font-mono",children:[w.jsx("div",{className:"text-accent text-[13px] mb-3",children:i?`Connecting to ${i}...`:"Select a session"}),i&&w.jsx("div",{className:"flex gap-[3px]",children:[...Array(8)].map((c,p)=>w.jsx("span",{className:"w-1.5 h-4 bg-accent",style:{opacity:.2,animation:"co-pulse 0.8s ease-in-out infinite",animationDelay:`${p*.1}s`}},p))}),i&&w.jsx("div",{className:"text-text-dim text-[11px] mt-2.5",children:i})]})}const Dg=[{label:"Ctrl",modifier:"ctrl",sticky:!0},{label:"Alt",modifier:"alt",sticky:!0},{label:"Tab",send:"	"},{label:"Esc",send:"\x1B"},{label:"",send:"\x1B[A"},{label:"",send:"\x1B[B"},{label:"",send:"\x1B[D"},{label:"",send:"\x1B[C"},{label:"Home",send:"\x1B[H"},{label:"End",send:"\x1B[F"},{label:"PgUp",send:"\x1B[5~"},{label:"PgDn",send:"\x1B[6~"},{label:"Del",send:"\x1B[3~"},{label:"C-c",send:""},{label:"C-d",send:""},{label:"C-z",send:""}];function Pg(){const{terminal:i,ctrlActive:c,altActive:p,shiftActive:R,toggleCtrl:A,toggleAlt:j,toggleShift:I,clearModifiers:l}=qo(),d=S=>{if(i){if(S.modifier){switch(S.modifier){case"ctrl":A();break;case"alt":j();break;case"shift":I();break}return}if(S.send){let h=S.send;if(c&&h.length===1){const g=h.charCodeAt(0);g>=64&&g<=95?h=String.fromCharCode(g-64):g>=97&&g<=122&&(h=String.fromCharCode(g-96))}i.paste(h),l()}}},v=S=>{if(!S)return!1;switch(S){case"ctrl":return c;case"alt":return p;case"shift":return R}};return w.jsx("div",{className:"flex gap-1 px-2 py-1.5 bg-surface flex-shrink-0 overflow-x-auto scrollbar-none",children:Dg.map(S=>w.jsx("button",{className:Fe("vkey",S.sticky&&v(S.modifier)&&"sticky active"),onClick:()=>d(S),children:S.label},S.label))})}function xf(){var g,x,E,m;const i=ie.useRef(null),c=ie.useRef(null),p=ie.useRef(null),{terminal:R,setTerminal:A,isConnected:j}=qo(),{currentSession:I}=jt(),{isConnecting:l,theme:d}=St(),v=((x=(g=p.current)==null?void 0:g.proposeDimensions())==null?void 0:x.cols)??120,S=((m=(E=p.current)==null?void 0:E.proposeDimensions())==null?void 0:m.rows)??30,{resize:h}=Rg({sessionName:I,cols:v,rows:S});return ie.useEffect(()=>{if(!i.current||c.current)return;const o=new bg.Terminal({cursorBlink:!0,fontSize:14,fontFamily:"'JetBrains Mono', 'Fira Code', monospace",theme:{background:d==="dark"?"#09090b":"#f8f8fa",foreground:d==="dark"?"#ececf1":"#1a1a2e",cursor:d==="dark"?"#ececf1":"#1a1a2e",cursorAccent:d==="dark"?"#09090b":"#f8f8fa",selectionBackground:d==="dark"?"rgba(99, 102, 241, 0.3)":"rgba(79, 70, 229, 0.3)"}}),a=new Eg.FitAddon;o.loadAddon(a),o.open(i.current),setTimeout(()=>{a.fit()},0),c.current=o,p.current=a,A(o);const n=()=>{a.fit();const _=a.proposeDimensions();_&&h(_.cols,_.rows)};window.addEventListener("resize",n);const u=new ResizeObserver(n);return u.observe(i.current),()=>{window.removeEventListener("resize",n),u.disconnect(),o.dispose(),c.current=null,p.current=null,A(null)}},[A,h,d]),ie.useEffect(()=>{R&&(R.options.theme={background:d==="dark"?"#09090b":"#f8f8fa",foreground:d==="dark"?"#ececf1":"#1a1a2e",cursor:d==="dark"?"#ececf1":"#1a1a2e",cursorAccent:d==="dark"?"#09090b":"#f8f8fa",selectionBackground:d==="dark"?"rgba(99, 102, 241, 0.3)":"rgba(79, 70, 229, 0.3)"})},[d,R]),w.jsxs("div",{className:"flex-1 flex flex-col min-h-0 h-full bg-bg relative",children:[w.jsx("div",{ref:i,className:"flex-1 min-h-0 h-full p-1"}),(l||!j&&I)&&w.jsx(Lg,{sessionName:I}),w.jsx(Pg,{})]})}function Tg(){const i=nf(),c=hr(v=>v.token),[p,R]=ie.useState("checking"),[A,j]=ie.useState(null),I=async()=>{var v,S;try{const g=await(await fetch("/api/code/status",{headers:c?{Authorization:`Bearer ${c}`}:{}})).json();((v=g.data)==null?void 0:v.running)===!0?(R("running"),j(g.data.port)):((S=g.data)==null?void 0:S.installed)===!1?R("not-installed"):R("stopped")}catch{R("stopped")}};ie.useEffect(()=>{I();const v=setInterval(I,5e3);return()=>clearInterval(v)},[c]);const l=async()=>{R("starting");try{(await(await fetch("/api/code/start",{method:"POST",headers:c?{Authorization:`Bearer ${c}`}:{}})).json()).success?setTimeout(I,2e3):R("stopped")}catch{R("stopped")}};if(!i)return w.jsxs("div",{className:"flex-1 h-full flex items-center justify-center flex-col gap-2 text-text-dim text-[13px]",children:[w.jsx("div",{className:"text-[40px] opacity-30",children:""}),w.jsx("p",{children:"Select a session to open in code editor"}),w.jsx("p",{className:"text-[11px] opacity-60",children:"code-server will be embedded here"})]});if(p==="checking")return w.jsxs("div",{className:"flex-1 h-full flex items-center justify-center flex-col gap-2 text-text-dim text-[13px]",children:[w.jsx("div",{className:"text-[40px] opacity-30",children:""}),w.jsx("p",{children:"Checking code-server status..."})]});if(p==="not-installed")return w.jsxs("div",{className:"flex-1 h-full flex items-center justify-center flex-col gap-3 text-text-dim text-[13px]",children:[w.jsx("div",{className:"text-[40px] opacity-30",children:""}),w.jsx("p",{className:"font-medium",children:"code-server not installed"}),w.jsx("p",{className:"text-[11px] opacity-60 max-w-xs text-center",children:"Install code-server to use the integrated editor:"}),w.jsx("code",{className:"bg-bg-secondary px-3 py-2 rounded text-[11px] font-mono",children:"curl -fsSL https://code-server.dev/install.sh | sh"})]});if(p==="stopped")return w.jsxs("div",{className:"flex-1 h-full flex items-center justify-center flex-col gap-3 text-text-dim text-[13px]",children:[w.jsx("div",{className:"text-[40px] opacity-30",children:""}),w.jsx("p",{className:"font-medium",children:"code-server not running"}),w.jsx("button",{onClick:l,className:"mt-2 px-4 py-2 bg-accent text-white rounded hover:bg-accent/90 transition-colors text-[13px]",children:"Start code-server"})]});if(p==="starting")return w.jsxs("div",{className:"flex-1 h-full flex items-center justify-center flex-col gap-2 text-text-dim text-[13px]",children:[w.jsx("div",{className:"text-[40px] opacity-30 animate-pulse",children:""}),w.jsx("p",{children:"Starting code-server..."})]});const d=A?`${window.location.origin}/code/?folder=${encodeURIComponent(i.projectPath||"")}`:"";return w.jsx("div",{className:"flex-1 flex flex-col bg-bg min-h-0 h-full",children:w.jsx("iframe",{src:d,className:"w-full h-full border-none flex-1",allow:"clipboard-read; clipboard-write; cross-origin-isolated",referrerPolicy:"no-referrer",loading:"eager"},d)})}function wf(){const i=ie.useRef(null),{previewUrl:c,setPreviewUrl:p,previewPort:R,setPreviewPort:A,setPreviewFromPort:j}=St(),{ports:I,updateSession:l}=jt(),d=nf(),[v,S]=ie.useState(c);ie.useEffect(()=>{d&&j(d.previewPort)},[d==null?void 0:d.name,d==null?void 0:d.previewPort,j]),ie.useEffect(()=>{S(c)},[c]);const h=I.filter(a=>a.port>=3e3&&a.port<=9e3&&a.port!==3131),g=a=>{a.preventDefault(),p(v)},x=()=>{i.current&&(i.current.src=c)},E=()=>{c&&window.open(c,"_blank")},m=()=>{var a,n;i.current&&((n=(a=i.current).requestFullscreen)==null||n.call(a))},o=async a=>{const n=pc(a);if(p(n),S(n),A(a),d){l(d.name,{previewPort:a});try{await fn.setPreviewPort(d.name,a)}catch{}}};return w.jsxs("div",{className:"flex-1 flex flex-col bg-bg min-h-0 h-full",children:[w.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-surface flex-shrink-0",children:[w.jsxs("form",{onSubmit:g,className:"flex-1 flex gap-1",children:[w.jsx("input",{type:"text",className:"input flex-1 py-1.5",placeholder:"http://localhost:3000",value:v,onChange:a=>S(a.target.value)}),w.jsx("button",{type:"submit",className:"btn py-1.5 px-3",children:"Go"})]}),h.slice(0,3).map(a=>w.jsx("button",{className:Fe("btn py-1.5 px-2 font-mono text-[11px]",R===a.port&&"btn-primary"),onClick:()=>o(a.port),children:a.port},a.port)),w.jsx("button",{className:"btn py-1.5 px-2",onClick:x,title:"Refresh",children:w.jsx(Wo,{className:"w-4 h-4"})}),w.jsx("button",{className:"btn py-1.5 px-2",onClick:E,title:"Open in new tab",children:w.jsx(U_,{className:"w-4 h-4"})}),w.jsx("button",{className:"btn py-1.5 px-2",onClick:m,title:"Fullscreen",children:w.jsx(Y_,{className:"w-4 h-4"})})]}),w.jsx("div",{className:"flex-1 min-h-0 h-full relative",children:c?w.jsx("iframe",{ref:i,src:c,className:"w-full h-full border-none",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups"}):w.jsxs("div",{className:"flex items-center justify-center h-full text-text-dim text-[13px] flex-col gap-2.5 p-5 text-center",children:[w.jsx("div",{className:"text-[32px] opacity-20",children:""}),w.jsx("p",{children:"Enter a URL or select a port to preview"}),w.jsx("p",{className:"text-[11px] opacity-50",children:"Development server will appear here"})]})})]})}function Mg(){const[i,c]=ie.useState(50),[p,R]=ie.useState(!1),A=ie.useRef(null),[j,I]=ie.useState(!1);ie.useEffect(()=>{const h=()=>I(window.innerWidth<=600);return h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const l=ie.useCallback((h,g)=>{if(!A.current)return null;const x=A.current.getBoundingClientRect();let E;return j?E=(g-x.top)/x.height*100:E=(h-x.left)/x.width*100,Math.min(Math.max(E,20),80)},[j]),d=h=>{h.preventDefault(),h.target.setPointerCapture(h.pointerId),R(!0)},v=h=>{if(!p)return;const g=l(h.clientX,h.clientY);g!==null&&c(g)},S=h=>{p&&(h.target.releasePointerCapture(h.pointerId),R(!1))};return w.jsxs("div",{ref:A,className:Fe("flex-1 flex overflow-hidden h-full",j?"flex-col":"flex-row"),children:[w.jsx("div",{className:"overflow-hidden h-full flex flex-col",style:{[j?"height":"width"]:`${i}%`,flexShrink:0},children:w.jsx(xf,{})}),w.jsx("div",{className:Fe("flex-shrink-0 flex items-center justify-center bg-transparent touch-none",j?"h-2 w-full cursor-row-resize":"w-2 h-full cursor-col-resize",p&&"bg-accent/20"),onPointerDown:d,onPointerMove:v,onPointerUp:S,onPointerCancel:S,children:w.jsx("div",{className:Fe("bg-surface-2 transition-colors",p&&"bg-accent",j?"w-8 h-[3px]":"h-8 w-[3px]")})}),w.jsx("div",{className:"flex-1 overflow-hidden h-full flex flex-col",children:w.jsx(wf,{})})]})}function Ag(){const{viewMode:i}=St();return w.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden","data-view":i,children:[i==="dashboard"&&w.jsx(wg,{}),i==="terminal"&&w.jsx(xf,{}),i==="code"&&w.jsx(Tg,{}),i==="preview"&&w.jsx(wf,{}),i==="split"&&w.jsx(Mg,{})]})}function Ng(){const{isConnected:i,connectedSession:c}=qo(),{sessions:p}=jt(),R=p.filter(j=>j.alive).length,A=p.length;return w.jsxs("div",{className:"flex items-center gap-4 px-3 py-1 bg-surface text-[11px] font-mono text-text-dim flex-shrink-0",children:[w.jsxs("div",{className:"flex items-center gap-1.5",children:[w.jsx("div",{className:Fe("w-2 h-2 rounded-full",i?"bg-success":"bg-text-dim")}),w.jsx("span",{children:i?`Connected to ${c}`:"Not connected"})]}),w.jsxs("span",{children:[R,"/",A," sessions"]}),w.jsx("div",{className:"flex-1"}),w.jsx("span",{className:"opacity-50",children:"v2.0.0"})]})}const Og={info:q_,error:af,success:Cn,warning:pv},jg={info:"bg-accent/15 border-accent/30",error:"bg-danger/15 border-danger/30",success:"bg-success/15 border-success/30",warning:"bg-warn/15 border-warn/30"},Nd={info:"text-accent",error:"text-danger",success:"text-success",warning:"text-warn"};function Ig({toast:i}){const{dismissToast:c}=St(),p=Og[i.type];return w.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 border text-[12px] shadow-lg ${jg[i.type]}`,style:{animation:"toast-in 0.2s ease-out"},children:[w.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${Nd[i.type]}`}),w.jsx("span",{className:"flex-1 text-text-primary",children:i.message}),w.jsx("button",{onClick:()=>c(i.id),className:`p-0.5 hover:opacity-70 transition-opacity ${Nd[i.type]}`,children:w.jsx(us,{className:"w-3 h-3"})})]})}function Bg(){const{toasts:i}=St();return i.length===0?null:w.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 max-w-[320px]",children:i.map(c=>w.jsx(Ig,{toast:c},c.id))})}function Fg(){const[i,c]=ie.useState(""),[p,R]=ie.useState(""),[A,j]=ie.useState(""),[I,l]=ie.useState(""),[d,v]=ie.useState(!1),{login:S}=hr(),h=async g=>{if(g.preventDefault(),l(""),p!==A){l("Passwords do not match");return}if(p.length<6){l("Password must be at least 6 characters");return}v(!0);try{const x=await Ho.setup(i,p);S(x.user,x.token)}catch(x){l(x instanceof Error?x.message:"Setup failed")}finally{v(!1)}};return w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-bg p-4",children:w.jsx("div",{className:"w-full max-w-md",children:w.jsxs("div",{className:"bg-surface rounded-lg border border-border p-8",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("h1",{className:"text-2xl font-bold text-text mb-2",children:"Welcome to VibeManager"}),w.jsx("p",{className:"text-text-dim text-sm",children:"Create your admin account to get started"})]}),w.jsxs("form",{onSubmit:h,className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-text mb-1",children:"Username"}),w.jsx("input",{id:"username",type:"text",className:"input w-full",value:i,onChange:g=>c(g.target.value),placeholder:"Enter username",required:!0,minLength:3,autoFocus:!0})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-text mb-1",children:"Password"}),w.jsx("input",{id:"password",type:"password",className:"input w-full",value:p,onChange:g=>R(g.target.value),placeholder:"Enter password",required:!0,minLength:6})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-text mb-1",children:"Confirm Password"}),w.jsx("input",{id:"confirmPassword",type:"password",className:"input w-full",value:A,onChange:g=>j(g.target.value),placeholder:"Confirm password",required:!0})]}),I&&w.jsx("div",{className:"text-red-500 text-sm bg-red-500/10 border border-red-500/20 rounded p-2",children:I}),w.jsx("button",{type:"submit",className:"btn btn-primary w-full py-2",disabled:d,children:d?"Creating account...":"Create Account"})]}),w.jsx("p",{className:"text-text-dim text-xs text-center mt-6",children:"This is a one-time setup. You can add more users later."})]})})})}function Hg(){const[i,c]=ie.useState(""),[p,R]=ie.useState(""),[A,j]=ie.useState(""),[I,l]=ie.useState(!1),{login:d}=hr(),v=async S=>{S.preventDefault(),j(""),l(!0);try{const h=await Ho.login(i,p);d(h.user,h.token)}catch(h){j(h instanceof Error?h.message:"Login failed")}finally{l(!1)}};return w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-bg p-4",children:w.jsx("div",{className:"w-full max-w-md",children:w.jsxs("div",{className:"bg-surface rounded-lg border border-border p-8",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("h1",{className:"text-2xl font-bold text-text mb-2",children:"VibeManager"}),w.jsx("p",{className:"text-text-dim text-sm",children:"Sign in to continue"})]}),w.jsxs("form",{onSubmit:v,className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-text mb-1",children:"Username"}),w.jsx("input",{id:"username",type:"text",className:"input w-full",value:i,onChange:S=>c(S.target.value),placeholder:"Enter username",required:!0,autoFocus:!0})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-text mb-1",children:"Password"}),w.jsx("input",{id:"password",type:"password",className:"input w-full",value:p,onChange:S=>R(S.target.value),placeholder:"Enter password",required:!0})]}),A&&w.jsx("div",{className:"text-red-500 text-sm bg-red-500/10 border border-red-500/20 rounded p-2",children:A}),w.jsx("button",{type:"submit",className:"btn btn-primary w-full py-2",disabled:I,children:I?"Signing in...":"Sign In"})]})]})})})}function zg(){const{theme:i}=St();return v_(),ie.useEffect(()=>{document.documentElement.setAttribute("data-theme",i),localStorage.setItem("vm_theme",i)},[i]),w.jsxs("div",{className:"flex flex-col h-full",children:[w.jsx(rg,{}),w.jsx(ig,{}),w.jsx(Ag,{}),w.jsx(Ng,{}),w.jsx(Bg,{})]})}function Ug(){const{theme:i}=St(),{isAuthenticated:c,setupRequired:p,setSetupRequired:R,setIsLoading:A,token:j,logout:I}=hr(),[l,d]=ie.useState(!0);return ie.useEffect(()=>{document.documentElement.setAttribute("data-theme",i),localStorage.setItem("vm_theme",i)},[i]),ie.useEffect(()=>{const v=localStorage.getItem("vm_theme");v&&St.getState().setTheme(v)},[]),ie.useEffect(()=>{async function v(){try{const{setupRequired:S}=await Ho.getSetupStatus();if(R(S),!S&&j)try{await Ho.me()}catch{I()}}catch(S){console.error("Failed to check auth status:",S)}finally{A(!1),d(!1)}}v()},[]),l?w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-bg",children:w.jsx("div",{className:"text-text-dim",children:"Loading..."})}):p?w.jsx(Fg,{}):c?w.jsx(zg,{}):w.jsx(Hg,{})}const Wg=new Jm({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5e3}}});Rm.createRoot(document.getElementById("root")).render(w.jsx(hn.StrictMode,{children:w.jsx(Ym,{client:Wg,children:w.jsx(Ug,{})})}));
